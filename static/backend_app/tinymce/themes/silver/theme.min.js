!function(){"use strict";var P=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},g=function(n,o){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return n(o.apply(null,t))}},U=function(t){return function(){return t}},b=function(t){return t};function f(o){for(var r=[],t=1;t<arguments.length;t++)r[t-1]=arguments[t];return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=r.concat(t);return o.apply(null,n)}}var t,e,n,o,r,s,i,k=function(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!n.apply(null,t)}},a=function(t){return function(){throw new Error(t)}},u=function(t){return t()},c=U(!1),l=U(!0),d=c,m=l,h=function(){return p},p=(o={fold:function(t,e){return t()},is:d,isSome:d,isNone:m,getOr:n=function(t){return t},getOrThunk:e=function(t){return t()},getOrDie:function(t){throw new Error(t||"error: getOrDie called on none.")},getOrNull:function(){return null},getOrUndefined:function(){return undefined},or:n,orThunk:e,map:h,ap:h,each:function(){},bind:h,flatten:h,exists:d,forall:m,filter:h,equals:t=function(t){return t.isNone()},equals_:t,toArray:function(){return[]},toString:U("none()")},Object.freeze&&Object.freeze(o),o),v=function(n){var t=function(){return n},e=function(){return r},o=function(t){return t(n)},r={fold:function(t,e){return e(n)},is:function(t){return n===t},isSome:m,isNone:d,getOr:t,getOrThunk:t,getOrDie:t,getOrNull:t,getOrUndefined:t,or:e,orThunk:e,map:function(t){return v(t(n))},ap:function(t){return t.fold(h,function(t){return v(t(n))})},each:function(t){t(n)},bind:o,flatten:t,exists:o,forall:o,filter:function(t){return t(n)?r:p},equals:function(t){return t.is(n)},equals_:function(t,e){return t.fold(d,function(t){return e(n,t)})},toArray:function(){return[n]},toString:function(){return"some("+n+")"}};return r},j={some:v,none:h,from:function(t){return null===t||t===undefined?p:v(t)}},y=function(e){return function(t){return function(t){if(null===t)return"null";var e=typeof t;return"object"===e&&Array.prototype.isPrototypeOf(t)?"array":"object"===e&&String.prototype.isPrototypeOf(t)?"string":e}(t)===e}},x=y("string"),w=y("object"),S=y("array"),C=y("boolean"),O=y("function"),z=y("number"),M=(r=Array.prototype.indexOf)===undefined?function(t,e){return F(t,e)}:function(t,e){return r.call(t,e)},T=function(t,e){return-1<M(t,e)},H=function(t,e){return I(t,e).isSome()},V=function(t,e){for(var n=[],o=0;o<t.length;o+=e){var r=t.slice(o,o+e);n.push(r)}return n},E=function(t,e){for(var n=t.length,o=new Array(n),r=0;r<n;r++){var i=t[r];o[r]=e(i,r,t)}return o},A=function(t,e){for(var n=0,o=t.length;n<o;n++)e(t[n],n,t)},B=function(t,e){for(var n=[],o=0,r=t.length;o<r;o++){var i=t[o];e(i,o,t)&&n.push(i)}return n},D=function(t,e,n){return function(t,e){for(var n=t.length-1;0<=n;n--)e(t[n],n,t)}(t,function(t){n=e(n,t)}),n},_=function(t,e,n){return A(t,function(t){n=e(n,t)}),n},R=function(t,e){for(var n=0,o=t.length;n<o;n++){var r=t[n];if(e(r,n,t))return j.some(r)}return j.none()},I=function(t,e){for(var n=0,o=t.length;n<o;n++)if(e(t[n],n,t))return j.some(n);return j.none()},F=function(t,e){for(var n=0,o=t.length;n<o;++n)if(t[n]===e)return n;return-1},L=Array.prototype.push,N=function(t){for(var e=[],n=0,o=t.length;n<o;++n){if(!Array.prototype.isPrototypeOf(t[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+t);L.apply(e,t[n])}return e},W=function(t,e){var n=E(t,e);return N(n)},G=function(t,e){for(var n=0,o=t.length;n<o;++n)if(!0!==e(t[n],n,t))return!1;return!0},X=Array.prototype.slice,$=function(t){var e=X.call(t,0);return e.reverse(),e},q=function(t,e){return B(t,function(t){return!T(e,t)})},Y=function(t){return[t]},K=function(t){return 0===t.length?j.none():j.some(t[0])},J=function(t){return 0===t.length?j.none():j.some(t[t.length-1])},Q=O(Array.from)?Array.from:function(t){return X.call(t)},Z=Object.keys,tt=Object.hasOwnProperty,et=function(t,e){for(var n=Z(t),o=0,r=n.length;o<r;o++){var i=n[o];e(t[i],i,t)}},nt=function(t,o){return ot(t,function(t,e,n){return{k:e,v:o(t,e,n)}})},ot=function(o,r){var i={};return et(o,function(t,e){var n=r(t,e,o);i[n.k]=n.v}),i},rt=function(t,n){var o=[];return et(t,function(t,e){o.push(n(t,e))}),o},it=function(t){return rt(t,function(t){return t})},at=function(t,e){return tt.call(t,e)},ut=function(e){return function(t){return at(t,e)?j.from(t[e]):j.none()}},ct=function(t,e){return ut(e)(t)},st=function(t,e){var n={};return n[t]=e,n},lt=function(n){return{is:function(t){return n===t},isValue:l,isError:c,getOr:U(n),getOrThunk:U(n),getOrDie:U(n),or:function(t){return lt(n)},orThunk:function(t){return lt(n)},fold:function(t,e){return e(n)},map:function(t){return lt(t(n))},each:function(t){t(n)},bind:function(t){return t(n)},exists:function(t){return t(n)},forall:function(t){return t(n)},toOption:function(){return j.some(n)}}},ft=function(n){return{is:c,isValue:c,isError:l,getOr:b,getOrThunk:function(t){return t()},getOrDie:function(){return a(String(n))()},or:function(t){return t},orThunk:function(t){return t()},fold:function(t,e){return t(n)},map:function(t){return ft(n)},each:P,bind:function(t){return ft(n)},exists:c,forall:l,toOption:j.none}},dt={value:lt,error:ft},mt=function(a){if(!S(a))throw new Error("cases must be an array");if(0===a.length)throw new Error("there must be at least one case");var u=[],n={};return A(a,function(t,o){var e=Z(t);if(1!==e.length)throw new Error("one and only one name per case");var r=e[0],i=t[r];if(n[r]!==undefined)throw new Error("duplicate key detected:"+r);if("cata"===r)throw new Error("cannot have a case named cata (sorry)");if(!S(i))throw new Error("case arguments must be an array");u.push(r),n[r]=function(){var t=arguments.length;if(t!==i.length)throw new Error("Wrong number of arguments to case "+r+". Expected "+i.length+" ("+i+"), got "+t);for(var n=new Array(t),e=0;e<n.length;e++)n[e]=arguments[e];return{fold:function(){if(arguments.length!==a.length)throw new Error("Wrong number of arguments to fold. Expected "+a.length+", got "+arguments.length);return arguments[o].apply(null,n)},match:function(t){var e=Z(t);if(u.length!==e.length)throw new Error("Wrong number of arguments to match. Expected: "+u.join(",")+"\nActual: "+e.join(","));if(!G(u,function(t){return T(e,t)}))throw new Error("Not all branches were specified when using match. Specified: "+e.join(", ")+"\nRequired: "+u.join(", "));return t[r].apply(null,n)},log:function(t){console.log(t,{constructors:u,constructor:r,params:n})}}}}),n},ht=(mt([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]),Object.prototype.hasOwnProperty),gt=function(a){return function(){for(var t=new Array(arguments.length),e=0;e<t.length;e++)t[e]=arguments[e];if(0===t.length)throw new Error("Can't merge zero objects");for(var n={},o=0;o<t.length;o++){var r=t[o];for(var i in r)ht.call(r,i)&&(n[i]=a(n[i],r[i]))}return n}},pt=gt(function(t,e){return w(t)&&w(e)?pt(t,e):e}),vt=gt(function(t,e){return e}),bt=function(t,e){return n=e,o={},et(t,function(t,e){T(n,e)||(o[e]=t)}),o;var n,o},yt=function(t){return ut(t)},xt=function(t,e){return n=t,o=e,function(t){return at(t,n)?t[n]:o};var n,o},wt=function(t,e){return ct(t,e)},kt=function(t,e){return st(t,e)},St=function(t){return e={},A(t,function(t){e[t.key]=t.value}),e;var e},Ct=function(t,e){var n,o,r,i,a,u=(n=[],o=[],A(t,function(t){t.fold(function(t){n.push(t)},function(t){o.push(t)})}),{errors:n,values:o});return 0<u.errors.length?(a=u.errors,g(dt.error,N)(a)):(i=e,0===(r=u.values).length?dt.value(i):dt.value(pt(i,vt.apply(undefined,r))))},Ot=function(t,e){return at(n=t,o=e)&&n[o]!==undefined&&null!==n[o];var n,o},zt=function(t){var e=t,n=function(){return e};return{get:n,set:function(t){e=t},clone:function(){return zt(n())}}},Mt=function(t){for(var e=[],n=function(t){e.push(t)},o=0;o<t.length;o++)t[o].each(n);return e},Tt=function(t,e){for(var n=0;n<t.length;n++){var o=e(t[n],n);if(o.isSome())return o}return j.none()},Ht=U("touchstart"),Vt=U("touchmove"),Et=U("touchend"),At=U("mousedown"),Bt=U("mousemove"),Dt=U("mouseout"),_t=U("mouseup"),Rt=U("mouseover"),It=U("focusin"),Ft=U("focusout"),Lt=U("keydown"),Pt=U("keyup"),jt=U("input"),Nt=U("change"),Ut=U("click"),Wt=U("transitionend"),Gt=U("selectstart"),Xt=U("paste"),$t=function(n){var o,r=!1;return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return r||(r=!0,o=n.apply(null,t)),o}},qt=function(t,e){var n=function(t,e){for(var n=0;n<t.length;n++){var o=t[n];if(o.test(e))return o}return undefined}(t,e);if(!n)return{major:0,minor:0};var o=function(t){return Number(e.replace(n,"$"+t))};return Kt(o(1),o(2))},Yt=function(){return Kt(0,0)},Kt=function(t,e){return{major:t,minor:e}},Jt={nu:Kt,detect:function(t,e){var n=String(e).toLowerCase();return 0===t.length?Yt():qt(t,n)},unknown:Yt},Qt="Firefox",Zt=function(t,e){return function(){return e===t}},te=function(t){var e=t.current;return{current:e,version:t.version,isEdge:Zt("Edge",e),isChrome:Zt("Chrome",e),isIE:Zt("IE",e),isOpera:Zt("Opera",e),isFirefox:Zt(Qt,e),isSafari:Zt("Safari",e)}},ee={unknown:function(){return te({current:undefined,version:Jt.unknown()})},nu:te,edge:U("Edge"),chrome:U("Chrome"),ie:U("IE"),opera:U("Opera"),firefox:U(Qt),safari:U("Safari")},ne="Windows",oe="Android",re="Solaris",ie="FreeBSD",ae=function(t,e){return function(){return e===t}},ue=function(t){var e=t.current;return{current:e,version:t.version,isWindows:ae(ne,e),isiOS:ae("iOS",e),isAndroid:ae(oe,e),isOSX:ae("OSX",e),isLinux:ae("Linux",e),isSolaris:ae(re,e),isFreeBSD:ae(ie,e)}},ce={unknown:function(){return ue({current:undefined,version:Jt.unknown()})},nu:ue,windows:U(ne),ios:U("iOS"),android:U(oe),linux:U("Linux"),osx:U("OSX"),solaris:U(re),freebsd:U(ie)},se=function(t,e){var n=String(e).toLowerCase();return R(t,function(t){return t.search(n)})},le=function(t,n){return se(t,n).map(function(t){var e=Jt.detect(t.versionRegexes,n);return{current:t.name,version:e}})},fe=function(t,n){return se(t,n).map(function(t){var e=Jt.detect(t.versionRegexes,n);return{current:t.name,version:e}})},de=function(t,e){return-1!==t.indexOf(e)},me=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,he=function(e){return function(t){return de(t,e)}},ge=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(t){return de(t,"edge/")&&de(t,"chrome")&&de(t,"safari")&&de(t,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,me],search:function(t){return de(t,"chrome")&&!de(t,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(t){return de(t,"msie")||de(t,"trident")}},{name:"Opera",versionRegexes:[me,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:he("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:he("firefox")},{name:"Safari",versionRegexes:[me,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(t){return(de(t,"safari")||de(t,"mobile/"))&&de(t,"applewebkit")}}],pe=[{name:"Windows",search:he("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(t){return de(t,"iphone")||de(t,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:he("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:he("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:he("linux"),versionRegexes:[]},{name:"Solaris",search:he("sunos"),versionRegexes:[]},{name:"FreeBSD",search:he("freebsd"),versionRegexes:[]}],ve={browsers:U(ge),oses:U(pe)},be=function(t){var e,n,o,r,i,a,u,c,s,l,f,d=ve.browsers(),m=ve.oses(),h=le(d,t).fold(ee.unknown,ee.nu),g=fe(m,t).fold(ce.unknown,ce.nu);return{browser:h,os:g,deviceType:(n=h,o=t,r=(e=g).isiOS()&&!0===/ipad/i.test(o),i=e.isiOS()&&!r,a=e.isAndroid()&&3===e.version.major,u=e.isAndroid()&&4===e.version.major,c=r||a||u&&!0===/mobile/i.test(o),s=e.isiOS()||e.isAndroid(),l=s&&!c,f=n.isSafari()&&e.isiOS()&&!1===/safari/i.test(o),{isiPad:U(r),isiPhone:U(i),isTablet:U(c),isPhone:U(l),isTouch:U(s),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:U(f)})}},ye={detect:$t(function(){var t=navigator.userAgent;return be(t)})},xe={tap:U("alloy.tap")},we=U("alloy.focus"),ke=U("alloy.blur.post"),Se=U("alloy.receive"),Ce=U("alloy.execute"),Oe=U("alloy.focus.item"),ze=xe.tap,Me=ye.detect().deviceType.isTouch()?xe.tap:Ut,Te=U("alloy.longpress"),He=U("alloy.sandbox.close"),Ve=U("alloy.typeahead.cancel"),Ee=U("alloy.system.init"),Ae=U("alloy.system.scroll"),Be=U("alloy.system.attached"),De=U("alloy.system.detached"),_e=U("alloy.system.dismissRequested"),Re=U("alloy.focusmanager.shifted"),Ie=U("alloy.slotcontainer.visibility"),Fe=U("alloy.change.tab"),Le=U("alloy.dismiss.tab"),Pe=function(t){if(null===t||t===undefined)throw new Error("Node cannot be null or undefined");return{dom:U(t)}},je={fromHtml:function(t,e){var n=(e||document).createElement("div");if(n.innerHTML=t,!n.hasChildNodes()||1<n.childNodes.length)throw console.error("HTML does not have a single root node",t),"HTML must have a single root node";return Pe(n.childNodes[0])},fromTag:function(t,e){var n=(e||document).createElement(t);return Pe(n)},fromText:function(t,e){var n=(e||document).createTextNode(t);return Pe(n)},fromDom:Pe,fromPoint:function(t,e,n){var o=t.dom();return j.from(o.elementFromPoint(e,n)).map(Pe)}},Ne=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];if(e.length!==n.length)throw new Error('Wrong number of arguments to struct. Expected "['+e.length+']", got '+n.length+" arguments");var o={};return A(e,function(t,e){o[t]=U(n[e])}),o}},Ue=function(t){return t.slice(0).sort()},We=function(e,t){if(!S(t))throw new Error("The "+e+" fields must be an array. Was: "+t+".");A(t,function(t){if(!x(t))throw new Error("The value "+t+" in the "+e+" fields was not a string.")})},Ge=function(r,i){var n,a=r.concat(i);if(0===a.length)throw new Error("You must specify at least one required or optional field.");return We("required",r),We("optional",i),n=Ue(a),R(n,function(t,e){return e<n.length-1&&t===n[e+1]}).each(function(t){throw new Error("The field: "+t+" occurs more than once in the combined fields: ["+n.join(", ")+"].")}),function(e){var n=Z(e);G(r,function(t){return T(n,t)})||function(t,e){throw new Error("All required keys ("+Ue(t).join(", ")+") were not specified. Specified keys were: "+Ue(e).join(", ")+".")}(r,n);var t=B(n,function(t){return!T(a,t)});0<t.length&&function(t){throw new Error("Unsupported keys for object: "+Ue(t).join(", "))}(t);var o={};return A(r,function(t){o[t]=U(e[t])}),A(i,function(t){o[t]=U(Object.prototype.hasOwnProperty.call(e,t)?j.some(e[t]):j.none())}),o}},Xe="undefined"!=typeof window?window:Function("return this;")(),$e=function(t,e){return function(t,e){for(var n=e!==undefined&&null!==e?e:Xe,o=0;o<t.length&&n!==undefined&&null!==n;++o)n=n[t[o]];return n}(t.split("."),e)},qe={getOrDie:function(t,e){var n=$e(t,e);if(n===undefined||null===n)throw t+" not available on this browser";return n}},Ye=(Node.ATTRIBUTE_NODE,Node.CDATA_SECTION_NODE,Node.COMMENT_NODE,Node.DOCUMENT_NODE),Ke=(Node.DOCUMENT_TYPE_NODE,Node.DOCUMENT_FRAGMENT_NODE,Node.ELEMENT_NODE),Je=Node.TEXT_NODE,Qe=(Node.PROCESSING_INSTRUCTION_NODE,Node.ENTITY_REFERENCE_NODE,Node.ENTITY_NODE,Node.NOTATION_NODE,Ke),Ze=Ye,tn=function(t,e){var n=t.dom();if(n.nodeType!==Qe)return!1;if(n.matches!==undefined)return n.matches(e);if(n.msMatchesSelector!==undefined)return n.msMatchesSelector(e);if(n.webkitMatchesSelector!==undefined)return n.webkitMatchesSelector(e);if(n.mozMatchesSelector!==undefined)return n.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")},en=function(t){return t.nodeType!==Qe&&t.nodeType!==Ze||0===t.childElementCount},nn=function(t,e){var n=e===undefined?document:e.dom();return en(n)?[]:E(n.querySelectorAll(t),je.fromDom)},on=function(t,e){var n=e===undefined?document:e.dom();return en(n)?j.none():j.from(n.querySelector(t)).map(je.fromDom)},rn=function(t,e){return t.dom()===e.dom()},an=(ye.detect().browser.isIE(),function(t){return je.fromDom(t.dom().ownerDocument)}),un=function(t){var e=t.dom().ownerDocument.defaultView;return je.fromDom(e)},cn=function(t){var e=t.dom();return j.from(e.parentNode).map(je.fromDom)},sn=function(t){var e=t.dom();return j.from(e.offsetParent).map(je.fromDom)},ln=function(t){var e=t.dom();return E(e.childNodes,je.fromDom)},fn=function(t,e){var n=t.dom().childNodes;return j.from(n[e]).map(je.fromDom)},dn=(Ne("element","offset"),function(e,n){cn(e).each(function(t){t.dom().insertBefore(n.dom(),e.dom())})}),mn=function(t,e){var n;(n=t.dom(),j.from(n.nextSibling).map(je.fromDom)).fold(function(){cn(t).each(function(t){gn(t,e)})},function(t){dn(t,e)})},hn=function(e,n){fn(e,0).fold(function(){gn(e,n)},function(t){e.dom().insertBefore(n.dom(),t.dom())})},gn=function(t,e){t.dom().appendChild(e.dom())},pn=function(e,t){A(t,function(t){gn(e,t)})},vn=function(t){t.dom().textContent="",A(ln(t),function(t){bn(t)})},bn=function(t){var e=t.dom();null!==e.parentNode&&e.parentNode.removeChild(e)},yn=function(t){return t.dom().innerHTML},xn=function(t,e){var n,o,r=an(t).dom(),i=je.fromDom(r.createDocumentFragment()),a=(n=e,(o=(r||document).createElement("div")).innerHTML=n,ln(je.fromDom(o)));pn(i,a),vn(t),gn(t,i)},wn=function(t){return t.dom().nodeName.toLowerCase()},kn=function(e){return function(t){return t.dom().nodeType===e}},Sn=kn(Ke),Cn=kn(Je),On=kn(Ye),zn=function(t,e,n){if(!(x(n)||C(n)||z(n)))throw console.error("Invalid call to Attr.set. Key ",e,":: Value ",n,":: Element ",t),new Error("Attribute value was not simple");t.setAttribute(e,n+"")},Mn=function(t,e,n){zn(t.dom(),e,n)},Tn=function(t,e){var n=t.dom();et(e,function(t,e){zn(n,e,t)})},Hn=function(t,e){var n=t.dom().getAttribute(e);return null===n?undefined:n},Vn=function(t,e){var n=t.dom();return!(!n||!n.hasAttribute)&&n.hasAttribute(e)},En=function(t,e){t.dom().removeAttribute(e)},An=function(t){return e=t,n=!1,je.fromDom(e.dom().cloneNode(n));var e,n},Bn=function(t){var e,n,o,r=An(t);return e=r,n=je.fromTag("div"),o=je.fromDom(e.dom().cloneNode(!0)),gn(n,o),yn(n)},Dn=function(t){return Bn(t)},_n="unknown",Rn="__CHROME_INSPECTOR_CONNECTION_TO_ALLOY__";(i=s||(s={}))[i.STOP=0]="STOP",i[i.NORMAL=1]="NORMAL",i[i.LOGGING=2]="LOGGING";var In,Fn,Ln=zt({}),Pn=function(e,t,n){var o,r,i,a;switch(wt(Ln.get(),e).orThunk(function(){var t=Z(Ln.get());return Tt(t,function(t){return-1<e.indexOf(t)?j.some(Ln.get()[t]):j.none()})}).getOr(s.NORMAL)){case s.NORMAL:return n(Gn());case s.LOGGING:var u=(o=e,r=t,i=[],a=(new Date).getTime(),{logEventCut:function(t,e,n){i.push({outcome:"cut",target:e,purpose:n})},logEventStopped:function(t,e,n){i.push({outcome:"stopped",target:e,purpose:n})},logNoParent:function(t,e,n){i.push({outcome:"no-parent",target:e,purpose:n})},logEventNoHandlers:function(t,e){i.push({outcome:"no-handlers-left",target:e})},logEventResponse:function(t,e,n){i.push({outcome:"response",purpose:n,target:e})},write:function(){var t=(new Date).getTime();T(["mousemove","mouseover","mouseout",Ee()],o)||console.log(o,{event:o,time:t-a,target:r.dom(),sequence:E(i,function(t){return T(["cut","stopped","response"],t.outcome)?"{"+t.purpose+"} "+t.outcome+" at ("+Dn(t.target)+")":t.outcome})})}}),c=n(u);return u.write(),c;case s.STOP:return!0}},jn=["alloy/data/Fields","alloy/debugging/Debugging"],Nn=function(t,e,n){return Pn(t,e,n)},Un=function(){if(window[Rn]!==undefined)return window[Rn];var e=function(t,e){var n=Ln.get();n[t]=e,Ln.set(n)};return window[Rn]={systems:{},lookup:function(e){var n=window[Rn].systems,t=Z(n);return Tt(t,function(t){return n[t].getByUid(e).toOption().map(function(t){return kt(Dn(t.element()),(e=function(n){var t=n.spec();return{"(original.spec)":t,"(dom.ref)":n.element().dom(),"(element)":Dn(n.element()),"(initComponents)":E(t.components!==undefined?t.components:[],e),"(components)":E(n.components(),e),"(bound.events)":rt(n.events(),function(t,e){return[e]}).join(", "),"(behaviours)":t.behaviours!==undefined?nt(t.behaviours,function(t,e){return t===undefined?"--revoked--":{config:t.configAsRaw(),"original-config":t.initialConfig,state:n.readState(e)}}):"none"}})(t));var e})}).orThunk(function(){return j.some({error:"Systems ("+t.join(", ")+") did not contain uid: "+e})})},events:{setToNormal:function(t){e(t,s.NORMAL)},setToLogging:function(t){e(t,s.LOGGING)},setToStop:function(t){e(t,s.STOP)}}},window[Rn]},Wn=function(t,e){Un().systems[t]=e},Gn=U({logEventCut:P,logEventStopped:P,logNoParent:P,logEventNoHandlers:P,logEventResponse:P,write:P}),Xn=0,$n=function(t){var e=(new Date).getTime();return t+"_"+Math.floor(1e9*Math.random())+ ++Xn+String(e)},qn=tinymce.util.Tools.resolve("tinymce.ThemeManager"),Yn=undefined&&undefined.__assign||function(){return(Yn=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},Kn=function(t,e){to(t,t.element(),e,{})},Jn=function(t,e,n){to(t,t.element(),e,n)},Qn=function(t){Kn(t,Ce())},Zn=function(t,e,n){to(t,e,n,{})},to=function(t,e,n,o){var r=Yn({target:e},o);t.getSystem().triggerEvent(n,e,nt(r,U))},eo=function(t,e,n,o){t.getSystem().triggerEvent(n,e,o.event())},no=function(t){var e=Cn(t)?t.dom().parentNode:t.dom();return e!==undefined&&null!==e&&e.ownerDocument.body.contains(e)},oo=$t(function(){return ro(je.fromDom(document))}),ro=function(t){var e=t.dom().body;if(null===e||e===undefined)throw"Body is not available yet";return je.fromDom(e)},io=function(t){Kn(t,De());var e=t.components();A(e,io)},ao=function(t){var e=t.components();A(e,ao),Kn(t,Be())},uo=function(t,e){co(t,e,gn)},co=function(t,e,n){t.getSystem().addToWorld(e),n(t.element(),e.element()),no(t.element())&&ao(e),t.syncComponents()},so=function(t){io(t),bn(t.element()),t.getSystem().removeFromWorld(t)},lo=function(e){var t=cn(e.element()).bind(function(t){return e.getSystem().getByDom(t).fold(j.none,j.some)});so(e),t.each(function(t){t.syncComponents()})},fo=function(t){var e=t.components();A(e,so),vn(t.element()),t.syncComponents()},mo=function(t,e){ho(t,e,gn)},ho=function(t,e,n){n(t,e.element());var o=ln(e.element());A(o,function(t){e.getByDom(t).each(ao)})},go=function(e){var t=ln(e.element());A(t,function(t){e.getByDom(t).each(io)}),bn(e.element())},po=mt([{strict:[]},{defaultedThunk:["fallbackThunk"]},{asOption:[]},{asDefaultedOptionThunk:["fallbackThunk"]},{mergeWithThunk:["baseThunk"]}]),vo=function(t){return po.defaultedThunk(U(t))},bo=po.strict,yo=po.asOption,xo=po.defaultedThunk,wo=po.mergeWithThunk;(Fn=In||(In={}))[Fn.Error=0]="Error",Fn[Fn.Value=1]="Value";var ko=function(t,e,n){return t.stype===In.Error?e(t.serror):n(t.svalue)},So=function(t){return{stype:In.Value,svalue:t}},Co=function(t){return{stype:In.Error,serror:t}},Oo=function(t){return t.fold(Co,So)},zo=function(t){return ko(t,dt.error,dt.value)},Mo=So,To=function(t){var e=[],n=[];return A(t,function(t){ko(t,function(t){return n.push(t)},function(t){return e.push(t)})}),{values:e,errors:n}},Ho=Co,Vo=function(t,e){return t.stype===In.Value?e(t.svalue):t},Eo=function(t,e){return t.stype===In.Error?e(t.serror):t},Ao=function(t,e){return t.stype===In.Value?{stype:In.Value,svalue:e(t.svalue)}:t},Bo=function(t,e){return t.stype===In.Error?{stype:In.Error,serror:e(t.serror)}:t},Do=function(t){return g(Ho,N)(t)},_o=function(t,e){var n,o,r=To(t);return 0<r.errors.length?Do(r.errors):(n=r.values,o=e,0<n.length?Mo(pt(o,vt.apply(undefined,n))):Mo(o))},Ro=function(t){var e=To(t);return 0<e.errors.length?Do(e.errors):Mo(e.values)},Io=mt([{setOf:["validator","valueType"]},{arrOf:["valueType"]},{objOf:["fields"]},{itemOf:["validator"]},{choiceOf:["key","branches"]},{thunk:["description"]},{func:["args","outputSchema"]}]),Fo=mt([{field:["name","presence","type"]},{state:["name"]}]),Lo=function(){return qe.getOrDie("JSON")},Po=function(t,e,n){return Lo().stringify(t,e,n)},jo=function(t){return w(t)&&100<Z(t).length?" removed due to size":Po(t,null,2)},No=function(t,e){return Ho([{path:t,getErrorInfo:e}])},Uo=mt([{field:["key","okey","presence","prop"]},{state:["okey","instantiator"]}]),Wo=function(n,o,r){return ct(o,r).fold(function(){return t=r,e=o,No(n,function(){return'Could not find valid *strict* value for "'+t+'" in '+jo(e)});var t,e},Mo)},Go=function(t,e,n){var o=ct(t,e).fold(function(){return n(t)},b);return Mo(o)},Xo=function(u,c,t,s){return t.fold(function(r,n,t,o){var i=function(t){var e=o.extract(u.concat([r]),s,t);return Ao(e,function(t){return st(n,s(t))})},a=function(t){return t.fold(function(){var t=st(n,s(j.none()));return Mo(t)},function(t){var e=o.extract(u.concat([r]),s,t);return Ao(e,function(t){return st(n,s(j.some(t)))})})};return t.fold(function(){return Vo(Wo(u,c,r),i)},function(t){return Vo(Go(c,r,t),i)},function(){return Vo(Mo(ct(c,r)),a)},function(t){return Vo((n=t,o=ct(e=c,r).map(function(t){return!0===t?n(e):t}),Mo(o)),a);var e,n,o},function(t){var e=t(c),n=Ao(Go(c,r,U({})),function(t){return pt(e,t)});return Vo(n,i)})},function(t,e){var n=e(c);return Mo(st(t,s(n)))})},$o=function(o){return{extract:function(n,t,e){return Eo(o(e,t),function(t){return e=t,No(n,function(){return e});var e})},toString:function(){return"val"},toDsl:function(){return Io.itemOf(o)}}},qo=function(t){var c=Yo(t),s=D(t,function(e,t){return t.fold(function(t){return pt(e,kt(t,!0))},U(e))},{});return{extract:function(t,e,n){var o,r,i,a=C(n)?[]:(r=Z(o=n),B(r,function(t){return Ot(o,t)})),u=B(a,function(t){return!Ot(s,t)});return 0===u.length?c.extract(t,e,n):(i=u,No(t,function(){return"There are unsupported fields: ["+i.join(", ")+"] specified"}))},toString:c.toString,toDsl:c.toDsl}},Yo=function(u){return{extract:function(t,e,n){return o=t,r=n,i=e,a=E(u,function(t){return Xo(o,r,t,i)}),_o(a,{});var o,r,i,a},toString:function(){return"obj{\n"+E(u,function(t){return t.fold(function(t,e,n,o){return t+" -> "+o.toString()},function(t,e){return"state("+t+")"})}).join("\n")+"}"},toDsl:function(){return Io.objOf(E(u,function(t){return t.fold(function(t,e,n,o){return Fo.field(t,n,o)},function(t,e){return Fo.state(t)})}))}}},Ko=function(r){return{extract:function(n,o,t){var e=E(t,function(t,e){return r.extract(n.concat(["["+e+"]"]),o,t)});return Ro(e)},toString:function(){return"array("+r.toString()+")"},toDsl:function(){return Io.arrOf(r)}}},Jo=function(u,c){return{extract:function(n,o,r){var t,e,i=Z(r),a=(t=n,e=i,Ko($o(u)).extract(t,b,e));return Vo(a,function(t){var e=E(t,function(t){return Uo.field(t,t,bo(),c)});return Yo(e).extract(n,o,r)})},toString:function(){return"setOf("+c.toString()+")"},toDsl:function(){return Io.setOf(u,c)}}},Qo=U($o(Mo)),Zo=g(Ko,Yo),tr=Uo.state,er=Uo.field,nr=function(n,e,o,r,i){return wt(r,i).fold(function(){return t=r,e=i,No(n,function(){return'The chosen schema: "'+e+'" did not exist in branches: '+jo(t)});var t,e},function(t){return Yo(t).extract(n.concat(["branch: "+i]),e,o)})},or=function(r,i){return{extract:function(e,n,o){return wt(o,r).fold(function(){return t=r,No(e,function(){return'Choice schema did not contain choice key: "'+t+'"'});var t},function(t){return nr(e,n,o,i,t)})},toString:function(){return"chooseOn("+r+"). Possible values: "+Z(i)},toDsl:function(){return Io.choiceOf(r,i)}}},rr=$o(Mo),ir=function(e){return $o(function(t){return e(t).fold(Ho,Mo)})},ar=function(e,t){return Jo(function(t){return Oo(e(t))},t)},ur=function(t,e,n){return zo((o=t,r=b,i=n,a=e.extract([o],r,i),Bo(a,function(t){return{input:i,errors:t}})));var o,r,i,a},cr=function(t){return t.fold(function(t){throw new Error(lr(t))},b)},sr=function(t,e,n){return cr(ur(t,e,n))},lr=function(t){return"Errors: \n"+(e=t.errors,n=10<e.length?e.slice(0,10).concat([{path:[],getErrorInfo:function(){return"... (only showing first ten failures)"}}]):e,E(n,function(t){return"Failed path: ("+t.path.join(" > ")+")\n"+t.getErrorInfo()}))+"\n\nInput object: "+jo(t.input);var e,n},fr=function(t,e){return or(t,e)},dr=U(rr),mr=function(n,o){return $o(function(t){var e=typeof t;return n(t)?Mo(t):Ho("Expected type: "+o+" but got: "+e)})},hr=mr(z,"number"),gr=mr(x,"string"),pr=mr(C,"boolean"),vr=mr(O,"function"),br=function(t){return er(t,t,bo(),Qo())},yr=function(t,e){return er(t,t,bo(),e)},xr=function(t){return yr(t,gr)},wr=function(t){return yr(t,vr)},kr=function(t,e){return er(t,t,bo(),Yo(e))},Sr=function(t,e){return er(t,t,bo(),Zo(e))},Cr=function(t,e){return er(t,t,bo(),Ko(e))},Or=function(t){return er(t,t,yo(),Qo())},zr=function(t,e){return er(t,t,yo(),e)},Mr=function(t){return zr(t,gr)},Tr=function(t,e){return er(t,t,yo(),Yo(e))},Hr=function(t,e){return er(t,t,yo(),qo(e))},Vr=function(t,e){return er(t,t,vo(e),Qo())},Er=function(t,e,n){return er(t,t,vo(e),n)},Ar=function(t,e){return Er(t,e,hr)},Br=function(t,e){return Er(t,e,gr)},Dr=function(t,e){return Er(t,e,pr)},_r=function(t,e){return Er(t,e,vr)},Rr=function(t,e,n){return er(t,t,vo(e),Yo(n))},Ir=function(t,e){return tr(t,e)},Fr=function(t){if(!Ot(t,"can")&&!Ot(t,"abort")&&!Ot(t,"run"))throw new Error("EventHandler defined by: "+Po(t,null,2)+" does not have can, abort, or run!");return sr("Extracting event.handler",qo([Vr("can",U(!0)),Vr("abort",U(!1)),Vr("run",P)]),t)},Lr=function(n){var e,o,r,i,t=(e=n,o=function(t){return t.can},function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return _(e,function(t,e){return t&&o(e).apply(undefined,n)},!0)}),a=(r=n,i=function(t){return t.abort},function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return _(r,function(t,e){return t||i(e).apply(undefined,n)},!1)});return Fr({can:t,abort:a,run:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];A(n,function(t){t.run.apply(undefined,e)})}})};function Pr(t,e,n,o,r){return t(n,o)?j.some(n):O(r)&&r(n)?j.none():e(n,o,r)}var jr,Nr=function(t,e,n){for(var o=t.dom(),r=O(n)?n:U(!1);o.parentNode;){o=o.parentNode;var i=je.fromDom(o);if(e(i))return j.some(i);if(r(i))break}return j.none()},Ur=function(t,e,n){return Pr(function(t){return e(t)},Nr,t,e,n)},Wr=function(t,o){var r=function(t){for(var e=0;e<t.childNodes.length;e++){if(o(je.fromDom(t.childNodes[e])))return j.some(je.fromDom(t.childNodes[e]));var n=r(t.childNodes[e]);if(n.isSome())return n}return j.none()};return r(t.dom())},Gr=function(t,e,n){return Ur(t,function(t){return e(t).isSome()},n).bind(e)},Xr=function(t){return St(t)},$r=function(t,e){return{key:t,value:Fr({abort:e})}},qr=function(t){return{key:t,value:Fr({run:function(t,e){e.event().prevent()}})}},Yr=function(t,e){return{key:t,value:Fr({run:e})}},Kr=function(t,e,n){return{key:t,value:Fr({run:function(t){e.apply(undefined,[t].concat(n))}})}},Jr=function(t){return function(o){return{key:t,value:Fr({run:function(t,e){var n;n=e,rn(t.element(),n.event().target())&&o(t,e)}})}}},Qr=function(t,e,n){var o,r,i=e.partUids[n];return r=i,Yr(o=t,function(t,e){t.getSystem().getByUid(r).each(function(t){eo(t,t.element(),o,e)})})},Zr=function(t,r){return Yr(t,function(e,t){var n=t.event(),o=e.getSystem().getByDom(n.target()).fold(function(){return Gr(n.target(),function(t){return e.getSystem().getByDom(t).toOption()},U(!1)).getOr(e)},function(t){return t});r(e,o,t)})},ti=function(t){return Yr(t,function(t,e){e.cut()})},ei=function(t){return Yr(t,function(t,e){e.stop()})},ni=function(t,e){return Jr(t)(e)},oi=Jr(Be()),ri=Jr(De()),ii=Jr(Ee()),ai=(jr=Ce(),function(t){return Yr(jr,t)}),ui=function(t){return E(t,function(t){return o=e="/*",r=(n=t).length-e.length,""!==o&&(n.length<o.length||n.substr(r,r+o.length)!==o)?t:t.substring(0,t.length-"/*".length);var e,n,o,r})},ci=function(t,e){var n=t.toString(),o=n.indexOf(")")+1,r=n.indexOf("("),i=n.substring(r+1,o-1).split(/,\s*/);return t.toFunctionAnnotation=function(){return{name:e,parameters:ui(i)}},t},si=undefined&&undefined.__assign||function(){return(si=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},li=function(t){return{classes:t.classes!==undefined?t.classes:[],attributes:t.attributes!==undefined?t.attributes:{},styles:t.styles!==undefined?t.styles:{}}},fi=undefined&&undefined.__assign||function(){return(fi=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},di=function(n,o,r){return ii(function(t,e){r(t,n,o)})},mi=function(r,i,a){var t,e,n,o,u,c;return t=function(n){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];var o=[n].concat(t);return n.config({name:U(r)}).fold(function(){throw new Error("We could not find any behaviour configuration for: "+r+". Using API: "+a)},function(t){var e=Array.prototype.slice.call(o,1);return i.apply(undefined,[n,t.config,t.state].concat(e))})},e=a,n=i.toString(),o=n.indexOf(")")+1,u=n.indexOf("("),c=n.substring(u+1,o-1).split(/,\s*/),t.toFunctionAnnotation=function(){return{name:e,parameters:ui(c.slice(0,1).concat(c.slice(3)))}},t},hi=function(t){return{key:t,value:undefined}},gi=function(n,t,o,r,e,i,a){var u=function(t){return Ot(t,o)?t[o]():j.none()},c=nt(e,function(t,e){return mi(o,t,e)}),s=nt(i,function(t,e){return ci(t,e)}),l=fi({},s,c,{revoke:f(hi,o),config:function(t){var e=sr(o+"-config",n,t);return{key:o,value:{config:e,me:l,configAsRaw:$t(function(){return sr(o+"-config",n,t)}),initialConfig:t,state:a}}},schema:function(){return t},exhibit:function(t,n){return u(t).bind(function(e){return wt(r,"exhibit").map(function(t){return t(n,e.config,e.state)})}).getOr(li({}))},name:function(){return o},handlers:function(t){return u(t).map(function(t){return xt("events",function(t,e){return{}})(r)(t.config,t.state)}).getOr({})}});return l},pi={init:function(){return vi({readState:function(){return"No State required"}})}},vi=function(t){return t},bi=function(t){return St(t)},yi=qo([br("fields"),br("name"),Vr("active",{}),Vr("apis",{}),Vr("state",pi),Vr("extra",{})]),xi=function(t){var e,n,o,r,i,a,u,c,s=sr("Creating behaviour: "+t.name,yi,t);return e=s.fields,n=s.name,o=s.active,r=s.apis,i=s.extra,a=s.state,u=qo(e),c=Tr(n,[Hr("config",e)]),gi(u,c,n,o,r,i,a)},wi=qo([br("branchKey"),br("branches"),br("name"),Vr("active",{}),Vr("apis",{}),Vr("state",pi),Vr("extra",{})]),ki=function(t){var e,n,o,r,i,a,u,c,s=sr("Creating behaviour: "+t.name,wi,t);return e=fr(s.branchKey,s.branches),n=s.name,o=s.active,r=s.apis,i=s.extra,a=s.state,c=Tr(n,[zr("config",u=e)]),gi(u,c,n,o,r,i,a)},Si=U(undefined),Ci=function(t,e){var n=Hn(t,e);return n===undefined||""===n?[]:n.split(" ")},Oi=function(t){return t.dom().classList!==undefined},zi=function(t){return Ci(t,"class")},Mi=function(t,e){return r=e,i=Ci(n=t,o="class").concat([r]),Mn(n,o,i.join(" ")),!0;var n,o,r,i},Ti=function(t,e){return r=e,0<(i=B(Ci(n=t,o="class"),function(t){return t!==r})).length?Mn(n,o,i.join(" ")):En(n,o),!1;var n,o,r,i},Hi=function(t,e){Oi(t)?t.dom().classList.add(e):Mi(t,e)},Vi=function(t,e){var n;Oi(t)?t.dom().classList.remove(e):Ti(t,e),0===(Oi(n=t)?n.dom().classList:zi(n)).length&&En(n,"class")},Ei=function(t,e){return Oi(t)?t.dom().classList.toggle(e):(o=e,T(zi(n=t),o)?Ti(n,o):Mi(n,o));var n,o},Ai=function(t,e){return Oi(t)&&t.dom().classList.contains(e)},Bi=function(t,e,n){Vi(t,n),Hi(t,e)},Di=Object.freeze({toAlpha:function(t,e,n){Bi(t.element(),e.alpha,e.omega)},toOmega:function(t,e,n){Bi(t.element(),e.omega,e.alpha)},isAlpha:function(t,e,n){return Ai(t.element(),e.alpha)},isOmega:function(t,e,n){return Ai(t.element(),e.omega)},clear:function(t,e,n){Vi(t.element(),e.alpha),Vi(t.element(),e.omega)}}),_i=[br("alpha"),br("omega")],Ri=xi({fields:_i,name:"swapping",apis:Di}),Ii=function(t){t.dom().focus()},Fi=function(t){t.dom().blur()},Li=function(t){var e=t!==undefined?t.dom():document;return j.from(e.activeElement).map(je.fromDom)},Pi=function(e){return Li(an(e)).filter(function(t){return e.dom().contains(t.dom())})},ji=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Ni=function(t){var e=document.createElement("a");e.target="_blank",e.href=t.href,e.rel="noreferrer noopener";var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),document.body.appendChild(e),e.dispatchEvent(n),document.body.removeChild(e)},Ui={formatChanged:U("formatChanged"),orientationChanged:U("orientationChanged"),dropupDismissed:U("dropupDismissed")},Wi=Object.freeze({events:function(u){return Xr([Yr(Se(),function(r,i){var t,e,a=u.channels,n=Z(a),o=(t=n,(e=i).universal()?t:B(t,function(t){return T(e.channels(),t)}));A(o,function(t){var e=a[t],n=e.schema,o=sr("channel["+t+"] data\nReceiver: "+Dn(r.element()),n,i.data());e.onReceive(r,o)})})])}}),Gi=U([br("menu"),br("selectedMenu")]),Xi=U([br("item"),br("selectedItem")]),$i=(U(Yo(Xi().concat(Gi()))),U(Yo(Xi()))),qi=kr("initSize",[br("numColumns"),br("numRows")]),Yi=function(){return kr("markers",[br("backgroundMenu")].concat(Gi()).concat(Xi()))},Ki=function(t){return kr("markers",E(t,br))},Ji=function(t,e,n){return function(){var t=new Error;if(t.stack!==undefined){var e=t.stack.split("\n");R(e,function(e){return 0<e.indexOf("alloy")&&!H(jn,function(t){return-1<e.indexOf(t)})}).getOr(_n)}}(),er(e,e,n,ir(function(n){return dt.value(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return n.apply(undefined,t)})}))},Qi=function(t){return Ji(0,t,vo(P))},Zi=function(t){return Ji(0,t,vo(j.none))},ta=function(t){return Ji(0,t,bo())},ea=function(t){return Ji(0,t,bo())},na=function(t,e){return Ir(t,U(e))},oa=function(t){return Ir(t,b)},ra=U(qi),ia=[yr("channels",ar(dt.value,qo([ta("onReceive"),Vr("schema",dr())])))],aa=xi({fields:ia,name:"receiving",active:Wi}),ua=function(t,e){var n=da(t,e),o=e.aria;o.update(t,o,n)},ca=function(t,e,n){Ei(t.element(),e.toggleClass),ua(t,e)},sa=function(t,e,n){Hi(t.element(),e.toggleClass),ua(t,e)},la=function(t,e,n){Vi(t.element(),e.toggleClass),ua(t,e)},fa=function(t,e,n,o){(o?sa:la)(t,e,n)},da=function(t,e){return Ai(t.element(),e.toggleClass)},ma=function(t,e,n){fa(t,e,n,e.selected)},ha=Object.freeze({onLoad:ma,toggle:ca,isOn:da,on:sa,off:la,set:fa}),ga=Object.freeze({exhibit:function(t,e,n){return li({})},events:function(t,e){var n,o,r,i=(n=t,o=e,r=ca,ai(function(t){r(t,n,o)})),a=di(t,e,ma);return Xr(N([t.toggleOnExecute?[i]:[],[a]]))}}),pa=function(t,e,n){Mn(t.element(),"aria-expanded",n)},va=[Vr("selected",!1),br("toggleClass"),Vr("toggleOnExecute",!0),Er("aria",{mode:"none"},fr("mode",{pressed:[Vr("syncWithExpanded",!1),na("update",function(t,e,n){Mn(t.element(),"aria-pressed",n),e.syncWithExpanded&&pa(t,e,n)})],checked:[na("update",function(t,e,n){Mn(t.element(),"aria-checked",n)})],expanded:[na("update",pa)],selected:[na("update",function(t,e,n){Mn(t.element(),"aria-selected",n)})],none:[na("update",P)]}))],ba=xi({fields:va,name:"toggling",active:ga,apis:ha}),ya=function(n,o){return aa.config({channels:kt(Ui.formatChanged(),{onReceive:function(t,e){e.command===n&&o(t,e.state)}})})},xa=function(t){return aa.config({channels:kt(Ui.orientationChanged(),{onReceive:t})})},wa=function(t,e){return{key:t,value:{onReceive:e}}},ka="tinymce-mobile",Sa={resolve:function(t){return ka+"-"+t},prefix:U(ka)},Ca=function(t){var e=function(t,e){e.stop(),Qn(t)},n=ye.detect().deviceType.isTouch()?[Yr(ze(),e)]:[Yr(Ut(),e),Yr(At(),function(t,e){e.cut()})];return Xr(N([t.map(function(n){return Yr(Ce(),function(t,e){n(t),e.stop()})}).toArray(),n]))},Oa=function(t,e){e.ignore||(Ii(t.element()),e.onFocus(t))},za=Object.freeze({focus:Oa,blur:function(t,e){e.ignore||Fi(t.element())},isFocused:function(t){return e=t.element(),n=an(e).dom(),e.dom()===n.activeElement;var e,n}}),Ma=Object.freeze({exhibit:function(t,e){var n=e.ignore?{}:{attributes:{tabindex:"-1"}};return li(n)},events:function(n){return Xr([Yr(we(),function(t,e){Oa(t,n),e.stop()})].concat(n.stopMousedown?[Yr(At(),function(t,e){e.event().prevent()})]:[]))}}),Ta=[Qi("onFocus"),Vr("stopMousedown",!1),Vr("ignore",!1)],Ha=xi({fields:Ta,name:"focusing",active:Ma,apis:za}),Va=function(t){return t.style!==undefined},Ea=function(t,e,n){if(!x(n))throw console.error("Invalid call to CSS.set. Property ",e,":: Value ",n,":: Element ",t),new Error("CSS value must be a string: "+n);Va(t)&&t.style.setProperty(e,n)},Aa=function(t,e){Va(t)&&t.style.removeProperty(e)},Ba=function(t,e,n){var o=t.dom();Ea(o,e,n)},Da=function(t,e){var n=t.dom();et(e,function(t,e){Ea(n,e,t)})},_a=function(t,e){var n=t.dom(),o=window.getComputedStyle(n).getPropertyValue(e),r=""!==o||no(t)?o:Ra(n,e);return null===r?undefined:r},Ra=function(t,e){return Va(t)?t.style.getPropertyValue(e):""},Ia=function(t,e){var n=t.dom(),o=Ra(n,e);return j.from(o).filter(function(t){return 0<t.length})},Fa=function(t,e){var n=t.dom();Aa(n,e),Vn(t,"style")&&""===Hn(t,"style").replace(/^\s+|\s+$/g,"")&&En(t,"style")},La=function(t){return t.dom().offsetWidth};function Pa(o,r){var t=function(t){var e=r(t);if(e<=0||null===e){var n=_a(t,o);return parseFloat(n)||0}return e},i=function(r,t){return _(t,function(t,e){var n=_a(r,e),o=n===undefined?0:parseInt(n,10);return isNaN(o)?t:t+o},0)};return{set:function(t,e){if(!z(e)&&!e.match(/^[0-9]+$/))throw o+".set accepts only positive integer values. Value was "+e;var n=t.dom();Va(n)&&(n.style[o]=e+"px")},get:t,getOuter:t,aggregate:i,max:function(t,e,n){var o=i(t,n);return o<e?e-o:0}}}var ja=Pa("height",function(t){var e=t.dom();return no(t)?e.getBoundingClientRect().height:e.offsetHeight}),Na=function(t){return ja.get(t)},Ua=function(t){return ja.getOuter(t)},Wa=function(t,e,n){return B(function(t,e){for(var n=O(e)?e:U(!1),o=t.dom(),r=[];null!==o.parentNode&&o.parentNode!==undefined;){var i=o.parentNode,a=je.fromDom(i);if(r.push(a),!0===n(a))break;o=i}return r}(t,n),e)},Ga=function(t,e){return B(cn(n=t).map(ln).map(function(t){return B(t,function(t){return!rn(n,t)})}).getOr([]),e);var n},Xa=function(t,e){return nn(e,t)},$a=function(t){return on(t)},qa=function(t,e,n){return Nr(t,function(t){return tn(t,e)},n)},Ya=function(t,e){return on(e,t)},Ka=function(t,e,n){return Pr(tn,qa,t,e,n)},Ja=function(t,e,n){var o=$(t.slice(0,e)),r=$(t.slice(e+1));return R(o.concat(r),n)},Qa=function(t,e,n){var o=$(t.slice(0,e));return R(o,n)},Za=function(t,e,n){var o=t.slice(0,e),r=t.slice(e+1);return R(r.concat(o),n)},tu=function(t,e,n){var o=t.slice(e+1);return R(o,n)},eu=function(n){return function(t){var e=t.raw();return T(n,e.which)}},nu=function(t){return function(e){return G(t,function(t){return t(e)})}},ou=function(t){return!0===t.raw().shiftKey},ru=function(t){return!0===t.raw().ctrlKey},iu=k(ou),au=function(t,e){return{matches:t,classification:e}},uu=function(t,e,n,o){var r=t+e;return o<r?n:r<n?o:r},cu=function(t,e,n){return t<=e?e:n<=t?n:t},su=function(e,n,t){var o=Xa(e.element(),"."+n.highlightClass);A(o,function(t){Vi(t,n.highlightClass),e.getSystem().getByDom(t).each(function(t){n.onDehighlight(e,t)})})},lu=function(t,e,n,o){var r=fu(t,e,n,o);su(t,e),Hi(o.element(),e.highlightClass),r||e.onHighlight(t,o)},fu=function(t,e,n,o){return Ai(o.element(),e.highlightClass)},du=function(t,e,n,o){var r=Xa(t.element(),"."+e.itemClass);return j.from(r[o]).fold(function(){return dt.error("No element found with index "+o)},t.getSystem().getByDom)},mu=function(e,t,n){return Ya(e.element(),"."+t.itemClass).bind(function(t){return e.getSystem().getByDom(t).toOption()})},hu=function(e,t,n){var o=Xa(e.element(),"."+t.itemClass);return(0<o.length?j.some(o[o.length-1]):j.none()).bind(function(t){return e.getSystem().getByDom(t).toOption()})},gu=function(n,e,t,o){var r=Xa(n.element(),"."+e.itemClass);return I(r,function(t){return Ai(t,e.highlightClass)}).bind(function(t){var e=uu(t,o,0,r.length-1);return n.getSystem().getByDom(r[e]).toOption()})},pu=function(e,t,n){var o=Xa(e.element(),"."+t.itemClass);return Mt(E(o,function(t){return e.getSystem().getByDom(t).toOption()}))},vu=Object.freeze({dehighlightAll:su,dehighlight:function(t,e,n,o){var r=fu(t,e,n,o);Vi(o.element(),e.highlightClass),r&&e.onDehighlight(t,o)},highlight:lu,highlightFirst:function(e,n,o){mu(e,n,o).each(function(t){lu(e,n,o,t)})},highlightLast:function(e,n,o){hu(e,n,o).each(function(t){lu(e,n,o,t)})},highlightAt:function(e,n,o,t){du(e,n,o,t).fold(function(t){throw new Error(t)},function(t){lu(e,n,o,t)})},highlightBy:function(e,n,o,t){var r=pu(e,n,o);R(r,t).each(function(t){lu(e,n,o,t)})},isHighlighted:fu,getHighlighted:function(e,t,n){return Ya(e.element(),"."+t.highlightClass).bind(function(t){return e.getSystem().getByDom(t).toOption()})},getFirst:mu,getLast:hu,getPrevious:function(t,e,n){return gu(t,e,0,-1)},getNext:function(t,e,n){return gu(t,e,0,1)},getCandidates:pu}),bu=[br("highlightClass"),br("itemClass"),Qi("onHighlight"),Qi("onDehighlight")],yu=xi({fields:bu,name:"highlighting",apis:vu}),xu=function(t,e,n){e.exists(function(e){return n.exists(function(t){return rn(t,e)})})||Jn(t,Re(),{prevFocus:e,newFocus:n})},wu=function(){var r=function(t){return Pi(t.element())};return{get:r,set:function(t,e){var n=r(t);t.getSystem().triggerFocus(e,t.element());var o=r(t);xu(t,n,o)}}},ku=function(){var r=function(t){return yu.getHighlighted(t).map(function(t){return t.element()})};return{get:r,set:function(e,t){var n=r(e);e.getSystem().getByDom(t).fold(P,function(t){yu.highlight(e,t)});var o=r(e);xu(e,n,o)}}},Su=function(t,e,n,i,a){var u=function(e,n,t,o,r){var i,a,u=t(e,n,o,r);return(i=u,a=n.event(),R(i,function(t){return t.matches(a)}).map(function(t){return t.classification})).bind(function(t){return t(e,n,o,r)})},o={schema:function(){return t.concat([Vr("focusManager",wu()),na("handler",o),na("state",e)])},processKey:u,toEvents:function(o,r){return Xr(a.map(function(n){return Yr(we(),function(t,e){n(t,o,r,e),e.stop()})}).toArray().concat([Yr(Lt(),function(t,e){u(t,e,n,o,r).each(function(t){e.stop()})}),Yr(Pt(),function(t,e){u(t,e,i,o,r).each(function(t){e.stop()})})]))}};return o},Cu=function(t){var e=[Or("onEscape"),Or("onEnter"),Vr("selector",'[data-alloy-tabstop="true"]'),Vr("firstTabstop",0),Vr("useTabstopAt",U(!0)),Or("visibilitySelector")].concat([t]),a=function(t,e){var n=t.visibilitySelector.bind(function(t){return Ka(e,t)}).getOr(e);return 0<Na(n)},u=function(e,t,n,o,r){return r(t,n,function(t){return a(e=o,n=t)&&e.useTabstopAt(n);var e,n}).fold(function(){return o.cyclic?j.some(!0):j.none()},function(t){return o.focusManager.set(e,t),j.some(!0)})},i=function(e,t,n,o){var r,i,a=Xa(e.element(),n.selector);return(r=e,i=n,i.focusManager.get(r).bind(function(t){return Ka(t,i.selector)})).bind(function(t){return I(a,f(rn,t)).bind(function(t){return u(e,a,t,n,o)})})},n=U([au(nu([ou,eu([9])]),function(t,e,n,o){var r=n.cyclic?Ja:Qa;return i(t,0,n,r)}),au(eu([9]),function(t,e,n,o){var r=n.cyclic?Za:tu;return i(t,0,n,r)}),au(eu([27]),function(e,n,t,o){return t.onEscape.bind(function(t){return t(e,n)})}),au(nu([iu,eu([13])]),function(e,n,t,o){return t.onEnter.bind(function(t){return t(e,n)})})]),o=U([]);return Su(e,pi.init,n,o,j.some(function(e,n){var t,o,r,i;(t=e,o=n,r=Xa(t.element(),o.selector),i=B(r,function(t){return a(o,t)}),j.from(i[o.firstTabstop])).each(function(t){n.focusManager.set(e,t)})}))},Ou=Cu(Ir("cyclic",U(!1))),zu=Cu(Ir("cyclic",U(!0))),Mu=function(t){return"input"===wn(t)&&"radio"!==Hn(t,"type")||"textarea"===wn(t)},Tu=function(t,e,n){return Mu(n)&&eu([32])(e.event())?j.none():(Zn(t,n,Ce()),j.some(!0))},Hu=function(t,e){return j.some(!0)},Vu=[Vr("execute",Tu),Vr("useSpace",!1),Vr("useEnter",!0),Vr("useControlEnter",!1),Vr("useDown",!1)],Eu=function(t,e,n){return n.execute(t,e,t.element())},Au=Su(Vu,pi.init,function(t,e,n,o){var r=n.useSpace&&!Mu(t.element())?[32]:[],i=n.useEnter?[13]:[],a=n.useDown?[40]:[],u=r.concat(i).concat(a);return[au(eu(u),Eu)].concat(n.useControlEnter?[au(nu([ru,eu([13])]),Eu)]:[])},function(t,e,n,o){return n.useSpace&&!Mu(t.element())?[au(eu([32]),Hu)]:[]},j.none()),Bu=function(t){var n=zt(j.none());return vi({readState:function(){return n.get().map(function(t){return{numRows:t.numRows(),numColumns:t.numColumns()}}).getOr({numRows:"?",numColumns:"?"})},setGridSize:function(t,e){n.set(j.some({numRows:U(t),numColumns:U(e)}))},getNumRows:function(){return n.get().map(function(t){return t.numRows()})},getNumColumns:function(){return n.get().map(function(t){return t.numColumns()})}})},Du=Object.freeze({flatgrid:Bu,init:function(t){return t.state(t)}}),_u=function(e,n){return function(t){return"rtl"===Ru(t)?n:e}},Ru=function(t){return"rtl"===_a(t,"direction")?"rtl":"ltr"},Iu=function(i){return function(t,e,n,o){var r=i(t.element());return ju(r,t,e,n,o)}},Fu=function(t,e){var n=_u(t,e);return Iu(n)},Lu=function(t,e){var n=_u(e,t);return Iu(n)},Pu=function(r){return function(t,e,n,o){return ju(r,t,e,n,o)}},ju=function(e,n,t,o,r){return o.focusManager.get(n).bind(function(t){return e(n.element(),t,o,r)}).map(function(t){return o.focusManager.set(n,t),!0})},Nu=Pu,Uu=Pu,Wu=Pu,Gu=function(t){var e,n=t.dom();return!((e=n).offsetWidth<=0&&e.offsetHeight<=0)},Xu=Ge(["index","candidates"],[]),$u=function(t,e,n){return qu(t,e,n,Gu)},qu=function(t,e,n,o){var r,i=f(rn,e),a=Xa(t,n),u=B(a,Gu);return I(r=u,i).map(function(t){return Xu({index:t,candidates:r})})},Yu=function(t,e){return I(t,function(t){return rn(e,t)})},Ku=function(n,t,o,e){return e(Math.floor(t/o),t%o).bind(function(t){var e=t.row()*o+t.column();return 0<=e&&e<n.length?j.some(n[e]):j.none()})},Ju=function(r,t,i,a,u){return Ku(r,t,a,function(t,e){var n=t===i-1?r.length-t*a:a,o=uu(e,u,0,n-1);return j.some({row:U(t),column:U(o)})})},Qu=function(i,t,a,u,c){return Ku(i,t,u,function(t,e){var n=uu(t,c,0,a-1),o=n===a-1?i.length-n*u:u,r=cu(e,0,o-1);return j.some({row:U(n),column:U(r)})})},Zu=[br("selector"),Vr("execute",Tu),Zi("onEscape"),Vr("captureTab",!1),ra()],tc=function(r){return function(t,e,n,o){return $u(t,e,n.selector).bind(function(t){return r(t.candidates(),t.index(),o.getNumRows().getOr(n.initSize.numRows),o.getNumColumns().getOr(n.initSize.numColumns))})}},ec=function(t,e,n,o){return n.captureTab?j.some(!0):j.none()},nc=tc(function(t,e,n,o){return Ju(t,e,n,o,-1)}),oc=tc(function(t,e,n,o){return Ju(t,e,n,o,1)}),rc=tc(function(t,e,n,o){return Qu(t,e,n,o,-1)}),ic=tc(function(t,e,n,o){return Qu(t,e,n,o,1)}),ac=U([au(eu([37]),Fu(nc,oc)),au(eu([39]),Lu(nc,oc)),au(eu([38]),Nu(rc)),au(eu([40]),Uu(ic)),au(nu([ou,eu([9])]),ec),au(nu([iu,eu([9])]),ec),au(eu([27]),function(t,e,n,o){return n.onEscape(t,e)}),au(eu([32].concat([13])),function(e,n,o,t){return(r=e,i=o,i.focusManager.get(r).bind(function(t){return Ka(t,i.selector)})).bind(function(t){return o.execute(e,n,t)});var r,i})]),uc=U([au(eu([32]),Hu)]),cc=Su(Zu,Bu,ac,uc,j.some(function(e,n,t){Ya(e.element(),n.selector).each(function(t){n.focusManager.set(e,t)})})),sc=function(t,e,n,i){var a=function(t,e,n){var o,r=uu(e,i,0,n.length-1);return r===t?j.none():(o=n[r],"button"===wn(o)&&"disabled"===Hn(o,"disabled")?a(t,r,n):j.from(n[r]))};return $u(t,n,e).bind(function(t){var e=t.index(),n=t.candidates();return a(e,e,n)})},lc=[br("selector"),Vr("getInitial",j.none),Vr("execute",Tu),Zi("onEscape"),Vr("executeOnMove",!1),Vr("allowVertical",!0)],fc=function(e,n,o){return(t=e,r=o,r.focusManager.get(t).bind(function(t){return Ka(t,r.selector)})).bind(function(t){return o.execute(e,n,t)});var t,r},dc=function(t,e,n){return sc(t,n.selector,e,-1)},mc=function(t,e,n){return sc(t,n.selector,e,1)},hc=function(o){return function(t,e,n){return o(t,e,n).bind(function(){return n.executeOnMove?fc(t,e,n):j.some(!0)})}},gc=function(t,e,n,o){return n.onEscape(t,e)},pc=U([au(eu([32]),Hu)]),vc=Su(lc,pi.init,function(t,e,n,o){var r=[37].concat(n.allowVertical?[38]:[]),i=[39].concat(n.allowVertical?[40]:[]);return[au(eu(r),hc(Fu(dc,mc))),au(eu(i),hc(Lu(dc,mc))),au(eu([13]),fc),au(eu([32]),fc),au(eu([27]),gc)]},pc,j.some(function(e,n){n.getInitial(e).orThunk(function(){return Ya(e.element(),n.selector)}).each(function(t){n.focusManager.set(e,t)})})),bc=Ge(["rowIndex","columnIndex","cell"],[]),yc=function(t,e,n){return j.from(t[e]).bind(function(t){return j.from(t[n]).map(function(t){return bc({rowIndex:e,columnIndex:n,cell:t})})})},xc=function(t,e,n,o){var r=t[e].length,i=uu(n,o,0,r-1);return yc(t,e,i)},wc=function(t,e,n,o){var r=uu(n,o,0,t.length-1),i=t[r].length,a=cu(e,0,i-1);return yc(t,r,a)},kc=function(t,e,n,o){var r=t[e].length,i=cu(n+o,0,r-1);return yc(t,e,i)},Sc=function(t,e,n,o){var r=cu(n+o,0,t.length-1),i=t[r].length,a=cu(e,0,i-1);return yc(t,r,a)},Cc=[kr("selectors",[br("row"),br("cell")]),Vr("cycles",!0),Vr("previousSelector",j.none),Vr("execute",Tu)],Oc=function(t,e){return function(n,o,i){var a=i.cycles?t:e;return Ka(o,i.selectors.row).bind(function(t){var e=Xa(t,i.selectors.cell);return Yu(e,o).bind(function(o){var r=Xa(n,i.selectors.row);return Yu(r,t).bind(function(t){var e,n=(e=i,E(r,function(t){return Xa(t,e.selectors.cell)}));return a(n,t,o).map(function(t){return t.cell()})})})})}},zc=Oc(function(t,e,n){return xc(t,e,n,-1)},function(t,e,n){return kc(t,e,n,-1)}),Mc=Oc(function(t,e,n){return xc(t,e,n,1)},function(t,e,n){return kc(t,e,n,1)}),Tc=Oc(function(t,e,n){return wc(t,n,e,-1)},function(t,e,n){return Sc(t,n,e,-1)}),Hc=Oc(function(t,e,n){return wc(t,n,e,1)},function(t,e,n){return Sc(t,n,e,1)}),Vc=U([au(eu([37]),Fu(zc,Mc)),au(eu([39]),Lu(zc,Mc)),au(eu([38]),Nu(Tc)),au(eu([40]),Uu(Hc)),au(eu([32].concat([13])),function(e,n,o){return Pi(e.element()).bind(function(t){return o.execute(e,n,t)})})]),Ec=U([au(eu([32]),Hu)]),Ac=Su(Cc,pi.init,Vc,Ec,j.some(function(e,n){n.previousSelector(e).orThunk(function(){var t=n.selectors;return Ya(e.element(),t.cell)}).each(function(t){n.focusManager.set(e,t)})})),Bc=[br("selector"),Vr("execute",Tu),Vr("moveOnTab",!1)],Dc=function(e,n,o){return o.focusManager.get(e).bind(function(t){return o.execute(e,n,t)})},_c=function(t,e,n){return sc(t,n.selector,e,-1)},Rc=function(t,e,n){return sc(t,n.selector,e,1)},Ic=U([au(eu([38]),Wu(_c)),au(eu([40]),Wu(Rc)),au(nu([ou,eu([9])]),function(t,e,n){return n.moveOnTab?Wu(_c)(t,e,n):j.none()}),au(nu([iu,eu([9])]),function(t,e,n){return n.moveOnTab?Wu(Rc)(t,e,n):j.none()}),au(eu([13]),Dc),au(eu([32]),Dc)]),Fc=U([au(eu([32]),Hu)]),Lc=Su(Bc,pi.init,Ic,Fc,j.some(function(e,n){Ya(e.element(),n.selector).each(function(t){n.focusManager.set(e,t)})})),Pc=[Zi("onSpace"),Zi("onEnter"),Zi("onShiftEnter"),Zi("onLeft"),Zi("onRight"),Zi("onTab"),Zi("onShiftTab"),Zi("onUp"),Zi("onDown"),Zi("onEscape"),Vr("stopSpaceKeyup",!1),Or("focusIn")],jc=Su(Pc,pi.init,function(t,e,n){return[au(eu([32]),n.onSpace),au(nu([iu,eu([13])]),n.onEnter),au(nu([ou,eu([13])]),n.onShiftEnter),au(nu([ou,eu([9])]),n.onShiftTab),au(nu([iu,eu([9])]),n.onTab),au(eu([38]),n.onUp),au(eu([40]),n.onDown),au(eu([37]),n.onLeft),au(eu([39]),n.onRight),au(eu([32]),n.onSpace),au(eu([27]),n.onEscape)]},function(t,e,n){return n.stopSpaceKeyup?[au(eu([32]),Hu)]:[]},j.some(function(e,n){return n.focusIn.bind(function(t){return t(e,n)})})),Nc=Ou.schema(),Uc=zu.schema(),Wc=vc.schema(),Gc=cc.schema(),Xc=Ac.schema(),$c=Au.schema(),qc=Lc.schema(),Yc=jc.schema(),Kc=ki({branchKey:"mode",branches:Object.freeze({acyclic:Nc,cyclic:Uc,flow:Wc,flatgrid:Gc,matrix:Xc,execution:$c,menu:qc,special:Yc}),name:"keying",active:{events:function(t,e){return t.handler.toEvents(t,e)}},apis:{focusIn:function(t){t.getSystem().triggerFocus(t.element(),t.element())},setGridSize:function(t,e,n,o,r){Ot(n,"setGridSize")?n.setGridSize(o,r):console.error("Layout does not support setGridSize")}},state:Du}),Jc=undefined&&undefined.__assign||function(){return(Jc=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},Qc=function(o,t){return Rr(o,{},E(t,function(t){return e=t.name(),n="Cannot configure "+t.name()+" for "+o,er(e,e,yo(),$o(function(t){return Ho("The field: "+e+" is forbidden. "+n)}));var e,n}).concat([Ir("dump",b)]))},Zc=function(t){return t.dump},ts=function(t,e){return Jc({},t.dump,bi(e))},es=Qc,ns=ts,os=undefined&&undefined.__assign||function(){return(os=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},rs="placeholder",is=mt([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),as=function(t,e,n,o){return n.uiType===rs?(i=n,a=o,(r=t).exists(function(t){return t!==i.owner})?is.single(!0,U(i)):wt(a,i.name).fold(function(){throw new Error("Unknown placeholder component: "+i.name+"\nKnown: ["+Z(a)+"]\nNamespace: "+r.getOr("none")+"\nSpec: "+Po(i,null,2))},function(t){return t.replace()})):is.single(!1,U(n));var r,i,a},us=function(i,a,u,c){return as(i,0,u,c).fold(function(t,e){var n=e(a,u.config,u.validated),o=wt(n,"components").getOr([]),r=W(o,function(t){return us(i,a,t,c)});return[os({},n,{components:r})]},function(t,e){var n=e(a,u.config,u.validated);return u.validated.preprocess.getOr(b)(n)})},cs=function(e,n,t,o){var r,i,a,u=nt(o,function(t,e){return o=t,r=!1,{name:U(n=e),required:function(){return o.fold(function(t,e){return t},function(t,e){return t})},used:function(){return r},replace:function(){if(!0===r)throw new Error("Trying to use the same placeholder more than once: "+n);return r=!0,o}};var n,o,r}),c=(r=e,i=n,a=u,W(t,function(t){return us(r,i,t,a)}));return et(u,function(t){if(!1===t.used()&&t.required())throw new Error("Placeholder: "+t.name()+" was not found in components list\nNamespace: "+e.getOr("none")+"\nComponents: "+Po(n.components,null,2))}),c},ss=is.single,ls=is.multiple,fs=U(rs),ds=mt([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),ms=Vr("factory",{sketch:b}),hs=Vr("schema",[]),gs=br("name"),ps=er("pname","pname",xo(function(t){return"<alloy."+$n(t.name)+">"}),dr()),vs=Ir("schema",function(){return[Or("preprocess")]}),bs=Vr("defaults",U({})),ys=Vr("overrides",U({})),xs=Yo([ms,hs,gs,ps,bs,ys]),ws=Yo([ms,hs,gs,bs,ys]),ks=Yo([ms,hs,gs,ps,bs,ys]),Ss=Yo([ms,vs,gs,br("unit"),ps,bs,ys]),Cs=function(t){return t.fold(j.some,j.none,j.some,j.some)},Os=function(t){var e=function(t){return t.name};return t.fold(e,e,e,e)},zs=function(n,o){return function(t){var e=sr("Converting part type",o,t);return n(e)}},Ms=zs(ds.required,xs),Ts=zs(ds.external,ws),Hs=zs(ds.optional,ks),Vs=zs(ds.group,Ss),Es=U("entirety"),As=Object.freeze({required:Ms,external:Ts,optional:Hs,group:Vs,asNamedPart:Cs,name:Os,asCommon:function(t){return t.fold(b,b,b,b)},original:Es}),Bs=function(t,e,n,o){return pt(e.defaults(t,n,o),n,{uid:t.partUids[e.name]},e.overrides(t,n,o))},Ds=undefined&&undefined.__assign||function(){return(Ds=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},_s=function(r,t){var e={};return A(t,function(t){Cs(t).each(function(n){var o=Rs(r,n.pname);e[n.name]=function(t){var e=sr("Part: "+n.name+" in "+r,Yo(n.schema),t);return Ds({},o,{config:t,validated:e})}})}),e},Rs=function(t,e){return{uiType:fs(),owner:t,name:e}},Is=function(t,e,n){return{uiType:fs(),owner:t,name:e,config:n,validated:{}}},Fs=function(t){return W(t,function(t){return t.fold(j.none,j.some,j.none,j.none).map(function(t){return kr(t.name,t.schema.concat([oa(Es())]))}).toArray()})},Ls=function(t){return E(t,Os)},Ps=function(t,e,n){return o=e,i={},r={},A(n,function(t){t.fold(function(o){i[o.pname]=ss(!0,function(t,e,n){return o.factory.sketch(Bs(t,o,e,n))})},function(t){var e=o.parts[t.name];r[t.name]=U(t.factory.sketch(Bs(o,t,e[Es()]),e))},function(o){i[o.pname]=ss(!1,function(t,e,n){return o.factory.sketch(Bs(t,o,e,n))})},function(r){i[r.pname]=ls(!0,function(e,t,n){var o=e[r.name];return E(o,function(t){return r.factory.sketch(pt(r.defaults(e,t,n),t,r.overrides(e,t)))})})})}),{internals:U(i),externals:U(r)};var o,i,r},js=function(t,e,n){return cs(j.some(t),e,e.components,n)},Ns=function(t,e,n){var o=e.partUids[n];return t.getSystem().getByUid(o).toOption()},Us=function(t,e,n){return Ns(t,e,n).getOrDie("Could not find part: "+n)},Ws=function(t,e,n){var o={},r=e.partUids,i=t.getSystem();return A(n,function(t){o[t]=i.getByUid(r[t])}),nt(o,U)},Gs=function(t,e){var n=t.getSystem();return nt(e.partUids,function(t,e){return U(n.getByUid(t))})},Xs=function(t){return Z(t.partUids)},$s=function(t,e,n){var o={},r=e.partUids,i=t.getSystem();return A(n,function(t){o[t]=i.getByUid(r[t]).getOrDie()}),nt(o,U)},qs=function(e,t){var n=Ls(t);return St(E(n,function(t){return{key:t,value:e+"-"+t}}))},Ys=function(e){return er("partUids","partUids",wo(function(t){return qs(t.uid,e)}),dr())},Ks=Object.freeze({generate:_s,generateOne:Is,schemas:Fs,names:Ls,substitutes:Ps,components:js,defaultUids:qs,defaultUidsSchema:Ys,getAllParts:Gs,getAllPartNames:Xs,getPart:Ns,getPartOrDie:Us,getParts:Ws,getPartsOrDie:$s}),Js=$n("alloy-premade"),Qs=function(t){return kt(Js,t)},Zs=function(o){return t=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return o.apply(undefined,[t.getApis()].concat([t].concat(e)))},e=o.toString(),n=e.indexOf(")")+1,r=e.indexOf("("),i=e.substring(r+1,n-1).split(/,\s*/),t.toFunctionAnnotation=function(){return{name:"OVERRIDE",parameters:ui(i.slice(1))}},t;var t,e,n,r,i},tl=U("alloy-id-"),el=U("data-alloy-id"),nl=tl(),ol=el(),rl=function(t,e){Object.defineProperty(t.dom(),ol,{value:e,writable:!0})},il=function(t){var e=Sn(t)?t.dom()[ol]:null;return j.from(e)},al=function(t){return $n(t)},ul=function(t,e,n,o,r){var i,a,u=(a=r,(0<(i=o).length?[kr("parts",i)]:[]).concat([br("uid"),Vr("dom",{}),Vr("components",[]),oa("originalSpec"),Vr("debug.sketcher",{})]).concat(a));return sr(t+" [SpecSchema]",qo(u.concat(e)),n)},cl=undefined&&undefined.__assign||function(){return(cl=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},sl=function(t,e,n,o,r){var i=ll(r),a=Fs(n),u=Ys(n),c=ul(t,e,i,a,[u]),s=Ps(0,c,n);return o(c,js(t,c,s.internals()),i,s.externals())},ll=function(t){return t.hasOwnProperty("uid")?t:cl({},t,{uid:al("uid")})},fl=undefined&&undefined.__assign||function(){return(fl=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},dl=qo([br("name"),br("factory"),br("configFields"),Vr("apis",{}),Vr("extraApis",{})]),ml=qo([br("name"),br("factory"),br("configFields"),br("partFields"),Vr("apis",{}),Vr("extraApis",{})]),hl=function(t){var i=sr("Sketcher for "+t.name,dl,t),e=nt(i.apis,Zs),n=nt(i.extraApis,function(t,e){return ci(t,e)});return fl({name:U(i.name),partFields:U([]),configFields:U(i.configFields),sketch:function(t){return e=i.name,n=i.configFields,o=i.factory,r=ll(t),o(ul(e,n,r,[],[]),r);var e,n,o,r}},e,n)},gl=function(t){var e=sr("Sketcher for "+t.name,ml,t),n=_s(e.name,e.partFields),o=nt(e.apis,Zs),r=nt(e.extraApis,function(t,e){return ci(t,e)});return fl({name:U(e.name),partFields:U(e.partFields),configFields:U(e.configFields),sketch:function(t){return sl(e.name,e.configFields,e.partFields,e.factory,t)},parts:U(n)},o,r)},pl=undefined&&undefined.__assign||function(){return(pl=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},vl=hl({name:"Button",factory:function(t){var e=Ca(t.action),n=t.dom.tag,o=function(e){return wt(t.dom,"attributes").bind(function(t){return wt(t,e)})};return{uid:t.uid,dom:t.dom,components:t.components,events:e,behaviours:ns(t.buttonBehaviours,[Ha.config({}),Kc.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:function(){if("button"!==n)return{role:o("role").getOr("button")};var t=o("type").getOr("button"),e=o("role").map(function(t){return{role:t}}).getOr({});return pl({type:t},e)}()},eventOrder:t.eventOrder}},configFields:[Vr("uid",undefined),br("dom"),Vr("components",[]),es("buttonBehaviours",[Ha,Kc]),Or("action"),Or("role"),Vr("eventOrder",{})]}),bl=xi({fields:[],name:"unselecting",active:Object.freeze({events:function(t){return Xr([$r(Gt(),U(!0))])},exhibit:function(t,e){return li({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})}})}),yl=undefined&&undefined.__assign||function(){return(yl=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},xl=function(t){var e,n,o,r=je.fromHtml(t),i=ln(r),a=(n=(e=r).dom().attributes!==undefined?e.dom().attributes:[],_(n,function(t,e){var n;return"class"===e.name?t:yl({},t,((n={})[e.name]=e.value,n))},{})),u=(o=r,Array.prototype.slice.call(o.dom().classList,0)),c=0===i.length?{}:{innerHtml:yn(r)};return yl({tag:wn(r),classes:u,attributes:a},c)},wl=function(t){var e,r,n=(e=t,r={prefix:Sa.prefix()},e.replace(/\$\{([^{}]*)\}/g,function(t,e){var n,o=r[e];return"string"==(n=typeof o)||"number"===n?o.toString():t}));return xl(n)},kl=function(t){return{dom:wl(t)}},Sl=function(t){return bi([ba.config({toggleClass:Sa.resolve("toolbar-button-selected"),toggleOnExecute:!1,aria:{mode:"pressed"}}),ya(t,function(t,e){(e?ba.on:ba.off)(t)})])},Cl=function(t,e,n){return vl.sketch({dom:wl('<span class="${prefix}-toolbar-button ${prefix}-toolbar-group-item ${prefix}-icon-'+t+' ${prefix}-icon"></span>'),action:e,buttonBehaviours:pt(bi([bl.config({})]),n)})},Ol={forToolbar:Cl,forToolbarCommand:function(t,e){return Cl(e,function(){t.execCommand(e)},{})},forToolbarStateAction:function(t,e,n,o){var r=Sl(n);return Cl(e,o,r)},forToolbarStateCommand:function(t,e){var n=Sl(e);return Cl(e,function(){t.execCommand(e)},n)}},zl=ye.detect().deviceType.isTouch(),Ml=Hs({schema:[br("dom")],name:"label"}),Tl=function(t){return Hs({name:t+"-edge",overrides:function(o){return o.model.manager.edgeActions[t].fold(function(){return{}},function(n){var t=Xr([Kr(Ht(),n,[o])]),e=Xr([Kr(At(),n,[o]),Kr(Bt(),function(t,e){e.mouseIsDown.get()&&n(t,e)},[o])]);return{events:zl?t:e}})}})},Hl=Tl("top-left"),Vl=Tl("top"),El=Tl("top-right"),Al=Tl("right"),Bl=Tl("bottom-right"),Dl=Tl("bottom"),_l=Tl("bottom-left"),Rl=[Ml,Tl("left"),Al,Vl,Dl,Hl,El,_l,Bl,Ms({name:"thumb",defaults:U({dom:{styles:{position:"absolute"}}}),overrides:function(t){return{events:Xr([Qr(Ht(),t,"spectrum"),Qr(Vt(),t,"spectrum"),Qr(Et(),t,"spectrum"),Qr(At(),t,"spectrum"),Qr(Bt(),t,"spectrum"),Qr(_t(),t,"spectrum")])}}}),Ms({schema:[Ir("mouseIsDown",function(){return zt(!1)})],name:"spectrum",overrides:function(n){var o=n.model.manager,r=function(e,t){return o.getValueFromEvent(t).map(function(t){return o.setValueFrom(e,n,t)})},t=Xr([Yr(Ht(),r),Yr(Vt(),r)]),e=Xr([Yr(At(),r),Yr(Bt(),function(t,e){n.mouseIsDown.get()&&r(t,e)})]);return{behaviours:bi(zl?[]:[Kc.config({mode:"special",onLeft:function(t){return o.onLeft(t,n)},onRight:function(t){return o.onRight(t,n)},onUp:function(t){return o.onUp(t,n)},onDown:function(t){return o.onDown(t,n)}}),Ha.config({})]),events:zl?t:e}}})],Il=function(t,e,n){e.store.manager.onLoad(t,e,n)},Fl=function(t,e,n){e.store.manager.onUnload(t,e,n)},Ll=Object.freeze({onLoad:Il,onUnload:Fl,setValue:function(t,e,n,o){e.store.manager.setValue(t,e,n,o)},getValue:function(t,e,n){return e.store.manager.getValue(t,e,n)},getState:function(t,e,n){return n}}),Pl=Object.freeze({events:function(n,o){var t=n.resetOnDom?[oi(function(t,e){Il(t,n,o)}),ri(function(t,e){Fl(t,n,o)})]:[di(n,o,Il)];return Xr(t)}}),jl=undefined&&undefined.__assign||function(){return(jl=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},Nl=function(){var t=zt(null);return vi({set:t.set,get:t.get,isNotSet:function(){return null===t.get()},clear:function(){t.set(null)},readState:function(){return{mode:"memory",value:t.get()}}})},Ul=function(){var i=zt({}),a=zt({});return vi({readState:function(){return{mode:"dataset",dataByValue:i.get(),dataByText:a.get()}},lookup:function(t){return wt(i.get(),t).orThunk(function(){return wt(a.get(),t)})},update:function(t){var e=i.get(),n=a.get(),o={},r={};A(t,function(e){o[e.value]=e,wt(e,"meta").each(function(t){wt(t,"text").each(function(t){r[t]=e})})}),i.set(jl({},e,o)),a.set(jl({},n,r))},clear:function(){i.set({}),a.set({})}})},Wl=Object.freeze({memory:Nl,dataset:Ul,manual:function(){return vi({readState:function(){}})},init:function(t){return t.store.manager.state(t)}}),Gl=function(t,e,n,o){var r=e.store;n.update([o]),r.setValue(t,o),e.onSetValue(t,o)},Xl=[Or("initialValue"),br("getFallbackEntry"),br("getDataKey"),br("setValue"),na("manager",{setValue:Gl,getValue:function(t,e,n){var o=e.store,r=o.getDataKey(t);return n.lookup(r).fold(function(){return o.getFallbackEntry(r)},function(t){return t})},onLoad:function(e,n,o){n.store.initialValue.each(function(t){Gl(e,n,o,t)})},onUnload:function(t,e,n){n.clear()},state:Ul})],$l=[br("getValue"),Vr("setValue",P),Or("initialValue"),na("manager",{setValue:function(t,e,n,o){e.store.setValue(t,o),e.onSetValue(t,o)},getValue:function(t,e,n){return e.store.getValue(t)},onLoad:function(e,n,t){n.store.initialValue.each(function(t){n.store.setValue(e,t)})},onUnload:P,state:pi.init})],ql=[Or("initialValue"),na("manager",{setValue:function(t,e,n,o){n.set(o),e.onSetValue(t,o)},getValue:function(t,e,n){return n.get()},onLoad:function(t,e,n){e.store.initialValue.each(function(t){n.isNotSet()&&n.set(t)})},onUnload:function(t,e,n){n.clear()},state:Nl})],Yl=[Er("store",{mode:"memory"},fr("mode",{memory:ql,manual:$l,dataset:Xl})),Qi("onSetValue"),Vr("resetOnDom",!1)],Kl=xi({fields:Yl,name:"representing",active:Pl,apis:Ll,extra:{setValueFrom:function(t,e){var n=Kl.getValue(e);Kl.setValue(t,n)}},state:Wl}),Jl=function(n,o){return{left:U(n),top:U(o),translate:function(t,e){return Jl(n+t,o+e)}}},Ql=Jl,Zl=ye.detect().deviceType.isTouch(),tf=U("slider.change.value"),ef=function(t){var e=t.event().raw();if(Zl){var n=e;return n.touches!==undefined&&1===n.touches.length?j.some(n.touches[0]).map(function(t){return Ql(t.clientX,t.clientY)}):j.none()}var o=e;return o.clientX!==undefined?j.some(o).map(function(t){return Ql(t.clientX,t.clientY)}):j.none()},nf=function(t,e,n,o){return t<e?t:n<t?n:t===e?e-1:Math.max(e,t-o)},of=function(t,e,n,o){return n<t?t:t<e?e:t===n?n+1:Math.min(n,t+o)},rf=function(t,e,n){return Math.max(e,Math.min(n,t))},af=function(t){var e=t.min,n=t.max,o=t.range,r=t.value,i=t.step,a=t.snap,u=t.snapStart,c=t.rounded,s=t.hasMinEdge,l=t.hasMaxEdge,f=t.minBound,d=t.maxBound,m=t.screenRange,h=s?e-1:e,g=l?n+1:n;if(r<f)return h;if(d<r)return g;var p,v,b,y,x,w,k,S=(x=r,w=f,k=d,Math.min(k,Math.max(x,w))-w),C=rf(S/m*o+e,h,g);return a&&e<=C&&C<=n?(p=C,v=e,b=n,y=i,u.fold(function(){var t=p-v,e=Math.round(t/y)*y;return rf(v+e,v-1,b+1)},function(t){var e=(p-t)%y,n=Math.round(e/y),o=Math.floor((p-t)/y),r=Math.floor((b-t)/y),i=t+Math.min(r,o+n)*y;return Math.max(t,i)})):c?Math.round(C):C},uf=function(t){var e=t.min,n=t.max,o=t.range,r=t.value,i=t.hasMinEdge,a=t.hasMaxEdge,u=t.maxBound,c=t.maxOffset,s=t.centerMinEdge,l=t.centerMaxEdge;return r<e?i?0:s:n<r?a?u:l:(r-e)/o*c},cf=Pa("width",function(t){return t.dom().offsetWidth}),sf=function(t,e){cf.set(t,e)},lf=function(t){return cf.get(t)},ff=function(t){return cf.getOuter(t)},df=function(t){return t.model.minX},mf=function(t){return t.model.minY},hf=function(t){return t.model.minX-1},gf=function(t){return t.model.minY-1},pf=function(t){return t.model.maxX},vf=function(t){return t.model.maxY},bf=function(t){return t.model.maxX+1},yf=function(t){return t.model.maxY+1},xf=function(t,e,n){return e(t)-n(t)},wf=function(t){return xf(t,pf,df)},kf=function(t){return xf(t,vf,mf)},Sf=function(t){return wf(t)/2},Cf=function(t){return kf(t)/2},Of=function(t){return t.stepSize},zf=function(t){return t.snapToGrid},Mf=function(t){return t.snapStart},Tf=function(t){return t.rounded},Hf=function(t,e){return t[e+"-edge"]!==undefined},Vf=function(t){return Hf(t,"left")},Ef=function(t){return Hf(t,"right")},Af=function(t){return Hf(t,"top")},Bf=function(t){return Hf(t,"bottom")},Df=function(t){return t.model.value.get()},_f=function(t){return{x:U(t)}},Rf=function(t){return{y:U(t)}},If=function(t,e){return{x:U(t),y:U(e)}},Ff=function(t,e){Jn(t,tf(),{value:e})},Lf="left",Pf=function(t){return t.element().dom().getBoundingClientRect()},jf=function(t,e){return t[e]},Nf=function(t){var e=Pf(t);return jf(e,Lf)},Uf=function(t){var e=Pf(t);return jf(e,"right")},Wf=function(t){var e=Pf(t);return jf(e,"top")},Gf=function(t){var e=Pf(t);return jf(e,"bottom")},Xf=function(t){var e=Pf(t);return jf(e,"width")},$f=function(t){var e=Pf(t);return jf(e,"height")},qf=function(t,e,n){return(t+e)/2-n},Yf=function(t,e){var n=Pf(t),o=Pf(e),r=jf(n,Lf),i=jf(n,"right"),a=jf(o,Lf);return qf(r,i,a)},Kf=function(t,e){var n=Pf(t),o=Pf(e),r=jf(n,"top"),i=jf(n,"bottom"),a=jf(o,"top");return qf(r,i,a)},Jf=function(t,e){Jn(t,tf(),{value:e})},Qf=function(t){return{x:U(t)}},Zf=function(t,e,n){var o={min:df(e),max:pf(e),range:wf(e),value:n,step:Of(e),snap:zf(e),snapStart:Mf(e),rounded:Tf(e),hasMinEdge:Vf(e),hasMaxEdge:Ef(e),minBound:Nf(t),maxBound:Uf(t),screenRange:Xf(t)};return af(o)},td=function(a){return function(t,e){return(n=a,o=t,r=e,i=(0<n?of:nf)(Df(r).x(),df(r),pf(r),Of(r)),Jf(o,Qf(i)),j.some(i)).map(function(){return!0});var n,o,r,i}},ed=function(t,e,n,o,r,i){var a,u,c,s,l,f,d,m,h,g=(u=i,c=n,s=o,l=r,f=Xf(a=e),d=s.bind(function(t){return j.some(Yf(t,a))}).getOr(0),m=l.bind(function(t){return j.some(Yf(t,a))}).getOr(f),h={min:df(u),max:pf(u),range:wf(u),value:c,hasMinEdge:Vf(u),hasMaxEdge:Ef(u),minBound:Nf(a),minOffset:0,maxBound:Uf(a),maxOffset:f,centerMinEdge:d,centerMaxEdge:m},uf(h));return Nf(e)-Nf(t)+g},nd=td(-1),od=td(1),rd=j.none,id=j.none,ad={"top-left":j.none(),top:j.none(),"top-right":j.none(),right:j.some(function(t,e){Ff(t,_f(bf(e)))}),"bottom-right":j.none(),bottom:j.none(),"bottom-left":j.none(),left:j.some(function(t,e){Ff(t,_f(hf(e)))})},ud=Object.freeze({setValueFrom:function(t,e,n){var o=Zf(t,e,n),r=Qf(o);return Jf(t,r),o},setToMin:function(t,e){var n=df(e);Jf(t,Qf(n))},setToMax:function(t,e){var n=pf(e);Jf(t,Qf(n))},findValueOfOffset:Zf,getValueFromEvent:function(t){return ef(t).map(function(t){return t.left()})},findPositionOfValue:ed,setPositionFromValue:function(t,e,n,o){var r=Df(n),i=ed(t,o.getSpectrum(t),r.x(),o.getLeftEdge(t),o.getRightEdge(t),n),a=lf(e.element())/2;Ba(e.element(),"left",i-a+"px")},onLeft:nd,onRight:od,onUp:rd,onDown:id,edgeActions:ad}),cd=function(t,e){Jn(t,tf(),{value:e})},sd=function(t){return{y:U(t)}},ld=function(t,e,n){var o={min:mf(e),max:vf(e),range:kf(e),value:n,step:Of(e),snap:zf(e),snapStart:Mf(e),rounded:Tf(e),hasMinEdge:Af(e),hasMaxEdge:Bf(e),minBound:Wf(t),maxBound:Gf(t),screenRange:$f(t)};return af(o)},fd=function(a){return function(t,e){return(n=a,o=t,r=e,i=(0<n?of:nf)(Df(r).y(),mf(r),vf(r),Of(r)),cd(o,sd(i)),j.some(i)).map(function(){return!0});var n,o,r,i}},dd=function(t,e,n,o,r,i){var a,u,c,s,l,f,d,m,h,g=(u=i,c=n,s=o,l=r,f=$f(a=e),d=s.bind(function(t){return j.some(Kf(t,a))}).getOr(0),m=l.bind(function(t){return j.some(Kf(t,a))}).getOr(f),h={min:mf(u),max:vf(u),range:kf(u),value:c,hasMinEdge:Af(u),hasMaxEdge:Bf(u),minBound:Wf(a),minOffset:0,maxBound:Gf(a),maxOffset:f,centerMinEdge:d,centerMaxEdge:m},uf(h));return Wf(e)-Wf(t)+g},md=j.none,hd=j.none,gd=fd(-1),pd=fd(1),vd={"top-left":j.none(),top:j.some(function(t,e){Ff(t,Rf(gf(e)))}),"top-right":j.none(),right:j.none(),"bottom-right":j.none(),bottom:j.some(function(t,e){Ff(t,Rf(yf(e)))}),"bottom-left":j.none(),left:j.none()},bd=Object.freeze({setValueFrom:function(t,e,n){var o=ld(t,e,n),r=sd(o);return cd(t,r),o},setToMin:function(t,e){var n=mf(e);cd(t,sd(n))},setToMax:function(t,e){var n=vf(e);cd(t,sd(n))},findValueOfOffset:ld,getValueFromEvent:function(t){return ef(t).map(function(t){return t.top()})},findPositionOfValue:dd,setPositionFromValue:function(t,e,n,o){var r=Df(n),i=dd(t,o.getSpectrum(t),r.y(),o.getTopEdge(t),o.getBottomEdge(t),n),a=Na(e.element())/2;Ba(e.element(),"top",i-a+"px")},onLeft:md,onRight:hd,onUp:gd,onDown:pd,edgeActions:vd}),yd=function(t,e){Jn(t,tf(),{value:e})},xd=function(t,e){return{x:U(t),y:U(e)}},wd=function(s,l){return function(t,e){return(n=s,o=l,r=t,i=e,a=0<n?of:nf,u=o?Df(i).x():a(Df(i).x(),df(i),pf(i),Of(i)),c=o?a(Df(i).y(),mf(i),vf(i),Of(i)):Df(i).y(),yd(r,xd(u,c)),j.some(u)).map(function(){return!0});var n,o,r,i,a,u,c}},kd=wd(-1,!1),Sd=wd(1,!1),Cd=wd(-1,!0),Od=wd(1,!0),zd={"top-left":j.some(function(t,e){Ff(t,If(hf(e),gf(e)))}),top:j.some(function(t,e){Ff(t,If(Sf(e),gf(e)))}),"top-right":j.some(function(t,e){Ff(t,If(bf(e),gf(e)))}),right:j.some(function(t,e){Ff(t,If(bf(e),Cf(e)))}),"bottom-right":j.some(function(t,e){Ff(t,If(bf(e),yf(e)))}),bottom:j.some(function(t,e){Ff(t,If(Sf(e),yf(e)))}),"bottom-left":j.some(function(t,e){Ff(t,If(hf(e),yf(e)))}),left:j.some(function(t,e){Ff(t,If(hf(e),Cf(e)))})},Md=Object.freeze({setValueFrom:function(t,e,n){var o=Zf(t,e,n.left()),r=ld(t,e,n.top()),i=xd(o,r);return yd(t,i),i},setToMin:function(t,e){var n=df(e),o=mf(e);yd(t,xd(n,o))},setToMax:function(t,e){var n=pf(e),o=vf(e);yd(t,xd(n,o))},getValueFromEvent:function(t){return ef(t)},setPositionFromValue:function(t,e,n,o){var r=Df(n),i=ed(t,o.getSpectrum(t),r.x(),o.getLeftEdge(t),o.getRightEdge(t),n),a=dd(t,o.getSpectrum(t),r.y(),o.getTopEdge(t),o.getBottomEdge(t),n),u=lf(e.element())/2,c=Na(e.element())/2;Ba(e.element(),"left",i-u+"px"),Ba(e.element(),"top",a-c+"px")},onLeft:kd,onRight:Sd,onUp:Cd,onDown:Od,edgeActions:zd}),Td=ye.detect().deviceType.isTouch(),Hd=[Vr("stepSize",1),Vr("onChange",P),Vr("onChoose",P),Vr("onInit",P),Vr("onDragStart",P),Vr("onDragEnd",P),Vr("snapToGrid",!1),Vr("rounded",!0),Or("snapStart"),yr("model",fr("mode",{x:[Vr("minX",0),Vr("maxX",100),Ir("value",function(t){return zt(t.mode.minX)}),br("getInitialValue"),na("manager",ud)],y:[Vr("minY",0),Vr("maxY",100),Ir("value",function(t){return zt(t.mode.minY)}),br("getInitialValue"),na("manager",bd)],xy:[Vr("minX",0),Vr("maxX",100),Vr("minY",0),Vr("maxY",100),Ir("value",function(t){return zt({x:U(t.mode.minX),y:U(t.mode.minY)})}),br("getInitialValue"),na("manager",Md)]})),Qc("sliderBehaviours",[Kc,Kl])].concat(Td?[]:[Ir("mouseIsDown",function(){return zt(!1)})]),Vd=ye.detect().deviceType.isTouch(),Ed=gl({name:"Slider",configFields:Hd,partFields:Rl,factory:function(i,t,e,n){var a=function(t){return Us(t,i,"thumb")},u=function(t){return Us(t,i,"spectrum")},o=function(t){return Ns(t,i,"left-edge")},r=function(t){return Ns(t,i,"right-edge")},c=function(t){return Ns(t,i,"top-edge")},s=function(t){return Ns(t,i,"bottom-edge")},l=i.model,f=l.manager,d=function(t,e){f.setPositionFromValue(t,e,i,{getLeftEdge:o,getRightEdge:r,getTopEdge:c,getBottomEdge:s,getSpectrum:u})},m=function(t,e){l.value.set(e);var n=a(t);return d(t,n),i.onChange(t,n,e),j.some(!0)},h=[Yr(Ht(),function(t,e){i.onDragStart(t,a(t))}),Yr(Et(),function(t,e){i.onDragEnd(t,a(t))})],g=[Yr(At(),function(t,e){e.stop(),i.onDragStart(t,a(t)),i.mouseIsDown.set(!0)}),Yr(_t(),function(t,e){i.onDragEnd(t,a(t))})],p=Vd?h:g;return{uid:i.uid,dom:i.dom,components:t,behaviours:ts(i.sliderBehaviours,N([Vd?[]:[Kc.config({mode:"special",focusIn:function(t){return Ns(t,i,"spectrum").map(Kc.focusIn).map(U(!0))}})],[Kl.config({store:{mode:"manual",getValue:function(t){return l.value.get()}}}),aa.config({channels:{"mouse.released":{onReceive:function(n,t){var e=i.mouseIsDown.get();i.mouseIsDown.set(!1),e&&Ns(n,i,"thumb").each(function(t){var e=l.value.get();i.onChoose(n,t,e)})}}}})]])),events:Xr([Yr(tf(),function(t,e){m(t,e.event().value())}),oi(function(t,e){var n=l.getInitialValue();l.value.set(n);var o=a(t);d(t,o);var r=u(t);i.onInit(t,o,r,l.value.get())})].concat(p)),apis:{resetToMin:function(t){f.setToMin(t,i)},resetToMax:function(t){f.setToMax(t,i)},changeValue:m,refresh:d},domModification:{styles:{position:"relative"}}}},apis:{resetToMin:function(t,e){t.resetToMin(e)},resetToMax:function(t,e){t.resetToMax(e)},refresh:function(t,e){t.refresh(e)}}}),Ad=function(e,n,o){return Ol.forToolbar(n,function(){var t=o();e.setContextToolbar([{label:n+" group",items:t}])},{})},Bd=function(t){return[(r=t,i=function(t){return t<0?"black":360<t?"white":"hsl("+t+", 100%, 50%)"},Ed.sketch({dom:wl('<div class="${prefix}-slider ${prefix}-hue-slider-container"></div>'),components:[Ed.parts()["left-edge"](kl('<div class="${prefix}-hue-slider-black"></div>')),Ed.parts().spectrum({dom:wl('<div class="${prefix}-slider-gradient-container"></div>'),components:[kl('<div class="${prefix}-slider-gradient"></div>')],behaviours:bi([ba.config({toggleClass:Sa.resolve("thumb-active")})])}),Ed.parts()["right-edge"](kl('<div class="${prefix}-hue-slider-white"></div>')),Ed.parts().thumb({dom:wl('<div class="${prefix}-slider-thumb"></div>'),behaviours:bi([ba.config({toggleClass:Sa.resolve("thumb-active")})])})],onChange:function(t,e,n){var o=i(n.x());Ba(e.element(),"background-color",o),r.onChange(t,e,o)},onDragStart:function(t,e){ba.on(e)},onDragEnd:function(t,e){ba.off(e)},onInit:function(t,e,n,o){var r=i(o.x());Ba(e.element(),"background-color",r)},stepSize:10,model:{mode:"x",minX:0,maxX:360,getInitialValue:function(){return{x:function(){return r.getInitialValue()}}}},sliderBehaviours:bi([xa(Ed.refresh)])}))];var r,i},Dd=function(t,o){var e={onChange:function(t,e,n){o.undoManager.transact(function(){o.formatter.apply("forecolor",{value:n}),o.nodeChanged()})},getInitialValue:function(){return-1}};return Ad(t,"color",function(){return Bd(e)})},_d=qo([br("getInitialValue"),br("onChange"),br("category"),br("sizes")]),Rd=function(t){var i=sr("SizeSlider",_d,t);return Ed.sketch({dom:{tag:"div",classes:[Sa.resolve("slider-"+i.category+"-size-container"),Sa.resolve("slider"),Sa.resolve("slider-size-container")]},onChange:function(t,e,n){var o,r=n.x();0<=(o=r)&&o<i.sizes.length&&i.onChange(r)},onDragStart:function(t,e){ba.on(e)},onDragEnd:function(t,e){ba.off(e)},model:{mode:"x",minX:0,maxX:i.sizes.length-1,getInitialValue:function(){return{x:function(){return i.getInitialValue()}}}},stepSize:1,snapToGrid:!0,sliderBehaviours:bi([xa(Ed.refresh)]),components:[Ed.parts().spectrum({dom:wl('<div class="${prefix}-slider-size-container"></div>'),components:[kl('<div class="${prefix}-slider-size-line"></div>')]}),Ed.parts().thumb({dom:wl('<div class="${prefix}-slider-thumb"></div>'),behaviours:bi([ba.config({toggleClass:Sa.resolve("thumb-active")})])})]})},Id=["9px","10px","11px","12px","14px","16px","18px","20px","24px","32px","36px"],Fd=function(t){var e,n,o=t.selection.getStart(),r=je.fromDom(o),i=je.fromDom(t.getBody()),a=(e=function(t){return rn(i,t)},(Sn(n=r)?j.some(n):cn(n)).map(function(t){return Ur(t,function(t){return Ia(t,"font-size").isSome()},e).bind(function(t){return Ia(t,"font-size")}).getOrThunk(function(){return _a(t,"font-size")})}).getOr(""));return R(Id,function(t){return a===t}).getOr("medium")},Ld={candidates:U(Id),get:function(t){var e,n=Fd(t);return(e=n,I(Id,function(t){return t===e})).getOr(2)},apply:function(o,t){var e;(e=t,j.from(Id[e])).each(function(t){var e,n;n=t,Fd(e=o)!==n&&e.execCommand("fontSize",!1,n)})}},Pd=Ld.candidates(),jd=function(t){return[kl('<span class="${prefix}-toolbar-button ${prefix}-icon-small-font ${prefix}-icon"></span>'),(e=t,Rd({onChange:e.onChange,sizes:Pd,category:"font",getInitialValue:e.getInitialValue})),kl('<span class="${prefix}-toolbar-button ${prefix}-icon-large-font ${prefix}-icon"></span>')];var e},Nd=undefined&&undefined.__assign||function(){return(Nd=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},Ud=function(t){var e=function n(t){return t.uid!==undefined}(t)&&Ot(t,"uid")?t.uid:al("memento");return{get:function(t){return t.getSystem().getByUid(e).getOrDie()},getOpt:function(t){return t.getSystem().getByUid(e).fold(j.none,j.some)},asSpec:function(){return Nd({},t,{uid:e})}}};function Wd(t,e){return Xd(document.createElement("canvas"),t,e)}function Gd(t){return t.getContext("2d")}function Xd(t,e,n){return t.width=e,t.height=n,t}var $d={create:Wd,clone:function WA(t){var e;return Gd(e=Wd(t.width,t.height)).drawImage(t,0,0),e},resize:Xd,get2dContext:Gd,get3dContext:function GA(t){var e=null;try{e=t.getContext("webgl")||t.getContext("experimental-webgl")}catch(n){}return e||(e=null),e}},qd={getWidth:function XA(t){return t.naturalWidth||t.width},getHeight:function $A(t){return t.naturalHeight||t.height}},Yd=window.Promise?window.Promise:function(){var t=function(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],s(t,o(r,this),o(a,this))},e=t.immediateFn||"function"==typeof window.setImmediate&&window.setImmediate||function(t){setTimeout(t,1)};function o(t,e){return function(){t.apply(e,arguments)}}var n=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function i(o){var r=this;null!==this._state?e(function(){var t=r._state?o.onFulfilled:o.onRejected;if(null!==t){var e;try{e=t(r._value)}catch(n){return void o.reject(n)}o.resolve(e)}else(r._state?o.resolve:o.reject)(r._value)}):this._deferreds.push(o)}function r(t){try{if(t===this)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var e=t.then;if("function"==typeof e)return void s(o(e,t),o(r,this),o(a,this))}this._state=!0,this._value=t,u.call(this)}catch(n){a.call(this,n)}}function a(t){this._state=!1,this._value=t,u.call(this)}function u(){for(var t=0,e=this._deferreds.length;t<e;t++)i.call(this,this._deferreds[t]);this._deferreds=null}function c(t,e,n,o){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.resolve=n,this.reject=o}function s(t,e,n){var o=!1;try{t(function(t){o||(o=!0,e(t))},function(t){o||(o=!0,n(t))})}catch(r){if(o)return;o=!0,n(r)}}return t.prototype["catch"]=function(t){return this.then(null,t)},t.prototype.then=function(n,o){var r=this;return new t(function(t,e){i.call(r,new c(n,o,t,e))})},t.all=function(){var c=Array.prototype.slice.call(1===arguments.length&&n(arguments[0])?arguments[0]:arguments);return new t(function(r,i){if(0===c.length)return r([]);var a=c.length;function u(e,t){try{if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if("function"==typeof n)return void n.call(t,function(t){u(e,t)},i)}c[e]=t,0==--a&&r(c)}catch(o){i(o)}}for(var t=0;t<c.length;t++)u(t,c[t])})},t.resolve=function(e){return e&&"object"==typeof e&&e.constructor===t?e:new t(function(t){t(e)})},t.reject=function(n){return new t(function(t,e){e(n)})},t.race=function(r){return new t(function(t,e){for(var n=0,o=r.length;n<o;n++)r[n].then(t,e)})},t}();function Kd(){return new(qe.getOrDie("FileReader"))}var Jd={atob:function(t){return qe.getOrDie("atob")(t)},requestAnimationFrame:function(t){qe.getOrDie("requestAnimationFrame")(t)}};function Qd(u){return new Yd(function(t,e){var n=URL.createObjectURL(u),o=new Image,r=function(){o.removeEventListener("load",i),o.removeEventListener("error",a)};function i(){r(),t(o)}function a(){r(),e("Unable to load data of type "+u.type+": "+n)}o.addEventListener("load",i),o.addEventListener("error",a),o.src=n,o.complete&&i()})}function Zd(o){return new Yd(function(t,n){var e=new XMLHttpRequest;e.open("GET",o,!0),e.responseType="blob",e.onload=function(){200==this.status&&t(this.response)},e.onerror=function(){var t,e=this;n(0===this.status?((t=new Error("No access to download image")).code=18,t.name="SecurityError",t):new Error("Error "+e.status+" downloading image"))},e.send()})}function tm(t){var e=t.split(","),n=/data:([^;]+)/.exec(e[0]);if(!n)return j.none();for(var o,r=n[1],i=e[1],a=Jd.atob(i),u=a.length,c=Math.ceil(u/1024),s=new Array(c),l=0;l<c;++l){for(var f=1024*l,d=Math.min(f+1024,u),m=new Array(d-f),h=f,g=0;h<d;++g,++h)m[g]=a[h].charCodeAt(0);s[l]=(o=m,new(qe.getOrDie("Uint8Array"))(o))}return j.some(function p(t,e){return new(qe.getOrDie("Blob"))(t,e)}(s,{type:r}))}function em(n){return new Yd(function(t,e){tm(n).fold(function(){e("uri is not base64: "+n)},t)})}function nm(n){return new Yd(function(t){var e=Kd();e.onloadend=function(){t(e.result)},e.readAsDataURL(n)})}var om,rm,im,am={blobToImage:Qd,imageToBlob:function qA(t){var e=t.src;return 0===e.indexOf("data:")?em(e):Zd(e)},blobToArrayBuffer:function YA(n){return new Yd(function(t){var e=Kd();e.onloadend=function(){t(e.result)},e.readAsArrayBuffer(n)})},blobToDataUri:nm,blobToBase64:function KA(t){return nm(t).then(function(t){return t.split(",")[1]})},dataUriToBlobSync:tm,canvasToBlob:function JA(t,n,o){return n=n||"image/png",HTMLCanvasElement.prototype.toBlob?new Yd(function(e){t.toBlob(function(t){e(t)},n,o)}):em(t.toDataURL(n,o))},canvasToDataURL:function QA(t,e,n){return e=e||"image/png",t.then(function(t){return t.toDataURL(e,n)})},blobToCanvas:function ZA(t){return Qd(t).then(function(t){var e;return function n(t){URL.revokeObjectURL(t.src)}(t),e=$d.create(qd.getWidth(t),qd.getHeight(t)),$d.get2dContext(e).drawImage(t,0,0),e})},uriToBlob:function tB(t){return 0===t.indexOf("blob:")?Zd(t):0===t.indexOf("data:")?em(t):null}},um=function(t){return am.blobToBase64(t)},cm=function(a){var e=Ud({dom:{tag:"input",attributes:{accept:"image/*",type:"file",title:""},styles:{visibility:"hidden",position:"absolute"}},events:Xr([ti(Ut()),Yr(Nt(),function(t,e){var n,o,r;(n=e,o=n.event(),r=o.raw().target.files||o.raw().dataTransfer.files,j.from(r[0])).each(function(t){var r,i;r=a,um(i=t).then(function(o){r.undoManager.transact(function(){var t=r.editorUpload.blobCache,e=t.create($n("mceu"),i,o);t.add(e);var n=r.dom.createHTML("img",{src:e.blobUri()});r.insertContent(n)})})})})])});return vl.sketch({dom:wl('<span class="${prefix}-toolbar-button ${prefix}-icon-image ${prefix}-icon"></span>'),components:[e.asSpec()],action:function(t){e.get(t).element().dom().click()}})},sm=function(t){return t.dom().textContent},lm=function(t){return 0<t.length},fm=function(t){return t===undefined||null===t?"":t},dm=function(e,n,t){return t.text.toOption().filter(lm).fold(function(){return Hn(t=e,"href")===sm(t)?j.some(n):j.none();var t},j.some)},mm=function(t){var e=je.fromDom(t.selection.getStart());return Ka(e,"a")},hm={getInfo:function(t){return mm(t).fold(function(){return{url:"",text:t.selection.getContent({format:"text"}),title:"",target:"",link:j.none()}},function(t){return n=sm(e=t),o=Hn(e,"href"),r=Hn(e,"title"),i=Hn(e,"target"),{url:fm(o),text:n!==o?fm(n):"",title:fm(r),target:fm(i),link:j.some(e)};var e,n,o,r,i})},applyInfo:function(r,i){i.url.toOption().filter(lm).fold(function(){var e;e=r,i.link.bind(b).each(function(t){e.execCommand("unlink")})},function(e){var t,n,o=(t=i,(n={}).href=e,t.title.toOption().filter(lm).each(function(t){n.title=t}),t.target.toOption().filter(lm).each(function(t){n.target=t}),n);i.link.bind(b).fold(function(){var t=i.text.toOption().filter(lm).getOr(e);r.insertContent(r.dom.createHTML("a",o,r.dom.encode(t)))},function(n){var t=dm(n,e,i);Tn(n,o),t.each(function(t){var e;e=t,n.dom().textContent=e})})})},query:mm},gm=ye.detect(),pm=function(t,e){var n=e.selection.getRng();t(),e.selection.setRng(n)},vm=function(t,e){(gm.os.isAndroid()?pm:u)(e,t)},bm=function(t,e){var n,o;return{key:t,value:{config:{},me:(n=t,o=Xr(e),xi({fields:[br("enabled")],name:n,active:{events:U(o)}})),configAsRaw:U({}),initialConfig:{},state:pi}}},ym=Object.freeze({getCurrent:function(t,e,n){return e.find(t)}}),xm=[br("find")],wm=xi({fields:xm,name:"composing",apis:ym}),km=undefined&&undefined.__assign||function(){return(km=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},Sm=undefined&&undefined.__rest||function(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&(n[o[r]]=t[o[r]])}return n},Cm=hl({name:"Container",factory:function(t){var e=t.dom,n=e.attributes,o=Sm(e,["attributes"]);return{uid:t.uid,dom:km({tag:"div",attributes:km({role:"presentation"},n)},o),components:t.components,behaviours:Zc(t.containerBehaviours),events:t.events,domModification:t.domModification,eventOrder:t.eventOrder}},configFields:[Vr("components",[]),Qc("containerBehaviours",[]),Vr("events",{}),Vr("domModification",{}),Vr("eventOrder",{})]}),Om=hl({name:"DataField",factory:function(n){return{uid:n.uid,dom:n.dom,behaviours:ns(n.dataBehaviours,[Kl.config({store:{mode:"memory",initialValue:n.getInitialValue()}}),wm.config({find:j.some})]),events:Xr([oi(function(t,e){Kl.setValue(t,n.getInitialValue())})])}},configFields:[br("uid"),br("dom"),br("getInitialValue"),es("dataBehaviours",[Kl,wm])]}),zm=function(t){return t.dom().value},Mm=function(t,e){if(e===undefined)throw new Error("Value.set was undefined");t.dom().value=e},Tm=undefined&&undefined.__assign||function(){return(Tm=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},Hm=U([Or("data"),Vr("inputAttributes",{}),Vr("inputStyles",{}),Vr("tag","input"),Vr("inputClasses",[]),Qi("onSetValue"),Vr("styles",{}),Vr("eventOrder",{}),Qc("inputBehaviours",[Kl,Ha]),Vr("selectOnFocus",!0)]),Vm=function(t){return bi([Ha.config({onFocus:!1===t.selectOnFocus?P:function(t){var e=t.element(),n=zm(e);e.dom().setSelectionRange(0,n.length)}})])},Em=function(t){return{tag:t.tag,attributes:Tm({type:"input"},t.inputAttributes),styles:t.inputStyles,classes:t.inputClasses}},Am=hl({name:"Input",configFields:Hm(),factory:function(t,e){return{uid:t.uid,dom:Em(t),components:[],behaviours:(n=t,Tm({},Vm(n),ts(n.inputBehaviours,[Kl.config({store:{mode:"manual",initialValue:n.data.getOr(undefined),getValue:function(t){return zm(t.element())},setValue:function(t,e){zm(t.element())!==e&&Mm(t.element(),e)}},onSetValue:n.onSetValue})]))),eventOrder:t.eventOrder};var n}}),Bm=Object.freeze({exhibit:function(t,e){return li({attributes:St([{key:e.tabAttr,value:"true"}])})}}),Dm=[Vr("tabAttr","data-alloy-tabstop")],_m=xi({fields:Dm,name:"tabstopping",active:Bm}),Rm=function(t,e){var n=Ud(Am.sketch({inputAttributes:{placeholder:e},onSetValue:function(t,e){Kn(t,jt())},inputBehaviours:bi([wm.config({find:j.some}),_m.config({}),Kc.config({mode:"execution"})]),selectOnFocus:!1})),o=Ud(vl.sketch({dom:wl('<button class="${prefix}-input-container-x ${prefix}-icon-cancel-circle ${prefix}-icon"></button>'),action:function(t){var e=n.get(t);Kl.setValue(e,"")}}));return{name:t,spec:Cm.sketch({dom:wl('<div class="${prefix}-input-container"></div>'),components:[n.asSpec(),o.asSpec()],containerBehaviours:bi([ba.config({toggleClass:Sa.resolve("input-container-empty")}),wm.config({find:function(t){return j.some(n.get(t))}}),bm("input-clearing",[Yr(jt(),function(t){var e=n.get(t);(0<Kl.getValue(e).length?ba.off:ba.on)(t)})])])})}},Im=["input","button","textarea"],Fm=function(t,e,n){e.disabled&&Wm(t,e,n)},Lm=function(t){return T(Im,wn(t.element()))},Pm=function(t){Mn(t.element(),"disabled","disabled")},jm=function(t){En(t.element(),"disabled")},Nm=function(t){Mn(t.element(),"aria-disabled","true")},Um=function(t){Mn(t.element(),"aria-disabled","false")},Wm=function(e,t,n){t.disableClass.each(function(t){Hi(e.element(),t)}),(Lm(e)?Pm:Nm)(e)},Gm=function(t){return Lm(t)?Vn(t.element(),"disabled"):"true"===Hn(t.element(),"aria-disabled")},Xm=Object.freeze({enable:function(e,t,n){t.disableClass.each(function(t){Vi(e.element(),t)}),(Lm(e)?jm:Um)(e)},disable:Wm,isDisabled:Gm,onLoad:Fm}),$m=Object.freeze({exhibit:function(t,e,n){return li({classes:e.disabled?e.disableClass.map(Y).getOr([]):[]})},events:function(t,e){return Xr([$r(Ce(),function(t,e){return Gm(t)}),di(t,e,Fm)])}}),qm=[Vr("disabled",!1),Or("disableClass")],Ym=xi({fields:qm,name:"disabling",active:$m,apis:Xm}),Km=[Qc("formBehaviours",[Kl])],Jm=function(t){return"<alloy.field."+t+">"},Qm=function(o,t,e){return{uid:o.uid,dom:o.dom,components:t,behaviours:ts(o.formBehaviours,[Kl.config({store:{mode:"manual",getValue:function(t){var e=Gs(t,o);return nt(e,function(t,e){return t().bind(function(t){var e,n=wm.getCurrent(t);return e="missing current",n.fold(function(){return dt.error(e)},dt.value)}).map(Kl.getValue)})},setValue:function(n,t){et(t,function(e,t){Ns(n,o,t).each(function(t){wm.getCurrent(t).each(function(t){Kl.setValue(t,e)})})})}}})]),apis:{getField:function(t,e){return Ns(t,o,e).bind(wm.getCurrent)}}}},Zm={getField:Zs(function(t,e,n){return t.getField(e,n)}),sketch:function(t){var n,e=(n=[],{field:function(t,e){return n.push(t),Is("form",Jm(t),e)},record:function(){return n}}),o=t(e),r=e.record(),i=E(r,function(t){return Ms({name:t,pname:Jm(t)})});return sl("form",Km,i,Qm,o)}},th=function(){var e=zt(j.none()),n=function(){e.get().each(function(t){t.destroy()})};return{clear:function(){n(),e.set(j.none())},isSet:function(){return e.get().isSome()},set:function(t){n(),e.set(j.some(t))},run:function(t){e.get().each(t)}}},eh=function(){var e=zt(j.none());return{clear:function(){e.set(j.none())},set:function(t){e.set(j.some(t))},isSet:function(){return e.get().isSome()},on:function(t){e.get().each(t)}}},nh=function(t){return{xValue:t,points:[]}},oh=function(t,e){if(e===t.xValue)return t;var n=0<e-t.xValue?1:-1,o={direction:n,xValue:e};return{xValue:e,points:(0===t.points.length?[]:t.points[t.points.length-1].direction===n?t.points.slice(0,t.points.length-1):t.points).concat([o])}},rh=function(t){if(0===t.points.length)return 0;var e=t.points[0].direction,n=t.points[t.points.length-1].direction;return-1===e&&-1===n?-1:1===e&&1===n?1:0},ih=function(t){var o="navigateEvent",e=Yo([br("fields"),Vr("maxFieldIndex",t.fields.length-1),br("onExecute"),br("getInitialValue"),Ir("state",function(){return{dialogSwipeState:eh(),currentScreen:zt(0)}})]),a=sr("SerialisedDialog",e,t),r=function(e,t,n){return vl.sketch({dom:wl('<span class="${prefix}-icon-'+t+' ${prefix}-icon"></span>'),action:function(t){Jn(t,o,{direction:e})},buttonBehaviours:bi([Ym.config({disableClass:Sa.resolve("toolbar-navigation-disabled"),disabled:!n})])})},i=function(t,r){var i=Xa(t.element(),"."+Sa.resolve("serialised-dialog-screen"));Ya(t.element(),"."+Sa.resolve("serialised-dialog-chain")).each(function(o){0<=a.state.currentScreen.get()+r&&a.state.currentScreen.get()+r<i.length&&(Ia(o,"left").each(function(t){var e=parseInt(t,10),n=lf(i[0]);Ba(o,"left",e-r*n+"px")}),a.state.currentScreen.set(a.state.currentScreen.get()+r))})},u=function(o){var t=Xa(o.element(),"input");j.from(t[a.state.currentScreen.get()]).each(function(t){o.getSystem().getByDom(t).each(function(t){var e,n;e=o,n=t.element(),e.getSystem().triggerFocus(n,e.element())})});var e=s.get(o);yu.highlightAt(e,a.state.currentScreen.get())},c=Ud(Zm.sketch(function(n){return{dom:wl('<div class="${prefix}-serialised-dialog"></div>'),components:[Cm.sketch({dom:wl('<div class="${prefix}-serialised-dialog-chain" style="left: 0px; position: absolute;"></div>'),components:E(a.fields,function(t,e){return e<=a.maxFieldIndex?Cm.sketch({dom:wl('<div class="${prefix}-serialised-dialog-screen"></div>'),components:[r(-1,"previous",0<e),n.field(t.name,t.spec),r(1,"next",e<a.maxFieldIndex)]}):n.field(t.name,t.spec)})})],formBehaviours:bi([xa(function(t,e){var n;n=e,Ya(t.element(),"."+Sa.resolve("serialised-dialog-chain")).each(function(t){Ba(t,"left",-a.state.currentScreen.get()*n.width+"px")})}),Kc.config({mode:"special",focusIn:function(t){u(t)},onTab:function(t){return i(t,1),j.some(!0)},onShiftTab:function(t){return i(t,-1),j.some(!0)}}),bm("form-events",[oi(function(e,t){a.state.currentScreen.set(0),a.state.dialogSwipeState.clear();var n=s.get(e);yu.highlightFirst(n),a.getInitialValue(e).each(function(t){Kl.setValue(e,t)})}),ai(a.onExecute),Yr(Wt(),function(t,e){"left"===e.event().raw().propertyName&&u(t)}),Yr(o,function(t,e){var n=e.event().direction();i(t,n)})])])}})),s=Ud({dom:wl('<div class="${prefix}-dot-container"></div>'),behaviours:bi([yu.config({highlightClass:Sa.resolve("dot-active"),itemClass:Sa.resolve("dot-item")})]),components:W(a.fields,function(t,e){return e<=a.maxFieldIndex?[kl('<div class="${prefix}-dot-item ${prefix}-icon-full-dot ${prefix}-icon"></div>')]:[]})});return{dom:wl('<div class="${prefix}-serializer-wrapper"></div>'),components:[c.asSpec(),s.asSpec()],behaviours:bi([Kc.config({mode:"special",focusIn:function(t){var e=c.get(t);Kc.focusIn(e)}}),bm("serializer-wrapper-events",[Yr(Ht(),function(t,e){var n=e.event();a.state.dialogSwipeState.set(nh(n.raw().touches[0].clientX))}),Yr(Vt(),function(t,e){var n=e.event();a.state.dialogSwipeState.on(function(t){e.event().prevent(),a.state.dialogSwipeState.set(oh(t,n.raw().touches[0].clientX))})}),Yr(Et(),function(o){a.state.dialogSwipeState.on(function(t){var e=c.get(o),n=-1*rh(t);i(e,n)})})])])}},ah=$t(function(n,o){return[{label:"the link group",items:[ih({fields:[Rm("url","Type or paste URL"),Rm("text","Link text"),Rm("title","Link title"),Rm("target","Link target"),(t="link",{name:t,spec:Om.sketch({dom:{tag:"span",styles:{display:"none"}},getInitialValue:function(){return j.none()}})})],maxFieldIndex:["url","text","title","target"].length-1,getInitialValue:function(){return j.some(hm.getInfo(o))},onExecute:function(t){var e=Kl.getValue(t);hm.applyInfo(o,e),n.restoreToolbar(),o.focus()}})]}];var t}),uh=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",icon:"bold",format:"bold"},{title:"Italic",icon:"italic",format:"italic"},{title:"Underline",icon:"underline",format:"underline"},{title:"Strikethrough",icon:"strikethrough",format:"strikethrough"},{title:"Superscript",icon:"superscript",format:"superscript"},{title:"Subscript",icon:"subscript",format:"subscript"},{title:"Code",icon:"code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Alignment",items:[{title:"Left",icon:"alignleft",format:"alignleft"},{title:"Center",icon:"aligncenter",format:"aligncenter"},{title:"Right",icon:"alignright",format:"alignright"},{title:"Justify",icon:"alignjustify",format:"alignjustify"}]}],ch=Xr([(om=we(),rm=function(t,e){var n,o,r=e.event().originator(),i=e.event().target();return o=i,!(rn(n=r,t.element())&&!rn(n,o)&&(console.warn(we()+" did not get interpreted by the desired target. \nOriginator: "+Dn(r)+"\nTarget: "+Dn(i)+"\nCheck the "+we()+" event handlers"),1))},{key:om,value:Fr({can:rm})})]),sh=Object.freeze({events:ch}),lh=b,fh=function(e){var t=function(t){return function(){throw new Error("The component must be in a context to send: "+t+"\n"+Dn(e().element())+" is not in context.")}};return{debugInfo:U("fake"),triggerEvent:t("triggerEvent"),triggerFocus:t("triggerFocus"),triggerEscape:t("triggerEscape"),build:t("build"),addToWorld:t("addToWorld"),removeFromWorld:t("removeFromWorld"),addToGui:t("addToGui"),removeFromGui:t("removeFromGui"),getByUid:t("getByUid"),getByDom:t("getByDom"),broadcast:t("broadcast"),broadcastOn:t("broadcastOn"),broadcastEvent:t("broadcastEvent"),isConnected:U(!1)}},dh=fh(),mh=function(t,r){var i={};return et(t,function(t,o){et(t,function(t,e){var n=xt(e,[])(i);i[e]=n.concat([r(o,t)])})}),i},hh=undefined&&undefined.__assign||function(){return(hh=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},gh=function(t,e){return n=f.apply(undefined,[t.handler].concat(e)),o=t.purpose(),{cHandler:n,purpose:U(o)};var n,o},ph=function(t){return t.cHandler},vh=undefined&&undefined.__assign||function(){return(vh=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},bh=function(t,e){return{name:U(t),handler:U(e)}},yh=function(t,e,n){var o,r,i=vh({},n,(o=t,r={},A(e,function(t){r[t.name()]=t.handlers(o)}),r));return mh(i,bh)},xh=function(t){var e,i=O(e=t)?{can:U(!0),abort:U(!1),run:e}:e;return function(t,e){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];var r=[t,e].concat(n);i.abort.apply(undefined,r)?e.stop():i.can.apply(undefined,r)&&i.run.apply(undefined,r)}},wh=function(t,e,n){var o,r,i=e[n];return i?function(a,u,t,c){var e=t.slice(0);try{var n=e.sort(function(t,e){var n=t[u](),o=e[u](),r=c.indexOf(n),i=c.indexOf(o);if(-1===r)throw new Error("The ordering for "+a+" does not have an entry for "+n+".\nOrder specified: "+Po(c,null,2));if(-1===i)throw new Error("The ordering for "+a+" does not have an entry for "+o+".\nOrder specified: "+Po(c,null,2));return r<i?-1:i<r?1:0});return dt.value(n)}catch(o){return dt.error([o])}}("Event: "+n,"name",t,i).map(function(t){var e=E(t,function(t){return t.handler()});return Lr(e)}):(o=n,r=t,dt.error(["The event ("+o+') has more than one behaviour that listens to it.\nWhen this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).\nThe behaviours that can trigger it are: '+Po(E(r,function(t){return t.name()}),null,2)]))},kh=function(t,i){var e=rt(t,function(o,r){return(1===o.length?dt.value(o[0].handler()):wh(o,i,r)).map(function(t){var e=xh(t),n=1<o.length?B(i,function(e){return T(o,function(t){return t.name()===e})}).join(" > "):o[0].name();return kt(r,{handler:e,purpose:U(n)})})});return Ct(e,{})},Sh=undefined&&undefined.__assign||function(){return(Sh=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},Ch=function(t){return ur("custom.definition",Yo([er("dom","dom",bo(),Yo([br("tag"),Vr("styles",{}),Vr("classes",[]),Vr("attributes",{}),Or("value"),Or("innerHtml")])),br("components"),br("uid"),Vr("events",{}),Vr("apis",{}),er("eventOrder","eventOrder",(e={"alloy.execute":["disabling","alloy.base.behaviour","toggling","typeaheadevents"],"alloy.focus":["alloy.base.behaviour","focusing","keying"],"alloy.system.init":["alloy.base.behaviour","disabling","toggling","representing"],input:["alloy.base.behaviour","representing","streaming","invalidating"],"alloy.system.detached":["alloy.base.behaviour","representing"],mousedown:["focusing","alloy.base.behaviour","item-type-events"]},po.mergeWithThunk(U(e))),dr()),Or("domModification")]),t);var e},Oh=function(e,t){A(t,function(t){Hi(e,t)})},zh=function(e,t){A(t,function(t){Vi(e,t)})},Mh=function(t,e){return n=t,r=E(o=e,function(t){return Tr(t.name(),[br("config"),Vr("state",pi)])}),i=ur("component.behaviours",Yo(r),n.behaviours).fold(function(t){throw new Error(lr(t)+"\nComplete spec:\n"+Po(n,null,2))},function(t){return t}),{list:o,data:nt(i,function(t){var e=t.map(function(t){return{config:t.config,state:t.state.init(t.config)}});return function(){return e}})};var n,o,r,i},Th=function(t){var e,n,o,r=(e=t,n=xt("behaviours",{})(e),o=B(Z(n),function(t){return n[t]!==undefined}),E(o,function(t){return n[t].me}));return Mh(t,r)},Hh=function(t,e,n){var o,r,i,a=Sh({},(o=t).dom,{uid:o.uid,domChildren:E(o.components,function(t){return t.element()})}),u=t.domModification.fold(function(){return li({})},li),c={"alloy.base.modification":u},s=0<e.length?function(e,t,n,o){var r=hh({},t);A(n,function(t){r[t.name()]=t.exhibit(e,o)});var i=mh(r,function(t,e){return{name:t,modification:e}}),a=function(t){return D(t,function(t,e){return hh({},e.modification,t)},{})},u=D(i.classes,function(t,e){return e.modification.concat(t)},[]),c=a(i.attributes),s=a(i.styles);return li({classes:u,attributes:c,styles:s})}(n,c,e,a):u;return i=s,si({},r=a,{attributes:si({},r.attributes,i.attributes),styles:si({},r.styles,i.styles),classes:r.classes.concat(i.classes)})},Vh=function(t,e,n){var o,r,i,a,u,c,s={"alloy.base.behaviour":(o=t,o.events)};return(r=n,i=t.eventOrder,a=e,u=s,c=yh(r,a,u),kh(c,i)).getOrDie()},Eh=function(n){var t=function(){return l},o=zt(dh),e=cr(Ch(n)),r=Th(n),i=r.list,a=r.data,u=function(t){var e=je.fromTag(t.tag);Tn(e,t.attributes),Oh(e,t.classes),Da(e,t.styles),t.innerHtml.each(function(t){return xn(e,t)});var n=t.domChildren;return pn(e,n),t.value.each(function(t){Mm(e,t)}),t.uid,rl(e,t.uid),e}(Hh(e,i,a)),c=Vh(e,i,a),s=zt(e.components),l={getSystem:o.get,config:function(t){var e=a;return(O(e[t.name()])?e[t.name()]:function(){throw new Error("Could not find "+t.name()+" in "+Po(n,null,2))})()},hasConfigured:function(t){return O(a[t.name()])},spec:U(n),readState:function(t){return a[t]().map(function(t){return t.state.readState()}).getOr("not enabled")},getApis:function(){return e.apis},connect:function(t){o.set(t)},disconnect:function(){o.set(fh(t))},element:U(u),syncComponents:function(){var t=ln(u),e=W(t,function(t){return o.get().getByDom(t).fold(function(){return[]},function(t){return[t]})});s.set(e)},components:s.get,events:U(c)};return l},Ah=undefined&&undefined.__assign||function(){return(Ah=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},Bh=undefined&&undefined.__rest||function(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&(n[o[r]]=t[o[r]])}return n},Dh=function(t){var e,n,o=lh(t),r=o.events,i=Bh(o,["events"]),a=(e=i,n=xt("components",[])(e),E(n,Fh)),u=Ah({},i,{events:Ah({},sh,r),components:a});return dt.value(Eh(u))},_h=function(t){var e=je.fromText(t);return Rh({element:e})},Rh=function(t){var e=sr("external.component",qo([br("element"),Or("uid")]),t),n=zt(fh());e.uid.each(function(t){rl(e.element,t)});var o={getSystem:n.get,config:j.none,hasConfigured:U(!1),connect:function(t){n.set(t)},disconnect:function(){n.set(fh(function(){return o}))},getApis:function(){return{}},element:U(e.element),spec:U(t),readState:U("No state"),syncComponents:P,components:U([]),events:U({})};return Qs(o)},Ih=(im=0,function(t){return t+"_"+ ++im}),Fh=function(e){return(t=e,wt(t,Js)).fold(function(){var t=e.hasOwnProperty("uid")?e:Ah({uid:Ih("")},e);return Dh(t).getOrDie()},function(t){return t});var t},Lh=Qs,Ph="alloy.item-hover",jh="alloy.item-focus",Nh=function(t){(Pi(t.element()).isNone()||Ha.isFocused(t))&&(Ha.isFocused(t)||Ha.focus(t),Jn(t,Ph,{item:t}))},Uh=function(t){Jn(t,jh,{item:t})},Wh=U(Ph),Gh=U(jh),Xh=undefined&&undefined.__assign||function(){return(Xh=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},$h=[br("data"),br("components"),br("dom"),Or("toggling"),es("itemBehaviours",[ba,Ha,Kc,Kl]),Vr("ignoreFocus",!1),Vr("domModification",{}),na("builder",function(t){return{dom:t.dom,domModification:Xh({},t.domModification,{attributes:Xh({role:t.toggling.isSome()?"menuitemcheckbox":"menuitem"},t.domModification.attributes)}),behaviours:ns(t.itemBehaviours,[t.toggling.fold(ba.revoke,function(t){return ba.config(Xh({aria:{mode:"checked"}},t))}),Ha.config({ignore:t.ignoreFocus,stopMousedown:t.ignoreFocus,onFocus:function(t){Uh(t)}}),Kc.config({mode:"execution"}),Kl.config({store:{mode:"memory",initialValue:t.data}}),bm("item-type-events",[Yr(Me(),Qn),ti(At()),Yr(Rt(),Nh),Yr(Oe(),Ha.focus)])]),components:t.components,eventOrder:t.eventOrder}}),Vr("eventOrder",{})],qh=[br("dom"),br("components"),na("builder",function(t){return{dom:t.dom,components:t.components,events:Xr([ei(Oe())])}})],Yh=U([Ms({name:"widget",overrides:function(e){return{behaviours:bi([Kl.config({store:{mode:"manual",getValue:function(t){return e.data},setValue:function(){}}})])}}})]),Kh=[br("uid"),br("data"),br("components"),br("dom"),Vr("autofocus",!1),Vr("ignoreFocus",!1),es("widgetBehaviours",[Kl,Ha,Kc]),Vr("domModification",{}),Ys(Yh()),na("builder",function(n){var t=Ps(0,n,Yh()),e=js("item-widget",n,t.internals()),o=function(t){return Ns(t,n,"widget").map(function(t){return Kc.focusIn(t),t})},r=function(t,e){return Mu(e.event().target())||n.autofocus&&e.setSource(t.element()),j.none()};return{dom:n.dom,components:e,domModification:n.domModification,events:Xr([ai(function(t,e){o(t).each(function(t){e.stop()})}),Yr(Rt(),Nh),Yr(Oe(),function(t,e){n.autofocus?o(t):Ha.focus(t)})]),behaviours:ns(n.widgetBehaviours,[Kl.config({store:{mode:"memory",initialValue:n.data}}),Ha.config({ignore:n.ignoreFocus,onFocus:function(t){Uh(t)}}),Kc.config({mode:"special",focusIn:n.autofocus?function(t){o(t)}:Si(),onLeft:r,onRight:r,onEscape:function(t,e){return Ha.isFocused(t)||n.autofocus?(n.autofocus&&e.setSource(t.element()),j.none()):(Ha.focus(t),j.some(!0))}})])}})],Jh=undefined&&undefined.__assign||function(){return(Jh=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},Qh=fr("type",{widget:Kh,item:$h,separator:qh}),Zh=U([Vs({factory:{sketch:function(t){var e=sr("menu.spec item",Qh,t);return e.builder(e)}},name:"items",unit:"item",defaults:function(t,e){return e.hasOwnProperty("uid")?e:Jh({},e,{uid:al("item")})},overrides:function(t,e){return{type:e.type,ignoreFocus:t.fakeFocus,domModification:{classes:[t.markers.item]}}}})]),tg=U([br("value"),br("items"),br("dom"),br("components"),Vr("eventOrder",{}),Qc("menuBehaviours",[yu,Kl,wm,Kc]),Er("movement",{mode:"menu",moveOnTab:!0},fr("mode",{grid:[ra(),na("config",function(t,e){return{mode:"flatgrid",selector:"."+t.markers.item,initSize:{numColumns:e.initSize.numColumns,numRows:e.initSize.numRows},focusManager:t.focusManager}})],matrix:[na("config",function(t,e){return{mode:"matrix",selectors:{row:e.rowSelector,cell:"."+t.markers.item},focusManager:t.focusManager}}),br("rowSelector")],menu:[Vr("moveOnTab",!0),na("config",function(t,e){return{mode:"menu",selector:"."+t.markers.item,moveOnTab:e.moveOnTab,focusManager:t.focusManager}})]})),yr("markers",$i()),Vr("fakeFocus",!1),Vr("focusManager",wu()),Qi("onHighlight")]),eg=U("alloy.menu-focus"),ng=gl({name:"Menu",configFields:tg(),partFields:Zh(),factory:function(t,e,n,o){return{uid:t.uid,dom:t.dom,markers:t.markers,behaviours:ts(t.menuBehaviours,[yu.config({highlightClass:t.markers.selectedItem,itemClass:t.markers.item,onHighlight:t.onHighlight}),Kl.config({store:{mode:"memory",initialValue:t.value}}),wm.config({find:j.some}),Kc.config(t.movement.config(t,t.movement))]),events:Xr([Yr(Gh(),function(e,n){var t=n.event();e.getSystem().getByDom(t.target()).each(function(t){yu.highlight(e,t),n.stop(),Jn(e,eg(),{menu:e,item:t})})}),Yr(Wh(),function(t,e){var n=e.event().item();yu.highlight(t,n)})]),components:e,eventOrder:t.eventOrder,domModification:{attributes:{role:"menu"}}}}}),og=function(t,e,n,o){var r=t.getSystem().build(o);co(t,r,n)},rg=function(t,e,n,o){var r=ig(t,e);R(r,function(t){return rn(o.element(),t.element())}).each(lo)},ig=function(t,e){return t.components()},ag=function(e,n,t,r,o){var i=ig(e,n);return j.from(i[r]).map(function(t){return rg(e,n,0,t),o.each(function(t){og(e,0,function(t,e){var n,o;o=e,fn(n=t,r).fold(function(){gn(n,o)},function(t){dn(t,o)})},t)}),t})},ug=xi({fields:[],name:"replacing",apis:Object.freeze({append:function(t,e,n,o){og(t,0,gn,o)},prepend:function(t,e,n,o){og(t,0,hn,o)},remove:rg,replaceAt:ag,replaceBy:function(e,n,t,o,r){var i=ig(e,n);return I(i,o).bind(function(t){return ag(e,n,0,t,r)})},set:function(e,t,n,o){var r,i,a,u;fo(e),r=function(){var t=E(o,e.getSystem().build);A(t,function(t){uo(e,t)})},i=e.element(),a=an(i),u=Li(a).bind(function(e){var t=function(t){return rn(e,t)};return t(i)?j.some(i):Wr(i,t)}),r(i),u.each(function(e){Li(a).filter(function(t){return rn(t,e)}).fold(function(){Ii(e)},P)})},contents:ig})}),cg=function(n,o,r,t){return wt(r,t).bind(function(t){return wt(n,t).bind(function(t){var e=cg(n,o,r,t);return j.some([t].concat(e))})}).getOr([])},sg=function(t,e){var n={};et(t,function(t,e){A(t,function(t){n[t]=e})});var o=e,r=ot(e,function(t,e){return{k:t,v:e}}),i=nt(r,function(t,e){return[e].concat(cg(n,o,r,e))});return nt(n,function(t){return wt(i,t).getOr([t])})},lg=undefined&&undefined.__assign||function(){return(lg=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},fg=function(){var i=zt({}),a=zt({}),u=zt({}),c=zt(j.none()),s=zt({}),e=function(t){return wt(a.get(),t)};return{setMenuBuilt:function(t,e){var n;a.set(lg({},a.get(),((n={})[t]={type:"prepared",menu:e},n)))},setContents:function(t,e,n,o){c.set(j.some(t)),i.set(n),a.set(e),s.set(o);var r=sg(o,n);u.set(r)},expand:function(n){return wt(i.get(),n).map(function(t){var e=wt(u.get(),n).getOr([]);return[t].concat(e)})},refresh:function(t){return wt(u.get(),t)},collapse:function(t){return wt(u.get(),t).bind(function(t){return 1<t.length?j.some(t.slice(1)):j.none()})},lookupMenu:e,otherMenus:function(t){var e=s.get();return q(Z(e),t)},getPrimary:function(){return c.get().bind(function(t){return e(t).bind(function(t){return"prepared"===t.type?j.some(t.menu):j.none()})})},getMenus:function(){return a.get()},clear:function(){i.set({}),a.set({}),u.set({}),c.set(j.none())},isClear:function(){return c.get().isNone()}}},dg=undefined&&undefined.__assign||function(){return(dg=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},mg=U("collapse-item"),hg=hl({name:"TieredMenu",configFields:[ea("onExecute"),ea("onEscape"),ta("onOpenMenu"),ta("onOpenSubmenu"),Qi("onCollapseMenu"),Vr("highlightImmediately",!0),kr("data",[br("primary"),br("menus"),br("expansions")]),Vr("fakeFocus",!1),Qi("onHighlight"),Qi("onHover"),Yi(),br("dom"),Vr("navigateOnHover",!0),Vr("stayInDom",!1),Qc("tmenuBehaviours",[Kc,yu,wm,ug]),Vr("eventOrder",{})],apis:{collapseMenu:function(t,e){t.collapseMenu(e)},highlightPrimary:function(t,e){t.highlightPrimary(e)}},factory:function(u,t){var c,e,s=fg(),n=function(t){var o,r,e,n=(o=t,r=u.data.primary,e=u.data.menus,nt(e,function(t,e){var n=function(){return ng.sketch(dg({dom:t.dom},t,{value:e,items:t.items,markers:u.markers,fakeFocus:u.fakeFocus,onHighlight:u.onHighlight,focusManager:u.fakeFocus?ku():wu()}))};return e===r?{type:"prepared",menu:o.getSystem().build(n())}:{type:"notbuilt",nbMenu:n}})),i=a(t);return s.setContents(u.data.primary,n,u.data.expansions,i),s.getPrimary()},l=function(t){return Kl.getValue(t).value},a=function(t){return nt(u.data.menus,function(t,e){return W(t.items,function(t){return"separator"===t.type?[]:[t.data.value]})})},f=function(e,t){yu.highlight(e,t),yu.getHighlighted(t).orThunk(function(){return yu.getFirst(t)}).each(function(t){Zn(e,t.element(),Oe())})},d=function(e,t){return Mt(E(t,function(t){return e.lookupMenu(t).bind(function(t){return"prepared"===t.type?j.some(t.menu):j.none()})}))},m=function(e,t,n){var o=d(t,t.otherMenus(n));A(o,function(t){zh(t.element(),[u.markers.backgroundMenu]),u.stayInDom||ug.remove(e,t)})},h=function(o,r,i){return j.from(i[0]).bind(function(t){return r.lookupMenu(t).bind(function(t){if("notbuilt"===t.type)return j.none();var e=t.menu,n=d(r,i.slice(1));return A(n,function(t){Hi(t.element(),u.markers.backgroundMenu)}),no(e.element())||ug.append(o,Lh(e)),zh(e.element(),[u.markers.backgroundMenu]),f(o,e),m(o,r,i),j.some(e)})})};(e=c||(c={}))[e.HighlightSubmenu=0]="HighlightSubmenu",e[e.HighlightParent=1]="HighlightParent";var i=function(r,i,a){void 0===a&&(a=c.HighlightSubmenu);var t=l(i);return s.expand(t).bind(function(o){return j.from(o[0]).bind(function(n){return s.lookupMenu(n).bind(function(t){var e=function(t,e,n){if("notbuilt"!==n.type)return n.menu;var o=t.getSystem().build(n.nbMenu());return s.setMenuBuilt(e,o),o}(r,n,t);return no(e.element())||ug.append(r,Lh(e)),u.onOpenSubmenu(r,i,e),a===c.HighlightSubmenu?(yu.highlightFirst(e),h(r,s,o)):(yu.dehighlightAll(e),j.some(i))})})})},o=function(e,n){var t=l(n);return s.collapse(t).bind(function(t){return h(e,s,t).map(function(t){return u.onCollapseMenu(e,n,t),t})})},r=function(n){return function(e,t){return Ka(t.getSource(),"."+u.markers.item).bind(function(t){return e.getSystem().getByDom(t).toOption().bind(function(t){return n(e,t).map(function(){return!0})})})}},g=Xr([Yr(eg(),function(e,t){var n=t.event().menu();yu.highlight(e,n);var o=l(t.event().item());s.refresh(o).each(function(t){return m(e,s,t)})}),ai(function(e,t){var n=t.event().target();e.getSystem().getByDom(n).each(function(t){0===l(t).indexOf("collapse-item")&&o(e,t),i(e,t,c.HighlightSubmenu).fold(function(){u.onExecute(e,t)},function(){})})}),oi(function(e,t){n(e).each(function(t){ug.append(e,Lh(t)),u.onOpenMenu(e,t),u.highlightImmediately&&f(e,t)})})].concat(u.navigateOnHover?[Yr(Wh(),function(t,e){var n,o,r=e.event().item();n=t,o=l(r),s.refresh(o).bind(function(t){return h(n,s,t)}),i(t,r,c.HighlightParent),u.onHover(t,r)})]:[])),p={collapseMenu:function(e){yu.getHighlighted(e).each(function(t){yu.getHighlighted(t).each(function(t){o(e,t)})})},highlightPrimary:function(e){s.getPrimary().each(function(t){f(e,t)})}};return{uid:u.uid,dom:u.dom,markers:u.markers,behaviours:ts(u.tmenuBehaviours,[Kc.config({mode:"special",onRight:r(function(t,e){return Mu(e.element())?j.none():i(t,e,c.HighlightSubmenu)}),onLeft:r(function(t,e){return Mu(e.element())?j.none():o(t,e)}),onEscape:r(function(t,e){return o(t,e).orThunk(function(){return u.onEscape(t,e).map(function(){return t})})}),focusIn:function(e,t){s.getPrimary().each(function(t){Zn(e,t.element(),Oe())})}}),yu.config({highlightClass:u.markers.selectedMenu,itemClass:u.markers.menu}),wm.config({find:function(t){return yu.getHighlighted(t)}}),ug.config({})]),eventOrder:u.eventOrder,apis:p,events:g}},extraApis:{tieredData:function(t,e,n){return{primary:t,menus:e,expansions:n}},singleData:function(t,e){return{primary:t,menus:kt(t,e),expansions:{}}},collapseItem:function(t){return{value:$n(mg()),meta:{text:t}}}}}),gg=function(t,e,n,o){return wt(e.routes,o.start).bind(function(t){return wt(t,o.destination)})},pg=function(t,e,n,o){return gg(0,e,0,o).bind(function(e){return e.transition.map(function(t){return{transition:t,route:e}})})},vg=function(n,o,t){var e,r,i;(e=n,r=o,i=t,bg(e,r,i).bind(function(t){return pg(e,r,i,t)})).each(function(t){var e=t.transition;Vi(n.element(),e.transitionClass),En(n.element(),o.destinationAttr)})},bg=function(t,e,n){var o=t.element();return Vn(o,e.destinationAttr)?j.some({start:Hn(t.element(),e.stateAttr),destination:Hn(t.element(),e.destinationAttr)}):j.none()},yg=function(t,e,n,o){vg(t,e,n),Vn(t.element(),e.stateAttr)&&Hn(t.element(),e.stateAttr)!==o&&e.onFinish(t,o),Mn(t.element(),e.stateAttr,o)},xg=Object.freeze({findRoute:gg,disableTransition:vg,getCurrentRoute:bg,jumpTo:yg,progressTo:function(n,o,r,i){var t,e;e=o,Vn((t=n).element(),e.destinationAttr)&&(Mn(t.element(),e.stateAttr,Hn(t.element(),e.destinationAttr)),En(t.element(),e.destinationAttr));var a,u,c=(a=o,u=i,{start:Hn(n.element(),a.stateAttr),destination:u});pg(n,o,r,c).fold(function(){yg(n,o,r,i)},function(t){vg(n,o,r);var e=t.transition;Hi(n.element(),e.transitionClass),Mn(n.element(),o.destinationAttr,i)})},getState:function(t,e,n){var o=t.element();return Vn(o,e.stateAttr)?j.some(Hn(o,e.stateAttr)):j.none()}}),wg=Object.freeze({events:function(r,i){return Xr([Yr(Wt(),function(n,t){var o=t.event().raw();bg(n,r,i).each(function(e){gg(0,r,0,e).each(function(t){t.transition.each(function(t){o.propertyName===t.property&&(yg(n,r,i,e.destination),r.onTransition(n,e))})})})}),oi(function(t,e){yg(t,r,i,r.initialState)})])}}),kg=[Vr("destinationAttr","data-transitioning-destination"),Vr("stateAttr","data-transitioning-state"),br("initialState"),Qi("onTransition"),Qi("onFinish"),yr("routes",ar(dt.value,ar(dt.value,qo([Hr("transition",[br("property"),br("transitionClass")])]))))],Sg=xi({fields:kg,name:"transitioning",active:wg,apis:xg,extra:{createRoutes:function(t){var o={};return et(t,function(t,e){var n=e.split("<->");o[n[0]]=kt(n[1],t),o[n[1]]=kt(n[0],t)}),o},createBistate:function(t,e,n){return St([{key:t,value:kt(e,n)},{key:e,value:kt(t,n)}])},createTristate:function(t,e,n,o){return St([{key:t,value:St([{key:e,value:o},{key:n,value:o}])},{key:e,value:St([{key:t,value:o},{key:n,value:o}])},{key:n,value:St([{key:t,value:o},{key:e,value:o}])}])}}}),Cg=Sa.resolve("scrollable"),Og={register:function(t){Hi(t,Cg)},deregister:function(t){Vi(t,Cg)},scrollable:U(Cg)},zg=function(t){return wt(t,"format").getOr(t.title)},Mg=function(t,e,n,o,r){return{data:{value:t,text:e},type:"item",dom:{tag:"div",classes:r?[Sa.resolve("styles-item-is-menu")]:[]},toggling:{toggleOnExecute:!1,toggleClass:Sa.resolve("format-matches"),selected:n},itemBehaviours:bi(r?[]:[ya(t,function(t,e){(e?ba.on:ba.off)(t)})]),components:[{dom:{tag:"div",attributes:{style:o},innerHtml:e}}]}},Tg=function(t,e,n,o){return{value:t,dom:{tag:"div"},components:[vl.sketch({dom:{tag:"div",classes:[Sa.resolve("styles-collapser")]},components:o?[{dom:{tag:"span",classes:[Sa.resolve("styles-collapse-icon")]}},_h(t)]:[_h(t)],action:function(t){if(o){var e=n().get(t);hg.collapseMenu(e)}}}),{dom:{tag:"div",classes:[Sa.resolve("styles-menu-items-container")]},components:[ng.parts().items({})],behaviours:bi([bm("adhoc-scrollable-menu",[oi(function(t,e){Ba(t.element(),"overflow-y","auto"),Ba(t.element(),"-webkit-overflow-scrolling","touch"),Og.register(t.element())}),ri(function(t){Fa(t.element(),"overflow-y"),Fa(t.element(),"-webkit-overflow-scrolling"),Og.deregister(t.element())})])])}],items:e,menuBehaviours:bi([Sg.config({initialState:"after",routes:Sg.createTristate("before","current","after",{transition:{property:"transform",transitionClass:"transitioning"}})})])}},Hg=function(o){var r,i,t,e,n,a=(r=o.formats,i=function(){return u},t=Tg("Styles",[].concat(E(r.items,function(t){return Mg(zg(t),t.title,t.isSelected(),t.getPreview(),Ot(r.expansions,zg(t)))})),i,!1),e=nt(r.menus,function(t,e){var n=E(t,function(t){return Mg(zg(t),t.title,t.isSelected!==undefined&&t.isSelected(),t.getPreview!==undefined?t.getPreview():"",Ot(r.expansions,zg(t)))});return Tg(e,n,i,!0)}),n=pt(e,kt("styles",t)),{tmenu:hg.tieredData("styles",n,r.expansions)}),u=Ud(hg.sketch({dom:{tag:"div",classes:[Sa.resolve("styles-menu")]},components:[],fakeFocus:!0,stayInDom:!0,onExecute:function(t,e){var n=Kl.getValue(e);return o.handle(e,n.value),j.none()},onEscape:function(){return j.none()},onOpenMenu:function(t,e){var n=lf(t.element());sf(e.element(),n),Sg.jumpTo(e,"current")},onOpenSubmenu:function(t,e,n){var o=lf(t.element()),r=qa(e.element(),'[role="menu"]').getOrDie("hacky"),i=t.getSystem().getByDom(r).getOrDie();sf(n.element(),o),Sg.progressTo(i,"before"),Sg.jumpTo(n,"after"),Sg.progressTo(n,"current")},onCollapseMenu:function(t,e,n){var o=qa(e.element(),'[role="menu"]').getOrDie("hacky"),r=t.getSystem().getByDom(o).getOrDie();Sg.progressTo(r,"after"),Sg.progressTo(n,"current")},navigateOnHover:!1,highlightImmediately:!0,data:a.tmenu,markers:{backgroundMenu:Sa.resolve("styles-background-menu"),menu:Sa.resolve("styles-menu"),selectedMenu:Sa.resolve("styles-selected-menu"),item:Sa.resolve("styles-item"),selectedItem:Sa.resolve("styles-selected-item")}}));return u.asSpec()},Vg=function(t){return Ot(t,"items")?(n=pt(bt(e=t,["items"]),{menu:!0}),o=Eg(e.items),{item:n,menus:pt(o.menus,kt(e.title,o.items)),expansions:pt(o.expansions,kt(e.title,e.title))}):{item:t,menus:{},expansions:{}};var e,n,o},Eg=function(t){return D(t,function(t,e){var n=Vg(e);return{menus:pt(t.menus,n.menus),items:[n.item].concat(t.items),expansions:pt(t.expansions,n.expansions)}},{menus:{},expansions:{},items:[]})},Ag={expand:Eg},Bg=function(a,t){var u=function(t){return function(){return a.formatter.match(t)}},c=function(t){return function(){return a.formatter.getCssText(t)}},e=wt(t,"style_formats").getOr(uh),s=function(t){return E(t,function(t){if(Ot(t,"items")){var e=s(t.items);return pt(pt(t,{isSelected:U(!1),getPreview:U("")}),{items:e})}return Ot(t,"format")?pt(i=t,{isSelected:u(i.format),getPreview:c(i.format)}):(o=$n((n=t).title),r=pt(n,{format:o,isSelected:u(o),getPreview:c(o)}),a.formatter.register(o,r),r);var n,o,r,i})};return s(e)},Dg=function(n,t,o){var e,r,i,a=(e=n,i=(r=function(t){return W(t,function(t){return t.items===undefined?!Ot(t,"format")||e.formatter.canApply(t.format)?[t]:[]:0<r(t.items).length?[t]:[]})})(t),Ag.expand(i));return Hg({formats:a,handle:function(t,e){n.undoManager.transact(function(){ba.isOn(t)?n.formatter.remove(e):n.formatter.apply(e)}),o()}})},_g=["undo","bold","italic","link","image","bullist","styleselect"],Rg=function(t){var e=t.replace(/\|/g," ").trim();return 0<e.length?e.split(/\s+/):[]},Ig=function(t){return W(t,function(t){return S(t)?Ig(t):Rg(t)})},Fg=function(t){var e=t.toolbar!==undefined?t.toolbar:_g;return S(e)?Ig(e):Rg(e)},Lg=function(o,r){var t=function(t){return function(){return Ol.forToolbarCommand(r,t)}},e=function(t){return function(){return Ol.forToolbarStateCommand(r,t)}},n=function(t,e,n){return function(){return Ol.forToolbarStateAction(r,t,e,n)}},i=t("undo"),a=t("redo"),u=e("bold"),c=e("italic"),s=e("underline"),l=t("removeformat"),f=n("unlink","link",function(){r.execCommand("unlink",null,!1)}),d=n("unordered-list","ul",function(){r.execCommand("InsertUnorderedList",null,!1)}),m=n("ordered-list","ol",function(){r.execCommand("InsertOrderedList",null,!1)}),h=Bg(r,r.settings),g=function(){return Dg(r,h,function(){r.fire("scrollIntoView")})},p=function(t,e){return{isSupported:function(){return t.forall(function(t){return Ot(r.buttons,t)})},sketch:e}};return{undo:p(j.none(),i),redo:p(j.none(),a),bold:p(j.none(),u),italic:p(j.none(),c),underline:p(j.none(),s),removeformat:p(j.none(),l),link:p(j.none(),function(){return e=o,n=r,Ol.forToolbarStateAction(n,"link","link",function(){var t=ah(e,n);e.setContextToolbar(t),vm(n,function(){e.focusToolbar()}),hm.query(n).each(function(t){n.selection.select(t.dom())})});var e,n}),unlink:p(j.none(),f),image:p(j.none(),function(){return cm(r)}),bullist:p(j.some("bullist"),d),numlist:p(j.some("numlist"),m),fontsizeselect:p(j.none(),function(){return e=r,t={onChange:function(t){Ld.apply(e,t)},getInitialValue:function(){return Ld.get(e)}},Ad(o,"font-size",function(){return jd(t)});var e,t}),forecolor:p(j.none(),function(){return Dd(o,r)}),styleselect:p(j.none(),function(){return Ol.forToolbar("style-formats",function(t){r.fire("toReading"),o.dropup().appear(g,ba.on,t)},bi([ba.config({toggleClass:Sa.resolve("toolbar-button-selected"),toggleOnExecute:!1,aria:{mode:"pressed"}}),aa.config({channels:St([wa(Ui.orientationChanged(),ba.off),wa(Ui.dropupDismissed(),ba.off)])})]))})}},Pg=function(t,n){var e=Fg(t),o={};return W(e,function(t){var e=!Ot(o,t)&&Ot(n,t)&&n[t].isSupported()?[n[t].sketch()]:[];return o[t]=!0,e})},jg=function(m,h){return function(t){if(m(t)){var e,n,o,r,i,a,u,c=je.fromDom(t.target),s=function(){t.stopPropagation()},l=function(){t.preventDefault()},f=g(l,s),d=(e=c,n=t.clientX,o=t.clientY,r=s,i=l,a=f,u=t,{target:U(e),x:U(n),y:U(o),stop:r,prevent:i,kill:a,raw:U(u)});h(d)}}},Ng=function(t,e,n,o,r){var i=jg(n,o);return t.dom().addEventListener(e,i,r),{unbind:f(Ug,t,e,i,r)}},Ug=function(t,e,n,o){t.dom().removeEventListener(e,n,o)},Wg=U(!0),Gg=function(t,e,n){return Ng(t,e,Wg,n,!1)},Xg=function(t,e,n){return Ng(t,e,Wg,n,!0)},$g=function(t){var e=t.matchMedia("(orientation: portrait)").matches;return{isPortrait:U(e)}},qg=$g,Yg=function(o,e){var t=je.fromDom(o),r=null,n=Gg(t,"orientationchange",function(){clearInterval(r);var t=$g(o);e.onChange(t),i(function(){e.onReady(t)})}),i=function(t){clearInterval(r);var e=o.innerHeight,n=0;r=setInterval(function(){e!==o.innerHeight?(clearInterval(r),t(j.some(o.innerHeight))):20<n&&(clearInterval(r),t(j.none())),n++},50)};return{onAdjustment:i,destroy:function(){n.unbind()}}},Kg=function(t){var e=ye.detect().os.isiOS(),n=$g(t).isPortrait();return e&&!n?t.screen.height:t.screen.width};function Jg(n,o){var r=null;return{cancel:function(){null!==r&&(clearTimeout(r),r=null)},schedule:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];r=setTimeout(function(){n.apply(null,t),r=null},o)}}}var Qg=function(t){var e=t.raw();return e.touches===undefined||1!==e.touches.length?j.none():j.some(e.touches[0])},Zg=function(n){var a=zt(j.none()),o=Jg(function(t){a.set(j.none()),n.triggerEvent(Te(),t)},400),r=St([{key:Ht(),value:function(n){return Qg(n).each(function(t){o.cancel();var e={x:U(t.clientX),y:U(t.clientY),target:n.target};o.schedule(n),a.set(j.some(e))}),j.none()}},{key:Vt(),value:function(t){return o.cancel(),Qg(t).each(function(i){a.get().each(function(t){var e,n,o,r;e=i,n=t,o=Math.abs(e.clientX-n.x()),r=Math.abs(e.clientY-n.y()),(5<o||5<r)&&a.set(j.none())})}),j.none()}},{key:Et(),value:function(e){return o.cancel(),a.get().filter(function(t){return rn(t.target(),e.target())}).map(function(t){return n.triggerEvent(ze(),e)})}}]);return{fireIfReady:function(e,t){return wt(r,t).bind(function(t){return t(e)})}}},tp=function(n){var e=Zg({triggerEvent:function(t,e){n.onTapContent(e)}});return{fireTouchstart:function(t){e.fireIfReady(t,"touchstart")},onTouchend:function(){return Gg(n.body(),"touchend",function(t){e.fireIfReady(t,"touchend")})},onTouchmove:function(){return Gg(n.body(),"touchmove",function(t){e.fireIfReady(t,"touchmove")})}}},ep=6<=ye.detect().os.version.major,np=function(o,e,n){var r=tp(o),i=an(e),a=function(t){return!rn(t.start(),t.finish())||t.soffset()!==t.foffset()},t=function(){var t=o.doc().dom().hasFocus()&&o.getSelection().exists(a);n.getByDom(e).each(!0===(t||Li(i).filter(function(t){return"input"===wn(t)}).exists(function(t){return t.dom().selectionStart!==t.dom().selectionEnd}))?ba.on:ba.off)},u=[Gg(o.body(),"touchstart",function(t){o.onTouchContent(),r.fireTouchstart(t)}),r.onTouchmove(),r.onTouchend(),Gg(e,"touchstart",function(t){o.onTouchToolstrip()}),o.onToReading(function(){Fi(o.body())}),o.onToEditing(P),o.onScrollToCursor(function(t){t.preventDefault(),o.getCursorBox().each(function(t){var e=o.win(),n=t.top()>e.innerHeight||t.bottom()>e.innerHeight?t.bottom()-e.innerHeight+50:0;0!==n&&e.scrollTo(e.pageXOffset,e.pageYOffset+n)})})].concat(!0===ep?[]:[Gg(je.fromDom(o.win()),"blur",function(){n.getByDom(e).each(ba.off)}),Gg(i,"select",t),Gg(o.doc(),"selectionchange",t)]);return{destroy:function(){A(u,function(t){t.unbind()})}}},op=function(t,e){var n=parseInt(Hn(t,e),10);return isNaN(n)?0:n},rp=function eB(n,o){var r=function(t){return n(t)?j.from(t.dom().nodeValue):j.none()},t=ye.detect().browser,e=t.isIE()&&10===t.version.major?function(t){try{return r(t)}catch(e){return j.none()}}:r;return{get:function(t){if(!n(t))throw new Error("Can only get "+o+" value of a "+o+" node");return e(t).getOr("")},getOption:e,set:function(t,e){if(!n(t))throw new Error("Can only set raw "+o+" value of a "+o+" node");t.dom().nodeValue=e}}}(Cn,"text"),ip=function(t){return rp.get(t)},ap=function(t){return rp.getOption(t)},up=mt([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),cp={before:up.before,on:up.on,after:up.after,cata:function(t,e,n,o){return t.fold(e,n,o)},getStart:function(t){return t.fold(b,b,b)}},sp=mt([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),lp=Ne("start","soffset","finish","foffset"),fp=sp.relative,dp=sp.exact,mp=function(t,e,n,o){var r,i,a,u,c,s=(i=e,a=n,u=o,(c=an(r=t).dom().createRange()).setStart(r.dom(),i),c.setEnd(a.dom(),u),c),l=rn(t,n)&&e===o;return s.collapsed&&!l},hp=function(t,e,n){var o,r,i=t.document.createRange();return o=i,e.fold(function(t){o.setStartBefore(t.dom())},function(t,e){o.setStart(t.dom(),e)},function(t){o.setStartAfter(t.dom())}),r=i,n.fold(function(t){r.setEndBefore(t.dom())},function(t,e){r.setEnd(t.dom(),e)},function(t){r.setEndAfter(t.dom())}),i},gp=function(t,e,n,o,r){var i=t.document.createRange();return i.setStart(e.dom(),n),i.setEnd(o.dom(),r),i},pp=function(t){return{left:U(t.left),top:U(t.top),right:U(t.right),bottom:U(t.bottom),width:U(t.width),height:U(t.height)}},vp=mt([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),bp=function(t,e,n){return e(je.fromDom(n.startContainer),n.startOffset,je.fromDom(n.endContainer),n.endOffset)},yp=function(t,e){var r,n,o,i=(r=t,e.match({domRange:function(t){return{ltr:U(t),rtl:j.none}},relative:function(t,e){return{ltr:$t(function(){return hp(r,t,e)}),rtl:$t(function(){return j.some(hp(r,e,t))})}},exact:function(t,e,n,o){return{ltr:$t(function(){return gp(r,t,e,n,o)}),rtl:$t(function(){return j.some(gp(r,n,o,t,e))})}}}));return(o=(n=i).ltr()).collapsed?n.rtl().filter(function(t){return!1===t.collapsed}).map(function(t){return vp.rtl(je.fromDom(t.endContainer),t.endOffset,je.fromDom(t.startContainer),t.startOffset)}).getOrThunk(function(){return bp(0,vp.ltr,o)}):bp(0,vp.ltr,o)},xp=(document.caretPositionFromPoint||document.caretRangeFromPoint,function(t,e){var n=wn(t);return"input"===n?cp.after(t):T(["br","img"],n)?0===e?cp.before(t):cp.after(t):cp.on(t,e)}),wp=function(t,e,n,o,r){var i,a,u=gp(t,e,n,o,r);i=t,a=u,j.from(i.getSelection()).each(function(t){t.removeAllRanges(),t.addRange(a)})},kp=function(t,e,n,o,r){var i,a,u,c,f,s=(i=o,a=r,u=xp(e,n),c=xp(i,a),fp(u,c));yp(f=t,s).match({ltr:function(t,e,n,o){wp(f,t,e,n,o)},rtl:function(t,e,n,o){var r,i,a,u,c,s=f.getSelection();if(s.setBaseAndExtent)s.setBaseAndExtent(t.dom(),e,n.dom(),o);else if(s.extend)try{i=t,a=e,u=n,c=o,(r=s).collapse(i.dom(),a),r.extend(u.dom(),c)}catch(l){wp(f,n,o,t,e)}else wp(f,n,o,t,e)}})},Sp=function(t){var e=je.fromDom(t.anchorNode),n=je.fromDom(t.focusNode);return mp(e,t.anchorOffset,n,t.focusOffset)?j.some(lp(je.fromDom(t.anchorNode),t.anchorOffset,je.fromDom(t.focusNode),t.focusOffset)):function(t){if(0<t.rangeCount){var e=t.getRangeAt(0),n=t.getRangeAt(t.rangeCount-1);return j.some(lp(je.fromDom(e.startContainer),e.startOffset,je.fromDom(n.endContainer),n.endOffset))}return j.none()}(t)},Cp=function(t){return j.from(t.getSelection()).filter(function(t){return 0<t.rangeCount}).bind(Sp)},Op=function(t,e){var i,n,o,r,a=yp(i=t,e).match({ltr:function(t,e,n,o){var r=i.document.createRange();return r.setStart(t.dom(),e),r.setEnd(n.dom(),o),r},rtl:function(t,e,n,o){var r=i.document.createRange();return r.setStart(n.dom(),o),r.setEnd(t.dom(),e),r}});return o=(n=a).getClientRects(),0<(r=0<o.length?o[0]:n.getBoundingClientRect()).width||0<r.height?j.some(r).map(pp):j.none()},zp=function(t){return{left:t.left,top:t.top,right:t.right,bottom:t.bottom,width:U(2),height:t.height}},Mp=function(t){return{left:U(t.left),top:U(t.top),right:U(t.right),bottom:U(t.bottom),width:U(t.width),height:U(t.height)}},Tp=function(o){if(o.collapsed){var r=je.fromDom(o.startContainer);return cn(r).bind(function(t){var e,n=dp(r,o.startOffset,t,"img"===wn(e=t)?1:ap(e).fold(function(){return ln(e).length},function(t){return t.length}));return Op(o.startContainer.ownerDocument.defaultView,n).map(zp).map(Y)}).getOr([])}return E(o.getClientRects(),Mp)},Hp=function(t){var e=t.getSelection();return e!==undefined&&0<e.rangeCount?Tp(e.getRangeAt(0)):[]},Vp=function(t){t.focus();var e=je.fromDom(t.document.body);(Li().exists(function(t){return T(["input","textarea"],wn(t))})?function(t){setTimeout(function(){t()},0)}:u)(function(){Li().each(Fi),Ii(e)})},Ep="data-"+Sa.resolve("last-outer-height"),Ap=function(t,e){Mn(t,Ep,e)},Bp=function(t){return{top:U(t.top()),bottom:U(t.top()+t.height())}},Dp=function(t,e){var n=op(e,Ep),o=t.innerHeight;return o<n?j.some(n-o):j.none()},_p=function(t,a){var e=je.fromDom(a.document.body),n=Gg(je.fromDom(t),"resize",function(){Dp(t,e).each(function(i){var t,e;(t=a,e=Hp(t),0<e.length?j.some(e[0]).map(Bp):j.none()).each(function(t){var e,n,o,r=(e=a,o=i,(n=t).top()>e.innerHeight||n.bottom()>e.innerHeight?Math.min(o,n.bottom()-e.innerHeight+50):0);0!==r&&a.scrollTo(a.pageXOffset,a.pageYOffset+r)})}),Ap(e,t.innerHeight)});return Ap(e,t.innerHeight),{toEditing:function(){Vp(a)},destroy:function(){n.unbind()}}},Rp=function(t){return j.some(je.fromDom(t.dom().contentWindow.document.body))},Ip=function(t){return j.some(je.fromDom(t.dom().contentWindow.document))},Fp=function(t){return j.from(t.dom().contentWindow)},Lp=function(t){return Fp(t).bind(Cp)},Pp=function(t){return t.getFrame()},jp=function(t,n){return function(e){return e[t].getOrThunk(function(){var t=Pp(e);return function(){return n(t)}})()}},Np=function(t,e,n,o){return t[n].getOrThunk(function(){return function(t){return Gg(e,o,t)}})},Up=function(t){return{left:U(t.left),top:U(t.top),right:U(t.right),bottom:U(t.bottom),width:U(t.width),height:U(t.height)}},Wp={getBody:jp("getBody",Rp),getDoc:jp("getDoc",Ip),getWin:jp("getWin",Fp),getSelection:jp("getSelection",Lp),getFrame:Pp,getActiveApi:function(u){var c=Pp(u);return Rp(c).bind(function(a){return Ip(c).bind(function(i){return Fp(c).map(function(r){var t=je.fromDom(i.dom().documentElement),e=u.getCursorBox.getOrThunk(function(){return function(){return(t=r,Cp(t).map(function(t){return dp(t.start(),t.soffset(),t.finish(),t.foffset())})).bind(function(t){return Op(r,t).orThunk(function(){return Cp(r).filter(function(t){return rn(t.start(),t.finish())&&t.soffset()===t.foffset()}).bind(function(t){var e=t.start().dom().getBoundingClientRect();return 0<e.width||0<e.height?j.some(e).map(Up):j.none()})})});var t}}),n=u.setSelection.getOrThunk(function(){return function(t,e,n,o){kp(r,t,e,n,o)}}),o=u.clearSelection.getOrThunk(function(){return function(){r.getSelection().removeAllRanges()}});return{body:U(a),doc:U(i),win:U(r),html:U(t),getSelection:f(Lp,c),setSelection:n,clearSelection:o,frame:U(c),onKeyup:Np(u,i,"onKeyup","keyup"),onNodeChanged:Np(u,i,"onNodeChanged","selectionchange"),onDomChanged:u.onDomChanged,onScrollToCursor:u.onScrollToCursor,onScrollToElement:u.onScrollToElement,onToReading:u.onToReading,onToEditing:u.onToEditing,onToolbarScrollStart:u.onToolbarScrollStart,onTouchContent:u.onTouchContent,onTapContent:u.onTapContent,onTouchToolstrip:u.onTouchToolstrip,getCursorBox:e}})})})}},Gp="data-ephox-mobile-fullscreen-style",Xp="position:absolute!important;",$p="top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;",qp=ye.detect().os.isAndroid(),Yp=function(t,e){var n,o,r,i=function(o){return function(t){var e=Hn(t,"style"),n=e===undefined?"no-styles":e.trim();n!==o&&(Mn(t,Gp,n),Mn(t,"style",o))}},a=(n="*",Wa(t,function(t){return tn(t,n)},o)),u=W(a,function(t){var e;return e="*",Ga(t,function(t){return tn(t,e)})}),c=(r=_a(e,"background-color"))!==undefined&&""!==r?"background-color:"+r+"!important":"background-color:rgb(255,255,255)!important;";A(u,i("display:none!important;")),A(a,i(Xp+$p+c)),i((!0===qp?"":Xp)+$p+c)(t)},Kp=function(){var t=nn("["+Gp+"]");A(t,function(t){var e=Hn(t,Gp);"no-styles"!==e?Mn(t,"style",e):En(t,"style"),En(t,Gp)})},Jp=function(){var e=$a("head").getOrDie(),t=$a('meta[name="viewport"]').getOrThunk(function(){var t=je.fromTag("meta");return Mn(t,"name","viewport"),gn(e,t),t}),n=Hn(t,"content");return{maximize:function(){Mn(t,"content","width=device-width, initial-scale=1.0, user-scalable=no, maximum-scale=1.0")},restore:function(){n!==undefined&&null!==n&&0<n.length?Mn(t,"content",n):Mn(t,"content","user-scalable=yes")}}},Qp=function(e,t){var n=Jp(),o=th(),r=th();return{enter:function(){t.hide(),Hi(e.container,Sa.resolve("fullscreen-maximized")),Hi(e.container,Sa.resolve("android-maximized")),n.maximize(),Hi(e.body,Sa.resolve("android-scroll-reload")),o.set(_p(e.win,Wp.getWin(e.editor).getOrDie("no"))),Wp.getActiveApi(e.editor).each(function(t){Yp(e.container,t.body()),r.set(np(t,e.toolstrip,e.alloy))})},exit:function(){n.restore(),t.show(),Vi(e.container,Sa.resolve("fullscreen-maximized")),Vi(e.container,Sa.resolve("android-maximized")),Kp(),Vi(e.body,Sa.resolve("android-scroll-reload")),r.clear(),o.clear()}}},Zp=function(n,o){var r=null;return{cancel:function(){null!==r&&(clearTimeout(r),r=null)},throttle:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];null!==r&&clearTimeout(r),r=setTimeout(function(){n.apply(null,t),r=null},o)}}},tv=function(t,e){var n,o,r,i=Ud(Cm.sketch({dom:wl('<div aria-hidden="true" class="${prefix}-mask-tap-icon"></div>'),containerBehaviours:bi([ba.config({toggleClass:Sa.resolve("mask-tap-icon-selected"),toggleOnExecute:!1})])})),a=(n=t,o=200,r=null,{cancel:function(){null!==r&&(clearTimeout(r),r=null)},throttle:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];null===r&&(r=setTimeout(function(){n.apply(null,t),r=null},o))}});return Cm.sketch({dom:wl('<div class="${prefix}-disabled-mask"></div>'),components:[Cm.sketch({dom:wl('<div class="${prefix}-content-container"></div>'),components:[vl.sketch({dom:wl('<div class="${prefix}-content-tap-section"></div>'),components:[i.asSpec()],action:function(t){a.throttle()},buttonBehaviours:bi([ba.config({toggleClass:Sa.resolve("mask-tap-icon-selected")})])})]})]})},ev=Yo([kr("editor",[br("getFrame"),Or("getBody"),Or("getDoc"),Or("getWin"),Or("getSelection"),Or("setSelection"),Or("clearSelection"),Or("cursorSaver"),Or("onKeyup"),Or("onNodeChanged"),Or("getCursorBox"),br("onDomChanged"),Vr("onTouchContent",P),Vr("onTapContent",P),Vr("onTouchToolstrip",P),Vr("onScrollToCursor",U({unbind:P})),Vr("onScrollToElement",U({unbind:P})),Vr("onToEditing",U({unbind:P})),Vr("onToReading",U({unbind:P})),Vr("onToolbarScrollStart",b)]),br("socket"),br("toolstrip"),br("dropup"),br("toolbar"),br("container"),br("alloy"),Ir("win",function(t){return an(t.socket).dom().defaultView}),Ir("body",function(t){return je.fromDom(t.socket.dom().ownerDocument.body)}),Vr("translate",b),Vr("setReadOnly",P),Vr("readOnlyOnInit",U(!0))]),nv=function(t){var e=sr("Getting AndroidWebapp schema",ev,t);Ba(e.toolstrip,"width","100%");var n=Fh(tv(function(){e.setReadOnly(e.readOnlyOnInit()),r.enter()},e.translate));e.alloy.add(n);var o={show:function(){e.alloy.add(n)},hide:function(){e.alloy.remove(n)}};gn(e.container,n.element());var r=Qp(e,o);return{setReadOnly:e.setReadOnly,refreshStructure:P,enter:r.enter,exit:r.exit,destroy:P}},ov=U([Vr("shell",!0),Qc("toolbarBehaviours",[ug])]),rv=U([Hs({name:"groups",overrides:function(t){return{behaviours:bi([ug.config({})])}}})]),iv=gl({name:"Toolbar",configFields:ov(),partFields:rv(),factory:function(e,t,n,o){var r=function(t){return e.shell?j.some(t):Ns(t,e,"groups")},i=e.shell?{behaviours:[ug.config({})],components:[]}:{behaviours:[],components:t};return{uid:e.uid,dom:e.dom,components:i.components,behaviours:ts(e.toolbarBehaviours,i.behaviours),apis:{setGroups:function(t,e){r(t).fold(function(){throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},function(t){ug.set(t,e)})}},domModification:{attributes:{role:"group"}}}},apis:{setGroups:function(t,e,n){t.setGroups(e,n)}}}),av=U([br("items"),Ki(["itemSelector"]),Qc("tgroupBehaviours",[Kc])]),uv=U([Vs({name:"items",unit:"item"})]),cv=gl({name:"ToolbarGroup",configFields:av(),partFields:uv(),factory:function(t,e,n,o){return{uid:t.uid,dom:t.dom,components:e,behaviours:ts(t.tgroupBehaviours,[Kc.config({mode:"flow",selector:t.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}}}),sv="data-"+Sa.resolve("horizontal-scroll"),lv=function(t){return"true"===Hn(t,sv)?0<(n=t).dom().scrollLeft||function(t){t.dom().scrollLeft=1;var e=0!==t.dom().scrollLeft;return t.dom().scrollLeft=0,e}(n):0<(e=t).dom().scrollTop||function(t){t.dom().scrollTop=1;var e=0!==t.dom().scrollTop;return t.dom().scrollTop=0,e}(e);var e,n},fv={exclusive:function(t,e){return Gg(t,"touchmove",function(t){Ka(t.target(),e).filter(lv).fold(function(){t.raw().preventDefault()},P)})},markAsHorizontal:function(t){Mn(t,sv,"true")}};function dv(){var e=function(t){var e=!0===t.scrollable?"${prefix}-toolbar-scrollable-group":"";return{dom:wl('<div aria-label="'+t.label+'" class="${prefix}-toolbar-group '+e+'"></div>'),tgroupBehaviours:bi([bm("adhoc-scrollable-toolbar",!0===t.scrollable?[ii(function(t,e){Ba(t.element(),"overflow-x","auto"),fv.markAsHorizontal(t.element()),Og.register(t.element())})]:[])]),components:[Cm.sketch({components:[cv.parts().items({})]})],markers:{itemSelector:"."+Sa.resolve("toolbar-group-item")},items:t.items}},n=Fh(iv.sketch({dom:wl('<div class="${prefix}-toolbar"></div>'),components:[iv.parts().groups({})],toolbarBehaviours:bi([ba.config({toggleClass:Sa.resolve("context-toolbar"),toggleOnExecute:!1,aria:{mode:"none"}}),Kc.config({mode:"cyclic"})]),shell:!0})),t=Fh(Cm.sketch({dom:{classes:[Sa.resolve("toolstrip")]},components:[Lh(n)],containerBehaviours:bi([ba.config({toggleClass:Sa.resolve("android-selection-context-toolbar"),toggleOnExecute:!1})])})),o=function(){iv.setGroups(n,r.get()),ba.off(n)},r=zt([]);return{wrapper:U(t),toolbar:U(n),createGroups:function(t){return E(t,g(cv.sketch,e))},setGroups:function(t){r.set(t),o()},setContextToolbar:function(t){ba.on(n),iv.setGroups(n,t)},restoreToolbar:function(){ba.isOn(n)&&o()},refresh:function(){},focus:function(){Kc.focusIn(n)}}}var mv=function(t,e){ug.append(t,Lh(e))},hv=function(t,e){ug.remove(t,e)},gv=function(t){return Fh(vl.sketch({dom:wl('<div class="${prefix}-mask-edit-icon ${prefix}-icon"></div>'),action:function(){t.run(function(t){t.setReadOnly(!1)})}}))},pv=function(){return Fh(Cm.sketch({dom:wl('<div class="${prefix}-editor-socket"></div>'),components:[],containerBehaviours:bi([ug.config({})])}))},vv=function(t,e,n,o){(!0===n?Ri.toAlpha:Ri.toOmega)(o),(n?mv:hv)(t,e)},bv=function(e,t){return t.getAnimationRoot.fold(function(){return e.element()},function(t){return t(e)})},yv=function(t){return t.dimension.property},xv=function(t,e){return t.dimension.getDimension(e)},wv=function(t,e){var n=bv(t,e);zh(n,[e.shrinkingClass,e.growingClass])},kv=function(t,e){Vi(t.element(),e.openClass),Hi(t.element(),e.closedClass),Ba(t.element(),yv(e),"0px"),La(t.element())},Sv=function(t,e){Vi(t.element(),e.closedClass),Hi(t.element(),e.openClass),Fa(t.element(),yv(e))},Cv=function(t,e,n,o){n.setCollapsed(),Ba(t.element(),yv(e),xv(e,t.element())),La(t.element()),wv(t,e),kv(t,e),e.onStartShrink(t),e.onShrunk(t)},Ov=function(t,e,n,o){var r=o.getOrThunk(function(){return xv(e,t.element())});n.setCollapsed(),Ba(t.element(),yv(e),r),La(t.element());var i=bv(t,e);Hi(i,e.shrinkingClass),kv(t,e),e.onStartShrink(t)},zv=function(t,e,n){var o=xv(e,t.element());("0px"===o?Cv:Ov)(t,e,n,j.some(o))},Mv=function(t,e,n){Sv(t,e);var o=xv(e,t.element());kv(t,e);var r=bv(t,e);Hi(r,e.growingClass),Sv(t,e),Ba(t.element(),yv(e),o),n.setExpanded(),e.onStartGrow(t)},Tv=function(t,e,n){var o=bv(t,e);return!0===Ai(o,e.growingClass)},Hv=function(t,e,n){var o=bv(t,e);return!0===Ai(o,e.shrinkingClass)},Vv=Object.freeze({grow:function(t,e,n){n.isExpanded()||Mv(t,e,n)},shrink:function(t,e,n){n.isExpanded()&&zv(t,e,n)},immediateShrink:function(t,e,n){n.isExpanded()&&Cv(t,e,n,j.none())},hasGrown:function(t,e,n){return n.isExpanded()},hasShrunk:function(t,e,n){return n.isCollapsed()},isGrowing:Tv,isShrinking:Hv,isTransitioning:function(t,e,n){return!0===Tv(t,e)||!0===Hv(t,e)},toggleGrow:function(t,e,n){(n.isExpanded()?zv:Mv)(t,e,n)},disableTransitions:wv}),Ev=Object.freeze({exhibit:function(t,e){var n=e.expanded;return li(n?{classes:[e.openClass],styles:{}}:{classes:[e.closedClass],styles:kt(e.dimension.property,"0px")})},events:function(n,o){return Xr([ni(Wt(),function(t,e){e.event().raw().propertyName===n.dimension.property&&(wv(t,n),o.isExpanded()&&Fa(t.element(),n.dimension.property),(o.isExpanded()?n.onGrown:n.onShrunk)(t))})])}}),Av=[br("closedClass"),br("openClass"),br("shrinkingClass"),br("growingClass"),Or("getAnimationRoot"),Qi("onShrunk"),Qi("onStartShrink"),Qi("onGrown"),Qi("onStartGrow"),Vr("expanded",!1),yr("dimension",fr("property",{width:[na("property","width"),na("getDimension",function(t){return lf(t)+"px"})],height:[na("property","height"),na("getDimension",function(t){return Na(t)+"px"})]}))],Bv=xi({fields:Av,name:"sliding",active:Ev,apis:Vv,state:Object.freeze({init:function(t){var e=zt(t.expanded);return vi({isExpanded:function(){return!0===e.get()},isCollapsed:function(){return!1===e.get()},setCollapsed:f(e.set,!1),setExpanded:f(e.set,!0),readState:function(){return"expanded: "+e.get()}})}})}),Dv=function(e,n){var o=Fh(Cm.sketch({dom:{tag:"div",classes:[Sa.resolve("dropup")]},components:[],containerBehaviours:bi([ug.config({}),Bv.config({closedClass:Sa.resolve("dropup-closed"),openClass:Sa.resolve("dropup-open"),shrinkingClass:Sa.resolve("dropup-shrinking"),growingClass:Sa.resolve("dropup-growing"),dimension:{property:"height"},onShrunk:function(t){e(),n(),ug.set(t,[])},onGrown:function(t){e(),n()}}),xa(function(t,e){r(P)})])})),r=function(t){window.requestAnimationFrame(function(){t(),Bv.shrink(o)})};return{appear:function(t,e,n){!0===Bv.hasShrunk(o)&&!1===Bv.isTransitioning(o)&&window.requestAnimationFrame(function(){e(n),ug.set(o,[t()]),Bv.grow(o)})},disappear:r,component:U(o),element:o.element}},_v=function(t,e,n){return Ka(t,e,n).isSome()},Rv=ye.detect().browser.isFirefox(),Iv=qo([wr("triggerEvent"),Vr("stopBackspace",!0)]),Fv=function(e,t){var n,o,r,i,a=sr("Getting GUI events settings",Iv,t),u=ye.detect().deviceType.isTouch()?["touchstart","touchmove","touchend","gesturestart"]:["mousedown","mouseup","mouseover","mousemove","mouseout","click"],c=Zg(a),s=E(u.concat(["selectstart","input","contextmenu","change","paste","transitionend","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),function(t){return Gg(e,t,function(e){c.fireIfReady(e,t).each(function(t){t&&e.kill()}),a.triggerEvent(t,e)&&e.kill()})}),l=Gg(e,"keydown",function(t){var e;a.triggerEvent("keydown",t)?t.kill():!0!==a.stopBackspace||8!==(e=t).raw().which||T(["input","textarea"],wn(e.target()))||_v(e.target(),'[contenteditable="true"]')||t.prevent()}),f=(n=e,o=function(t){a.triggerEvent("focusin",t)&&t.kill()},Rv?Xg(n,"focus",o):Gg(n,"focusin",o)),d=(r=e,i=function(t){a.triggerEvent("focusout",t)&&t.kill(),setTimeout(function(){a.triggerEvent(ke(),t)},0)},Rv?Xg(r,"blur",i):Gg(r,"focusout",i));return{unbind:function(){A(s,function(t){t.unbind()}),l.unbind(),f.unbind(),d.unbind()}}},Lv=function(t,e){var n=wt(t,"target").map(function(t){return t()}).getOr(e);return zt(n)},Pv=mt([{stopped:[]},{resume:["element"]},{complete:[]}]),jv=function(t,o,e,n,r,i){var a,u,c,s,l=t(o,n),f=(a=e,u=r,c=zt(!1),s=zt(!1),{stop:function(){c.set(!0)},cut:function(){s.set(!0)},isStopped:c.get,isCut:s.get,event:U(a),setSource:u.set,getSource:u.get});return l.fold(function(){return i.logEventNoHandlers(o,n),Pv.complete()},function(e){var n=e.descHandler();return ph(n)(f),f.isStopped()?(i.logEventStopped(o,e.element(),n.purpose()),Pv.stopped()):f.isCut()?(i.logEventCut(o,e.element(),n.purpose()),Pv.complete()):cn(e.element()).fold(function(){return i.logNoParent(o,e.element(),n.purpose()),Pv.complete()},function(t){return i.logEventResponse(o,e.element(),n.purpose()),Pv.resume(t)})})},Nv=function(e,n,o,t,r,i){return jv(e,n,o,t,r,i).fold(function(){return!0},function(t){return Nv(e,n,o,t,r,i)},function(){return!1})},Uv=function(t,e,n){var o,r,i=(o=e,r=zt(!1),{stop:function(){r.set(!0)},cut:P,isStopped:r.get,isCut:U(!1),event:U(o),setSource:a("Cannot set source of a broadcasted event"),getSource:a("Cannot get source of a broadcasted event")});return A(t,function(t){var e=t.descHandler();ph(e)(i)}),i.isStopped()},Wv=function(t,e,n,o,r){var i=Lv(n,o);return Nv(t,e,n,o,i,r)},Gv=Ne("element","descHandler"),Xv=function(t,e){return{id:U(t),descHandler:U(e)}};function $v(){var i={};return{registerId:function(o,r,t){et(t,function(t,e){var n=i[e]!==undefined?i[e]:{};n[r]=gh(t,o),i[e]=n})},unregisterId:function(n){et(i,function(t,e){t.hasOwnProperty(n)&&delete t[n]})},filterByType:function(t){return wt(i,t).map(function(t){return rt(t,function(t,e){return Xv(e,t)})}).getOr([])},find:function(t,e,n){var r=yt(e)(i);return Gr(n,function(t){return n=r,il(o=t).fold(function(){return j.none()},function(t){var e=yt(t);return n.bind(e).map(function(t){return Gv(o,t)})});var n,o},t)}}}function qv(){var o=$v(),r={},i=function(o){var t=o.element();return il(t).fold(function(){return t="uid-",e=o.element(),n=$n(nl+t),rl(e,n),n;var t,e,n},function(t){return t})},a=function(t){il(t.element()).each(function(t){r[t]=undefined,o.unregisterId(t)})};return{find:function(t,e,n){return o.find(t,e,n)},filter:function(t){return o.filterByType(t)},register:function(t){var e=i(t);Ot(r,e)&&function(t,e){var n=r[e];if(n!==t)throw new Error('The tagId "'+e+'" is already used by: '+Dn(n.element())+"\nCannot use it for: "+Dn(t.element())+"\nThe conflicting element is"+(no(n.element())?" ":" not ")+"already in the DOM");a(t)}(t,e);var n=[t];o.registerId(n,e,t.events()),r[e]=t},unregister:a,getById:function(t){return yt(t)(r)}}}var Yv=function(n){var o=function(e){return cn(n.element()).fold(function(){return!0},function(t){return rn(e,t)})},r=qv(),s=function(t,e){return r.find(o,t,e)},t=Fv(n.element(),{triggerEvent:function(a,u){return Nn(a,u.target(),function(t){return e=s,n=a,r=t,i=(o=u).target(),Wv(e,n,o,i,r);var e,n,o,r,i})}}),i={debugInfo:U("real"),triggerEvent:function(e,n,o){Nn(e,n,function(t){Wv(s,e,o,n,t)})},triggerFocus:function(u,c){il(u).fold(function(){Ii(u)},function(t){Nn(we(),u,function(t){var e,n,o,r,i,a;e=s,n=we(),o={originator:U(c),kill:P,prevent:P,target:U(u)},i=t,a=Lv(o,r=u),jv(e,n,o,r,a,i)})})},triggerEscape:function(t,e){i.triggerEvent("keydown",t.element(),e.event())},getByUid:function(t){return h(t)},getByDom:function(t){return g(t)},build:Fh,addToGui:function(t){u(t)},removeFromGui:function(t){c(t)},addToWorld:function(t){e(t)},removeFromWorld:function(t){a(t)},broadcast:function(t){f(t)},broadcastOn:function(t,e){d(t,e)},broadcastEvent:function(t,e){m(t,e)},isConnected:U(!0)},e=function(t){t.connect(i),Cn(t.element())||(r.register(t),A(t.components(),e),i.triggerEvent(Ee(),t.element(),{target:U(t.element())}))},a=function(t){Cn(t.element())||(A(t.components(),a),r.unregister(t)),t.disconnect()},u=function(t){uo(n,t)},c=function(t){lo(t)},l=function(n){var t=r.filter(Se());A(t,function(t){var e=t.descHandler();ph(e)(n)})},f=function(t){l({universal:U(!0),data:U(t)})},d=function(t,e){l({universal:U(!1),channels:U(t),data:U(e)})},m=function(t,e){var n=r.filter(t);return Uv(n,e)},h=function(t){return r.getById(t).fold(function(){return dt.error(new Error('Could not find component with uid: "'+t+'" in system.'))},dt.value)},g=function(t){var e=il(t).getOr("not found");return h(e)};return e(n),{root:U(n),element:n.element,destroy:function(){t.unbind(),bn(n.element())},add:u,remove:c,getByUid:h,getByDom:g,addToWorld:e,removeFromWorld:a,broadcast:f,broadcastOn:d,broadcastEvent:m}},Kv=U(Sa.resolve("readonly-mode")),Jv=U(Sa.resolve("edit-mode"));function Qv(t){var e=Fh(Cm.sketch({dom:{classes:[Sa.resolve("outer-container")].concat(t.classes)},containerBehaviours:bi([Ri.config({alpha:Kv(),omega:Jv()})])}));return Yv(e)}var Zv=function(t,e){var n=je.fromTag("input");Da(n,{opacity:"0",position:"absolute",top:"-1000px",left:"-1000px"}),gn(t,n),Ii(n),e(n),bn(n)},tb=function(t){var e=t.getSelection();if(0<e.rangeCount){var n=e.getRangeAt(0),o=t.document.createRange();o.setStart(n.startContainer,n.startOffset),o.setEnd(n.endContainer,n.endOffset),e.removeAllRanges(),e.addRange(o)}},eb=function(t,e){Li().each(function(t){rn(t,e)||Fi(t)}),t.focus(),Ii(je.fromDom(t.document.body)),tb(t)},nb={stubborn:function(t,e,n,o){var r=function(){eb(e,o)},i=Gg(n,"keydown",function(t){T(["input","textarea"],wn(t.target()))||r()});return{toReading:function(){Zv(t,Fi)},toEditing:r,onToolbarTouch:function(){},destroy:function(){i.unbind()}}},timid:function(t,e,n,o){var r=function(){Fi(o)};return{toReading:function(){r()},toEditing:function(){eb(e,o)},onToolbarTouch:function(){r()},destroy:P}}},ob=function(n,o,r,i,t){var a=function(){o.run(function(t){t.refreshSelection()})},e=function(t,e){var n=t-i.dom().scrollTop;o.run(function(t){t.scrollIntoView(n,n+e)})},u=function(){o.run(function(t){t.clearSelection()})},c=function(){n.getCursorBox().each(function(t){e(t.top(),t.height())}),o.run(function(t){t.syncHeight()})},s=tp(n),l=Zp(c,300),f=[n.onKeyup(function(){u(),l.throttle()}),n.onNodeChanged(a),n.onDomChanged(l.throttle),n.onDomChanged(a),n.onScrollToCursor(function(t){t.preventDefault(),l.throttle()}),n.onScrollToElement(function(t){t.element(),e(o,i)}),n.onToEditing(function(){o.run(function(t){t.toEditing()})}),n.onToReading(function(){o.run(function(t){t.toReading()})}),Gg(n.doc(),"touchend",function(t){rn(n.html(),t.target())||rn(n.body(),t.target())}),Gg(r,"transitionend",function(t){var e;"height"===t.raw().propertyName&&(e=Na(r),o.run(function(t){t.setViewportOffset(e)}),a(),c())}),Xg(r,"touchstart",function(t){var e;o.run(function(t){t.highlightSelection()}),e=t,o.run(function(t){t.onToolbarTouch(e)}),n.onTouchToolstrip()}),Gg(n.body(),"touchstart",function(t){u(),n.onTouchContent(),s.fireTouchstart(t)}),s.onTouchmove(),s.onTouchend(),Gg(n.body(),"click",function(t){t.kill()}),Gg(r,"touchmove",function(){n.onToolbarScrollStart()})];return{destroy:function(){A(f,function(t){t.unbind()})}}},rb=function(t){var n=j.none(),e=[],o=function(t){r()?a(t):e.push(t)},r=function(){return n.isSome()},i=function(t){A(t,a)},a=function(e){n.each(function(t){setTimeout(function(){e(t)},0)})};return t(function(t){n=j.some(t),i(e),e=[]}),{get:o,map:function(n){return rb(function(e){o(function(t){e(n(t))})})},isReady:r}},ib={nu:rb,pure:function(e){return rb(function(t){t(e)})}},ab=function(e){var t=function(t){var o;e((o=t,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this;setTimeout(function(){o.apply(n,t)},0)}))},n=function(){return ib.nu(t)};return{map:function(o){return ab(function(n){t(function(t){var e=o(t);n(e)})})},bind:function(n){return ab(function(e){t(function(t){n(t).get(e)})})},anonBind:function(n){return ab(function(e){t(function(t){n.get(e)})})},toLazy:n,toCached:function(){var e=null;return ab(function(t){null===e&&(e=n()),e.get(t)})},get:t}},ub={nu:ab,pure:function(e){return ab(function(t){t(e)})}},cb=function(t,e,n){return Math.abs(t-e)<=n?j.none():t<e?j.some(t+n):j.some(t-n)},sb=function(){var s=null;return{animate:function(o,r,t,i,e,n){var a=!1,u=function(t){a=!0,e(t)};clearInterval(s);var c=function(t){clearInterval(s),u(t)};s=setInterval(function(){var n=o();cb(n,r,t).fold(function(){clearInterval(s),u(r)},function(t){if(i(t,c),!a){var e=o();(e!==t||Math.abs(e-r)>Math.abs(n-r))&&(clearInterval(s),u(r))}})},n)}}},lb=function(e,n){return Tt([{width:320,height:480,keyboard:{portrait:300,landscape:240}},{width:320,height:568,keyboard:{portrait:300,landscape:240}},{width:375,height:667,keyboard:{portrait:305,landscape:240}},{width:414,height:736,keyboard:{portrait:320,landscape:240}},{width:768,height:1024,keyboard:{portrait:320,landscape:400}},{width:1024,height:1366,keyboard:{portrait:380,landscape:460}}],function(t){return e<=t.width&&n<=t.height?j.some(t.keyboard):j.none()}).getOr({portrait:n/5,landscape:e/4})},fb=function(t){var e,n=qg(t).isPortrait(),o=lb((e=t).screen.width,e.screen.height),r=n?o.portrait:o.landscape;return(n?t.screen.height:t.screen.width)-t.innerHeight>r?0:r},db=function(t,e){var n=an(t).dom().defaultView;return Na(t)+Na(e)-fb(n)},mb=db,hb=function(t,e,n){var o=db(e,n),r=Na(e)+Na(n)-o;Ba(t,"padding-bottom",r+"px")},gb=mt([{fixed:["element","property","offsetY"]},{scroller:["element","offsetY"]}]),pb="data-"+Sa.resolve("position-y-fixed"),vb="data-"+Sa.resolve("y-property"),bb="data-"+Sa.resolve("scrolling"),yb="data-"+Sa.resolve("last-window-height"),xb=function(t){return op(t,pb)},wb=function(t,e){var n=Hn(t,vb);return gb.fixed(t,n,e)},kb=function(t,e){return gb.scroller(t,e)},Sb=function(t){var e=xb(t);return("true"===Hn(t,bb)?kb:wb)(t,e)},Cb=function(t,e,n){var o=an(t).dom().defaultView.innerHeight;return Mn(t,yb,o+"px"),o-e-n},Ob=function(t){var e=Xa(t,"["+pb+"]");return E(e,Sb)},zb=function(o,r,i,a){var t,e,n,u,c,s,l,f,d=an(o).dom().defaultView,m=(f=Hn(l=i,"style"),Da(l,{position:"absolute",top:"0px"}),Mn(l,pb,"0px"),Mn(l,vb,"top"),{restore:function(){Mn(l,"style",f||""),En(l,pb),En(l,vb)}}),h=Na(i),g=Na(a),p=Cb(o,h,g),v=(n=h,u=p,s=Hn(c=o,"style"),Og.register(c),Da(c,{position:"absolute",height:u+"px",width:"100%",top:n+"px"}),Mn(c,pb,n+"px"),Mn(c,bb,"true"),Mn(c,vb,"top"),{restore:function(){Og.deregister(c),Mn(c,"style",s||""),En(c,pb),En(c,bb),En(c,vb)}}),b=(e=Hn(t=a,"style"),Da(t,{position:"absolute",bottom:"0px"}),Mn(t,pb,"0px"),Mn(t,vb,"bottom"),{restore:function(){Mn(t,"style",e||""),En(t,pb),En(t,vb)}}),y=!0,x=function(){var t=d.innerHeight;return op(o,yb)<t},w=function(){if(y){var t=Na(i),e=Na(a),n=Cb(o,t,e);Mn(o,pb,t+"px"),Ba(o,"height",n+"px"),Ba(a,"bottom",-(t+n+e)+"px"),hb(r,o,a)}};return hb(r,o,a),{setViewportOffset:function(t){Mn(o,pb,t+"px"),w()},isExpanding:x,isShrinking:k(x),refresh:w,restore:function(){y=!1,m.restore(),v.restore(),b.restore()}}},Mb=xb,Tb=sb(),Hb="data-"+Sa.resolve("last-scroll-top"),Vb=function(t){var e=Ia(t,"top").getOr("0");return parseInt(e,10)},Eb=function(t){return parseInt(t.dom().scrollTop,10)},Ab=function(t,e){var n=e+Mb(t)+"px";Ba(t,"top",n)},Bb=function(n,o,r){return ub.nu(function(t){var e=f(Eb,n);Tb.animate(e,o,15,function(t){n.dom().scrollTop=t,Ba(n,"top",Vb(n)+15+"px")},function(){n.dom().scrollTop=o,Ba(n,"top",r+"px"),t(o)},10)})},Db=function(r,i){return ub.nu(function(t){var e=f(Eb,r);Mn(r,Hb,e());var n=Math.abs(i-e()),o=Math.ceil(n/10);Tb.animate(e,i,o,function(t,e){op(r,Hb)!==r.dom().scrollTop?e(r.dom().scrollTop):(r.dom().scrollTop=t,Mn(r,Hb,t))},function(){r.dom().scrollTop=i,Mn(r,Hb,i),t(i)},10)})},_b=function(i,a){return ub.nu(function(t){var e=f(Vb,i),n=function(t){Ba(i,"top",t+"px")},o=Math.abs(a-e()),r=Math.ceil(o/10);Tb.animate(e,a,r,n,function(){n(a),t(a)},10)})},Rb=function(e,n,o){var r=an(e).dom().defaultView;return ub.nu(function(t){Ab(e,o),Ab(n,o),r.scrollTo(0,o),t(o)})},Ib=function(t,e,n,o,r){var i=mb(e,n),a=f(tb,t);i<o||i<r?Db(e,e.dom().scrollTop-i+r).get(a):o<0&&Db(e,e.dom().scrollTop+o).get(a)},Fb=function(a,t){return t(function(o){var r=[],i=0;0===a.length?o([]):A(a,function(t,e){var n;t.get((n=e,function(t){r[n]=t,++i>=a.length&&o(r)}))})})},Lb=function(t,c){return t.fold(function(t,e,n){return Ba(t,e,c+(o=n)+"px"),ub.pure(o);var o},function(t,e){return r=c+(o=e),i=Ia(n=t,"top").getOr(o),a=r-parseInt(i,10),u=n.dom().scrollTop+a,Bb(n,u,r);var n,o,r,i,a,u})},Pb=function(t,e){var n=Ob(t),o=E(n,function(t){return Lb(t,e)});return Fb(o,ub.nu)},jb=function(e,n,t,o,r,i){var a=function s(n){var o=zt(ib.pure({}));return{start:function(e){var t=ib.nu(function(t){return n(e).get(t)});o.set(t)},idle:function(t){o.get().get(function(){t()})}}}(function(t){return Rb(e,n,t)}),u=Zp(function(){a.idle(function(){Pb(t,o.pageYOffset).get(function(){var t;(t=Hp(i),j.from(t[0]).bind(function(t){var e=t.top()-n.dom().scrollTop;return e>o.innerHeight+5||e<-5?j.some({top:U(e),bottom:U(e+t.height())}):j.none()})).each(function(t){n.dom().scrollTop=n.dom().scrollTop+t.top()}),a.start(0),r.refresh()})})},1e3),c=Gg(je.fromDom(o),"scroll",function(){o.pageYOffset<0||u.throttle()});return Pb(t,o.pageYOffset).get(b),{unbind:c.unbind}},Nb=function(t){var n=t.cWin(),e=t.ceBody(),o=t.socket(),r=t.toolstrip(),i=t.toolbar(),a=t.contentElement(),u=t.keyboardType(),c=t.outerWindow(),s=t.dropup(),l=zb(o,e,r,s),f=u(t.outerBody(),n,oo(),a,r,i),d=Yg(c,{onChange:P,onReady:l.refresh});d.onAdjustment(function(){l.refresh()});var m=Gg(je.fromDom(c),"resize",function(){l.isExpanding()&&l.refresh()}),h=jb(r,o,t.outerBody(),c,l,n),g=function v(n,e){var t=n.document,o=je.fromTag("div");Hi(o,Sa.resolve("unfocused-selections")),gn(je.fromDom(t.documentElement),o);var r=Gg(o,"touchstart",function(t){t.prevent(),eb(n,e),a()}),i=function(t){var e=je.fromTag("span");return Oh(e,[Sa.resolve("layer-editor"),Sa.resolve("unfocused-selection")]),Da(e,{left:t.left()+"px",top:t.top()+"px",width:t.width()+"px",height:t.height()+"px"}),e},a=function(){vn(o)};return{update:function(){a();var t=Hp(n),e=E(t,i);pn(o,e)},isActive:function(){return 0<ln(o).length},destroy:function(){r.unbind(),bn(o)},clear:a}}(n,a),p=function(){g.clear()};return{toEditing:function(){f.toEditing(),p()},toReading:function(){f.toReading()},onToolbarTouch:function(t){f.onToolbarTouch(t)},refreshSelection:function(){g.isActive()&&g.update()},clearSelection:p,highlightSelection:function(){g.update()},scrollIntoView:function(t,e){Ib(n,o,s,t,e)},updateToolbarPadding:P,setViewportOffset:function(t){l.setViewportOffset(t),_b(o,t).get(b)},syncHeight:function(){Ba(a,"height",a.dom().contentWindow.document.body.scrollHeight+"px")},refreshStructure:l.refresh,destroy:function(){l.restore(),d.destroy(),h.unbind(),m.unbind(),f.destroy(),g.destroy(),Zv(oo(),Fi)}}},Ub=function(o,t){var r=Jp(),i=eh(),a=eh(),u=th(),c=th();return{enter:function(){t.hide();var n=je.fromDom(document);Wp.getActiveApi(o.editor).each(function(t){i.set({socketHeight:Ia(o.socket,"height"),iframeHeight:Ia(t.frame(),"height"),outerScroll:document.body.scrollTop}),a.set({exclusives:fv.exclusive(n,"."+Og.scrollable())}),Hi(o.container,Sa.resolve("fullscreen-maximized")),Yp(o.container,t.body()),r.maximize(),Ba(o.socket,"overflow","scroll"),Ba(o.socket,"-webkit-overflow-scrolling","touch"),Ii(t.body());var e=Ge(["cWin","ceBody","socket","toolstrip","toolbar","dropup","contentElement","cursor","keyboardType","isScrolling","outerWindow","outerBody"],[]);u.set(Nb(e({cWin:t.win(),ceBody:t.body(),socket:o.socket,toolstrip:o.toolstrip,toolbar:o.toolbar,dropup:o.dropup.element(),contentElement:t.frame(),cursor:P,outerBody:o.body,outerWindow:o.win,keyboardType:nb.stubborn,isScrolling:function(){return a.get().exists(function(t){return t.socket.isScrolling()})}}))),u.run(function(t){t.syncHeight()}),c.set(ob(t,u,o.toolstrip,o.socket,o.dropup))})},refreshStructure:function(){u.run(function(t){t.refreshStructure()})},exit:function(){r.restore(),c.clear(),u.clear(),t.show(),i.on(function(t){t.socketHeight.each(function(t){Ba(o.socket,"height",t)}),t.iframeHeight.each(function(t){Ba(o.editor.getFrame(),"height",t)}),document.body.scrollTop=t.scrollTop}),i.clear(),a.on(function(t){t.exclusives.unbind()}),a.clear(),Vi(o.container,Sa.resolve("fullscreen-maximized")),Kp(),Og.deregister(o.toolbar),Fa(o.socket,"overflow"),Fa(o.socket,"-webkit-overflow-scrolling"),Fi(o.editor.getFrame()),Wp.getActiveApi(o.editor).each(function(t){t.clearSelection()})}}},Wb=function(t){var e=sr("Getting IosWebapp schema",ev,t);Ba(e.toolstrip,"width","100%"),Ba(e.container,"position","relative");var n=Fh(tv(function(){e.setReadOnly(e.readOnlyOnInit()),o.enter()},e.translate));e.alloy.add(n);var o=Ub(e,{show:function(){e.alloy.add(n)},hide:function(){e.alloy.remove(n)}});return{setReadOnly:e.setReadOnly,refreshStructure:o.refreshStructure,enter:o.enter,exit:o.exit,destroy:P}},Gb=tinymce.util.Tools.resolve("tinymce.EditorManager"),Xb=function(t){var e=wt(t.settings,"skin_url").fold(function(){return Gb.baseURL+"/skins/oxide"},function(t){return t});return{content:e+"/content.mobile.min.css",ui:e+"/skin.mobile.min.css"}},$b=function(t,e,n){t.system().broadcastOn([Ui.formatChanged()],{command:e,state:n})},qb=function(o,t){var e=Z(t.formatter.get());A(e,function(e){t.formatter.formatChanged(e,function(t){$b(o,e,t)})}),A(["ul","ol"],function(n){t.selection.selectorChanged(n,function(t,e){$b(o,n,t)})})},Yb=(U(["x-small","small","medium","large","x-large"]),function(t){var e=function(){t._skinLoaded=!0,t.fire("SkinLoaded")};return function(){t.initialized?e():t.on("init",e)}}),Kb=U("toReading"),Jb=U("toEditing"),Qb=function(m){return{getNotificationManagerImpl:function(){return{open:b,close:P,reposition:P,getArgs:b}},renderUI:function(){var t=m.getElement(),e=Xb(m);0==(!1===m.settings.skin)?(m.contentCSS.push(e.content),ji.DOM.styleSheetLoader.load(e.ui,Yb(m))):Yb(m)();var n=function(){m.fire("scrollIntoView")},o=je.fromTag("div"),s=ye.detect().os.isAndroid()?function u(t){var e=Qv({classes:[Sa.resolve("android-container")]}),n=dv(),o=th(),r=gv(o),i=pv(),a=Dv(P,t);return e.add(n.wrapper()),e.add(i),e.add(a.component()),{system:U(e),element:e.element,init:function(t){o.set(nv(t))},exit:function(){o.run(function(t){t.exit(),ug.remove(i,r)})},setToolbarGroups:function(t){var e=n.createGroups(t);n.setGroups(e)},setContextToolbar:function(t){var e=n.createGroups(t);n.setContextToolbar(e)},focusToolbar:function(){n.focus()},restoreToolbar:function(){n.restoreToolbar()},updateMode:function(t){vv(i,r,t,e.root())},socket:U(i),dropup:U(a)}}(n):function c(t){var e=Qv({classes:[Sa.resolve("ios-container")]}),n=dv(),o=th(),r=gv(o),i=pv(),a=Dv(function(){o.run(function(t){t.refreshStructure()})},t);return e.add(n.wrapper()),e.add(i),e.add(a.component()),{system:U(e),element:e.element,init:function(t){o.set(Wb(t))},exit:function(){o.run(function(t){ug.remove(i,r),t.exit()})},setToolbarGroups:function(t){var e=n.createGroups(t);n.setGroups(e)},setContextToolbar:function(t){var e=n.createGroups(t);n.setContextToolbar(e)},focusToolbar:function(){n.focus()},restoreToolbar:function(){n.restoreToolbar()},updateMode:function(t){vv(i,r,t,e.root())},socket:U(i),dropup:U(a)}}(n),r=je.fromDom(t);mn(r,o),mo(o,s.system());var i=t.ownerDocument.defaultView,l=Yg(i,{onChange:function(){s.system().broadcastOn([Ui.orientationChanged()],{width:Kg(i)})},onReady:P}),f=function(t,e,n,o){!1===o&&m.selection.collapse();var r=a(t,e,n);s.setToolbarGroups(!0===o?r.readOnly:r.main),m.setMode(!0===o?"readonly":"design"),m.fire(!0===o?Kb():Jb()),s.updateMode(o)},a=function(t,e,n){var o=t.get();return{readOnly:o.backToMask.concat(e.get()),main:o.backToMask.concat(n.get())}},d=function(t,e){return m.on(t,e),{unbind:function(){m.off(t)}}};return m.on("init",function(){s.init({editor:{getFrame:function(){return je.fromDom(m.contentAreaContainer.querySelector("iframe"))},onDomChanged:function(){return{unbind:P}},onToReading:function(t){return d(Kb(),t)},onToEditing:function(t){return d(Jb(),t)},onScrollToCursor:function(e){return m.on("scrollIntoView",function(t){e(t)}),{unbind:function(){m.off("scrollIntoView"),l.destroy()}}},onTouchToolstrip:function(){n()},onTouchContent:function(){var t,e=je.fromDom(m.editorContainer.querySelector("."+Sa.resolve("toolbar")));(t=e,Pi(t).bind(function(t){return s.system().getByDom(t).toOption()})).each(Qn),s.restoreToolbar(),n()},onTapContent:function(t){var e=t.target();"img"===wn(e)?(m.selection.select(e.dom()),t.kill()):"a"===wn(e)&&s.system().getByDom(je.fromDom(m.editorContainer)).each(function(t){Ri.isAlpha(t)&&Ni(e.dom())})}},container:je.fromDom(m.editorContainer),socket:je.fromDom(m.contentAreaContainer),toolstrip:je.fromDom(m.editorContainer.querySelector("."+Sa.resolve("toolstrip"))),toolbar:je.fromDom(m.editorContainer.querySelector("."+Sa.resolve("toolbar"))),dropup:s.dropup(),alloy:s.system(),translate:P,setReadOnly:function(t){f(c,u,a,t)},readOnlyOnInit:function(){return!1}});var n=function(){s.dropup().disappear(function(){s.system().broadcastOn([Ui.dropupDismissed()],{})})},t={label:"The first group",scrollable:!1,items:[Ol.forToolbar("back",function(){m.selection.collapse(),s.exit()},{})]},e={label:"Back to read only",scrollable:!1,items:[Ol.forToolbar("readonly-back",function(){f(c,u,a,!0)},{})]},o=Lg(s,m),r=Pg(m.settings,o),i={label:"The extra group",scrollable:!1,items:[]},a=zt([{label:"the action group",scrollable:!0,items:r},i]),u=zt([{label:"The read only mode group",scrollable:!0,items:[]},i]),c=zt({backToMask:[t],backToReadOnly:[e]});qb(s,m)}),{iframeContainer:s.socket().element().dom(),editorContainer:s.element().dom()}}}};qn.add("mobile",Qb);var Zb=function(e,t){return(n=t,Ur(n,function(t){if(!Sn(t))return!1;var e=Hn(t,"id");return e!==undefined&&-1<e.indexOf("aria-owns")}).bind(function(t){var e=Hn(t,"id"),n=an(t);return Ya(n,'[aria-owns="'+e+'"]')})).exists(function(t){return ty(e,t)});var n},ty=function(e,t){return n=t,r=U(!(o=function(t){return rn(t,e.element())})),Ur(n,o,r).isSome()||Zb(e,t);var n,o,r},ey=Object.freeze({exhibit:function(t,e){return li({classes:[],styles:e.useFixed?{}:{position:"relative"}})}}),ny=function(t,e){return t!==undefined?t:e!==undefined?e:0},oy=function(t){var e,n,o=t.dom().ownerDocument,r=o.body,i=(e=je.fromDom(o),(n=e.dom())===n.window&&e instanceof Window?e:On(e)?n.defaultView||n.parentWindow:null),a=o.documentElement,u=ny(i.pageYOffset,a.scrollTop),c=ny(i.pageXOffset,a.scrollLeft),s=ny(a.clientTop,r.clientTop),l=ny(a.clientLeft,r.clientLeft);return ry(t).translate(c-l,u-s)},ry=function(t){var e,n,o,r=t.dom(),i=r.ownerDocument,a=i.body,u=je.fromDom(i.documentElement);return a===r?Ql(a.offsetLeft,a.offsetTop):(e=t,n=u||je.fromDom(document.documentElement),Nr(e,f(rn,n)).isSome()?(o=r.getBoundingClientRect(),Ql(o.left,o.top)):Ql(0,0))},iy=(ye.detect().browser.isSafari(),function(t){var e=t!==undefined?t.dom():document,n=e.body.scrollLeft||e.documentElement.scrollLeft,o=e.body.scrollTop||e.documentElement.scrollTop;return Ql(n,o)}),ay=Ge(["x","y","width","height","maxHeight","direction","classes","label","candidateYforTest"],[]),uy=Ne("position","left","top","right","bottom"),cy=mt([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),sy=cy.southeast,ly=cy.southwest,fy=cy.northeast,dy=cy.northwest,my=cy.south,hy=cy.north,gy=cy.east,py=cy.west,vy=Ne("point","width","height"),by=Ne("x","y","width","height"),yy=function(t,e,n,o){return{x:U(t),y:U(e),width:U(n),height:U(o),right:U(t+n),bottom:U(e+o)}},xy=function(t){var e=oy(t),n=ff(t),o=Ua(t);return yy(e.left(),e.top(),n,o)},wy=function(o,t){return o.view(t).fold(U([]),function(t){var e=o.owner(t),n=wy(o,e);return[t].concat(n)})},ky=Object.freeze({view:function(t){return(t.dom()===document?j.none():j.from(t.dom().defaultView.frameElement)).map(je.fromDom)},owner:function(t){return an(t)}}),Sy=function(o){var t,e,n,r,i=je.fromDom(document),a=iy(i);return(t=o,n=(e=ky).owner(t),r=wy(e,n),j.some(r)).fold(f(oy,o),function(t){var e=ry(o),n=D(t,function(t,e){var n=ry(e);return{left:t.left+n.left(),top:t.top+n.top()}},{left:0,top:0});return Ql(n.left+e.left()+a.left(),n.top+e.top()+a.top())})},Cy=function(){var t=window.innerWidth,e=window.innerHeight,n=je.fromDom(document),o=iy(n);return yy(o.left(),o.top(),t,e)},Oy=mt([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),zy=function(t,e,n,o,r,i){var a,u,c,s,l,f,d,m,h,g=e.x()-n,p=e.y()-o,v=r-(g+e.width()),b=i-(p+e.height()),y=j.some(g),x=j.some(p),w=j.some(v),k=j.some(b),S=j.none();return a=e.direction(),u=function(){return uy(t,y,x,S,S)},c=function(){return uy(t,S,x,w,S)},s=function(){return uy(t,y,S,S,k)},l=function(){return uy(t,S,S,w,k)},f=function(){return uy(t,y,x,S,S)},d=function(){return uy(t,y,S,S,k)},m=function(){return uy(t,y,x,S,S)},h=function(){return uy(t,S,x,w,S)},a.fold(u,c,s,l,f,d,m,h)},My=function(t,e){var n=f(Sy,e),o=t.fold(n,n,function(){var t=iy();return Sy(e).translate(-t.left(),-t.top())}),r=ff(e),i=Ua(e);return yy(o.left(),o.top(),r,i)},Ty=Oy.relative,Hy=Oy.fixed,Vy=Ne("anchorBox","origin"),Ey=mt([{fit:["reposition"]},{nofit:["reposition","deltaW","deltaH"]}]),Ay=function(t,I,F,L,P){var j=F.width(),N=F.height(),o=function(t,o,r,i){var e,n,a,u,c,s,l,f,d,m,h,g,p,v,b,y,x,w,k,S,C,O,z,M,T,H,V,E,A,B,D,_,R=t(I,F,L);return(n=j,a=N,u=P,d=(e=R).x(),m=e.y(),h=e.bubble().offset().left(),g=e.bubble().offset().top(),p=u.x(),v=u.y(),b=u.width(),y=u.height(),S=v<=(w=m+g),C=(k=p<=(x=d+h))&&S,O=x+n<=p+b&&w+a<=v+y,z=k?Math.min(n,p+b-x):Math.abs(p-(x+n)),M=S?Math.min(a,v+y-w):Math.abs(v-(w+a)),T=u.width()-n,H=Math.max(0,x),V=Math.min(H,T),A=U((E=S?w:w+(a-M))+M-v),B=U(v+y-E),c=e.direction(),l=s=B,f=A,D=c.fold(s,s,f,f,s,f,l,l),_=ay({x:V,y:E,width:z,height:M,maxHeight:D,direction:e.direction(),classes:{on:e.bubble().classesOn(),off:e.bubble().classesOff()},label:e.label(),candidateYforTest:w}),C&&O?Ey.fit(_):Ey.nofit(_,z,M)).fold(Ey.fit,function(t,e,n){return i<n||r<e?Ey.nofit(t,e,n):Ey.nofit(o,r,i)})};return _(t,function(t,e){var n=f(o,e);return t.fold(Ey.fit,n)},Ey.nofit(ay({x:I.x(),y:I.y(),width:F.width(),height:F.height(),maxHeight:F.height(),direction:sy(),classes:[],label:"none",candidateYforTest:I.y()}),-1,-1)).fold(b,b)},By=function(t,e,n,o){Fa(e,"max-height");var r,i={width:U(ff(r=e)),height:U(Ua(r))};return Ay(o.preference(),t,i,n,o.bounds())},Dy=function(t,e,n){var o,r,i,a,u,c=function(t){return t+"px"},s=(o=n.origin(),r=e,o.fold(function(){return uy("absolute",j.some(r.x()),j.some(r.y()),j.none(),j.none())},function(t,e,n,o){return zy("absolute",r,t,e,n,o)},function(t,e,n,o){return zy("fixed",r,t,e,n,o)}));i=t,a={position:j.some(s.position()),left:s.left().map(c),top:s.top().map(c),right:s.right().map(c),bottom:s.bottom().map(c)},u=i.dom(),et(a,function(t,e){t.fold(function(){Aa(u,e)},function(t){Ea(u,e,t)})})},_y=function(t,e){var n,o,r;n=t,o=Math.floor(e),r=ja.max(n,o,["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"]),Ba(n,"max-height",r+"px")},Ry=U(function(t,e){_y(t,e),Da(t,{"overflow-x":"hidden","overflow-y":"auto"})}),Iy=U(function(t,e){_y(t,e)}),Fy=Ge(["bounds","origin","preference","maxHeightFunction"],[]),Ly=function(t,e,n,o,r,i){var a,u,c,s,l,f=(a=i,u="maxHeightFunction",c=Ry(),a[u]===undefined?c:a[u]),d=t.anchorBox(),m=t.origin(),h=Fy({bounds:(s=m,l=r,l.fold(function(){return s.fold(Cy,Cy,yy)},function(t){return s.fold(t,t,yy)})),origin:m,preference:o,maxHeightFunction:f});Py(d,e,n,h)},Py=function(t,e,n,o){var r,i,a,u,c=By(t,e,n,o);Dy(e,c,o),r=e,i=c.classes(),zh(r,i.off),Oh(r,i.on),a=e,u=c,o.maxHeightFunction()(a,u.maxHeight())},jy=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right"],Ny=function(t,e,n){var r=function(t){return wt(n,t).getOr([])},o=function(t,e,n){var o=q(jy,n);return{offset:function(){return Ql(t,e)},classesOn:function(){return W(n,r)},classesOff:function(){return W(o,r)}}};return{southeast:function(){return o(-t,e,["top","alignLeft"])},southwest:function(){return o(t,e,["top","alignRight"])},south:function(){return o(-t/2,e,["top","alignCentre"])},northeast:function(){return o(-t,-e,["bottom","alignLeft"])},northwest:function(){return o(t,-e,["bottom","alignRight"])},north:function(){return o(-t/2,-e,["bottom","alignCentre"])},east:function(){return o(t,-e/2,["valignCentre","left"])},west:function(){return o(-t,-e/2,["valignCentre","right"])}}},Uy=function(){return Ny(0,0,{})},Wy=Ne("x","y","bubble","direction","label"),Gy=function(t){return t.x()},Xy=function(t,e){return t.x()+t.width()/2-e.width()/2},$y=function(t,e){return t.x()+t.width()-e.width()},qy=function(t,e){return t.y()-e.height()},Yy=function(t){return t.y()+t.height()},Ky=function(t,e){return t.y()+t.height()/2-e.height()/2},Jy=function(t,e,n){return Wy(Gy(t),Yy(t),n.southeast(),sy(),"layout-se")},Qy=function(t,e,n){return Wy($y(t,e),Yy(t),n.southwest(),ly(),"layout-sw")},Zy=function(t,e,n){return Wy(Gy(t),qy(t,e),n.northeast(),fy(),"layout-ne")},tx=function(t,e,n){return Wy($y(t,e),qy(t,e),n.northwest(),dy(),"layout-nw")},ex=function(t,e,n){return Wy(Xy(t,e),qy(t,e),n.north(),hy(),"layout-n")},nx=function(t,e,n){return Wy(Xy(t,e),Yy(t),n.south(),my(),"layout-s")},ox=function(t,e,n){return Wy((o=t).x()+o.width(),Ky(t,e),n.east(),gy(),"layout-e");var o},rx=function(t,e,n){return Wy((o=e,t.x()-o.width()),Ky(t,e),n.west(),py(),"layout-w");var o},ix=function(){return[Jy,Qy,Zy,tx,nx,ex,ox,rx]},ax=function(){return[Qy,Jy,tx,Zy,nx,ex,ox,rx]},ux=function(t){return t},cx=function(){return Tr("layouts",[br("onLtr"),br("onRtl")])},sx=function(e,t,n,o){var r=t.layouts.map(function(t){return t.onLtr(e)}).getOr(n),i=t.layouts.map(function(t){return t.onRtl(e)}).getOr(o);return _u(r,i)(e)},lx=[br("hotspot"),cx(),na("placement",function(t,e,n){var o=e.hotspot,r=My(n,o.element()),i=sx(t.element(),e,ix(),ax());return j.some(ux({anchorBox:r,bubble:Uy(),overrides:{},layouts:i,placer:j.none()}))})],fx=[br("x"),br("y"),Vr("height",0),Vr("width",0),Vr("bubble",Uy()),cx(),na("placement",function(t,e,n){var o=yy(e.x,e.y,e.width,e.height),r=sx(t.element(),e,ix(),ax());return j.some(ux({anchorBox:o,bubble:e.bubble,overrides:{},layouts:r,placer:j.none()}))})],dx=Ne("element","offset"),mx=mt([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),hx=function(t){return t.fold(function(t){return t},function(t,e,n){return t.translate(-e,-n)})},gx=function(t){return t.fold(function(t){return t},function(t,e,n){return t})},px=function(t){return _(t,function(t,e){return t.translate(e.left(),e.top())},Ql(0,0))},vx=function(t){var e=E(t,gx);return px(e)},bx=mx.screen,yx=mx.absolute,xx=function(t,e,n){var o,r,i,a=an(t.element()),u=iy(a),c=(o=t,r=n,i=un(r.root).dom(),j.from(i.frameElement).map(je.fromDom).filter(function(t){var e=an(t),n=an(o.element());return rn(e,n)}).map(oy)).getOr(u);return yx(c,u.left(),u.top())},wx=function(t,e,n,o){var r=t,i=e,a=n,u=o;t<0&&(r=0,a=n+t),e<0&&(i=0,u=o+e);var c=bx(Ql(r,i));return j.some(vy(c,a,u))},kx=function(t,c,s,l,f){return t.map(function(t){var e,n,o,r=[c,t.point()],i=(e=function(){return vx(r)},n=function(){return vx(r)},o=function(){return t=E(r,hx),px(t);var t},l.fold(e,n,o)),a=by(i.left(),i.top(),t.width(),t.height()),u=sx(f,s,s.showAbove?[Zy,tx,Jy,Qy,ex,nx]:[Jy,Qy,Zy,tx,nx,nx],s.showAbove?[tx,Zy,Qy,Jy,ex,nx]:[Qy,Jy,tx,Zy,nx,ex]);return ux({anchorBox:a,bubble:s.bubble.getOr(Uy()),overrides:s.overrides,layouts:u,placer:j.none()})})},Sx=Ne("element","offset"),Cx=function(t,e){return Cn(t)?Sx(t,e):function(t,e){var n=ln(t);if(0===n.length)return dx(t,e);if(e<n.length)return dx(n[e],0);var o=n[n.length-1],r=Cn(o)?ip(o).length:ln(o).length;return dx(o,r)}(t,e)},Ox=function(t,e){return e.getSelection.getOrThunk(function(){return function(){return Cp(t)}})().map(function(t){var e=Cx(t.start(),t.soffset()),n=Cx(t.finish(),t.foffset());return lp(e.element(),e.offset(),n.element(),n.offset())})},zx=[Or("getSelection"),br("root"),Or("bubble"),cx(),Vr("overrides",{}),Vr("showAbove",!1),na("placement",function(t,e,n){var o=un(e.root).dom(),r=xx(t,0,e),i=Ox(o,e).bind(function(t){var e;return Op(o,(e=t,sp.exact(e.start(),e.soffset(),e.finish(),e.foffset()))).orThunk(function(){var e=je.fromText("\ufeff");return dn(t.start(),e),Op(o,dp(e,0,e,1)).map(function(t){return bn(e),t})}).bind(function(t){return wx(t.left(),t.top(),t.width(),t.height())})}),a=Ox(o,e).bind(function(t){return Sn(t.start())?j.some(t.start()):cn(t.start())}).getOr(t.element());return kx(i,r,e,n,a)})],Mx=[br("node"),br("root"),Or("bubble"),cx(),Vr("overrides",{}),Vr("showAbove",!1),na("placement",function(r,i,a){var u=xx(r,0,i);return i.node.bind(function(t){var e=t.dom().getBoundingClientRect(),n=wx(e.left,e.top,e.width,e.height),o=i.node.getOr(r.element());return kx(n,u,i,a,o)})})],Tx=function(t){return t.x()+t.width()},Hx=function(t,e){return t.x()-e.width()},Vx=function(t,e){return t.y()-e.height()+t.height()},Ex=function(t){return t.y()},Ax=function(t,e,n){return Wy(Tx(t),Ex(t),n.southeast(),sy(),"link-layout-se")},Bx=function(t,e,n){return Wy(Hx(t,e),Ex(t),n.southwest(),ly(),"link-layout-sw")},Dx=function(t,e,n){return Wy(Tx(t),Vx(t,e),n.northeast(),fy(),"link-layout-ne")},_x=function(t,e,n){return Wy(Hx(t,e),Vx(t,e),n.northwest(),dy(),"link-layout-nw")},Rx=[br("item"),cx(),na("placement",function(t,e,n){var o=My(n,e.item.element()),r=sx(t.element(),e,[Ax,Bx,Dx,_x],[Bx,Ax,_x,Dx]);return j.some(ux({anchorBox:o,bubble:Uy(),overrides:{},layouts:r,placer:j.none()}))})],Ix=fr("anchor",{selection:zx,node:Mx,hotspot:lx,submenu:Rx,makeshift:fx}),Fx=function(t,e,n,o,r){var i,a=(i=n.anchorBox,Vy(i,e));Ly(a,r.element(),n.bubble,n.layouts,o,n.overrides)},Lx=function(e,t,n,o,r,i){var a=sr("positioning anchor.info",Ix,o);Ba(r.element(),"position","fixed");var u=Ia(r.element(),"visibility");Ba(r.element(),"visibility","hidden");var c,s,l,f=t.useFixed?Hy(0,0,window.innerWidth,window.innerHeight):(s=oy((c=e).element()),l=c.element().dom().getBoundingClientRect(),Ty(s.left(),s.top(),l.width,l.height)),d=a.placement,m=i.map(function(t){return function(){return xy(t)}}).or(t.getBounds);d(e,a,f).each(function(t){t.placer.getOr(Fx)(e,f,t,m,r)}),u.fold(function(){Fa(r.element(),"visibility")},function(t){Ba(r.element(),"visibility",t)}),Ia(r.element(),"left").isNone()&&Ia(r.element(),"top").isNone()&&Ia(r.element(),"right").isNone()&&Ia(r.element(),"bottom").isNone()&&Ia(r.element(),"position").is("fixed")&&Fa(r.element(),"position")},Px=Object.freeze({position:function(t,e,n,o,r){var i=j.none();Lx(t,e,n,o,r,i)},positionWithin:Lx,getMode:function(t,e,n){return e.useFixed?"fixed":"absolute"}}),jx=[Vr("useFixed",!1),Or("getBounds")],Nx=xi({fields:jx,name:"positioning",active:ey,apis:Px}),Ux=function(t,e,n,o){var r=function(e,t,n,o){n.get().each(function(t){fo(e)});var r=t.getAttachPoint(e);uo(r,e);var i=e.getSystem().build(o);return uo(e,i),n.set(i),i}(t,e,n,o);return e.onOpen(t,r),r},Wx=function(e,n,o){o.get().each(function(t){fo(e),lo(e),n.onClose(e,t),o.clear()})},Gx=function(t,e,n){return n.isOpen()},Xx=function(t,e,n){var o,r,i,a,u=e.getAttachPoint(t);Ba(t.element(),"position",Nx.getMode(u)),o=t,r="visibility",i=e.cloakVisibilityAttr,a="hidden",Ia(o.element(),r).fold(function(){En(o.element(),i)},function(t){Mn(o.element(),i,t)}),Ba(o.element(),r,a)},$x=function(t,e,n){var o;o=t.element(),H(["top","left","right","bottom"],function(t){return Ia(o,t).isSome()})||Fa(t.element(),"position"),function(t,e,n){if(Vn(t.element(),n)){var o=Hn(t.element(),n);Ba(t.element(),e,o)}else Fa(t.element(),e)}(t,"visibility",e.cloakVisibilityAttr)},qx=Object.freeze({cloak:Xx,decloak:$x,open:Ux,openWhileCloaked:function(t,e,n,o,r){Xx(t,e,n),Ux(t,e,n,o),r(),$x(t,e,n)},close:Wx,isOpen:Gx,isPartOf:function(e,n,t,o){return Gx(0,0,t)&&t.get().exists(function(t){return n.isPartOf(e,t,o)})},getState:function(t,e,n){return n.get()}}),Yx=Object.freeze({events:function(n,o){return Xr([Yr(He(),function(t,e){Wx(t,n,o)})])}}),Kx=[Qi("onOpen"),Qi("onClose"),br("isPartOf"),br("getAttachPoint"),Vr("cloakVisibilityAttr","data-precloak-visibility")],Jx=xi({fields:Kx,name:"sandboxing",active:Yx,apis:qx,state:Object.freeze({init:function(){var e=zt(j.none()),t=U("not-implemented");return vi({readState:t,isOpen:function(){return e.get().isSome()},clear:function(){e.set(j.none())},set:function(t){e.set(j.some(t))},get:function(t){return e.get()}})}})}),Qx=U("dismiss.popups"),Zx=U("mouse.released"),tw=qo([Vr("isExtraPart",U(!1)),Tr("fireEventInstead",[Vr("event",_e())])]),ew=function(t){var e=nw(t);return aa.config(e)},nw=function(t){var n=sr("Dismissal",tw,t);return{channels:kt(Qx(),{schema:qo([br("target")]),onReceive:function(e,t){Jx.isOpen(e)&&(Jx.isPartOf(e,t.target)||n.isExtraPart(e,t.target)||n.fireEventInstead.fold(function(){return Jx.close(e)},function(t){return Kn(e,t.event)}))}})}},ow=undefined&&undefined.__assign||function(){return(ow=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},rw=hl({name:"InlineView",configFields:[br("lazySink"),Qi("onShow"),Qi("onHide"),Qc("inlineBehaviours",[Jx,aa]),Tr("fireDismissalEventInstead",[Vr("event",_e())]),Vr("getRelated",j.none),Vr("eventOrder",j.none)],factory:function(u,t){var r=function(t,e,n,o){var r=u.lazySink(t).getOrDie();Jx.openWhileCloaked(t,n,function(){return Nx.positionWithin(r,e,t,o)}),u.onShow(t)},e={setContent:function(t,e){Jx.open(t,e)},showAt:function(t,e,n){var o=j.none();r(t,e,n,o)},showWithin:r,showMenuAt:function(t,e,n){var r,o,i,a=(r=function(){return u.lazySink(t)},o=e,i=n,hg.sketch({dom:{tag:"div"},data:i.data,markers:i.menu.markers,onEscape:function(){return j.some(!0)},onExecute:function(){return j.some(!0)},onOpenMenu:function(t,e){Nx.position(r().getOrDie(),o,e)},onOpenSubmenu:function(t,e,n){var o=r().getOrDie();Nx.position(o,{anchor:"submenu",item:e},n)}}));Jx.open(t,a),u.onShow(t)},hide:function(t){Jx.close(t),u.onHide(t)},getContent:function(t){return Jx.getState(t)},isOpen:Jx.isOpen};return{uid:u.uid,dom:u.dom,behaviours:ts(u.inlineBehaviours,[Jx.config({isPartOf:function(t,e,n){return ty(e,n)||(o=t,r=n,u.getRelated(o).exists(function(t){return ty(t,r)}));var o,r},getAttachPoint:function(t){return u.lazySink(t).getOrDie()}}),ew(ow({isExtraPart:U(!1)},u.fireDismissalEventInstead.map(function(t){return{fireEventInstead:{event:t.event}}}).getOr({})))]),eventOrder:u.eventOrder,apis:e}},apis:{showAt:function(t,e,n,o){t.showAt(e,n,o)},showWithin:function(t,e,n,o,r){t.showWithin(e,n,o,r)},showMenuAt:function(t,e,n,o){t.showMenuAt(e,n,o)},hide:function(t,e){t.hide(e)},isOpen:function(t,e){return t.isOpen(e)},getContent:function(t,e){return t.getContent(e)},setContent:function(t,e,n){t.setContent(e,n)}}}),iw={"icon-accessibility-check":'<svg width="24" height="24"><g id="icon-accessibility-check" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M12 2a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2c0-1.1.9-2 2-2zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5c0-.6-.4-1-1-1a1 1 0 0 0-1 1v5c0 .6-.4 1-1 1a1 1 0 0 1-1-1V9H4a1 1 0 1 1 0-2h16c.6 0 1 .4 1 1s-.4 1-1 1z" id="Shape" fill-rule="nonzero"/></g></svg>',"icon-align-center":'<svg width="24" height="24"><g id="icon-align-center" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2z" id="shape"/></g></svg>',"icon-align-justify":'<svg width="24" height="24"><g id="icon-align-justify" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2z" id="shape"/></g></svg>',"icon-align-left":'<svg width="24" height="24"><g id="icon-align-left" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2z" id="shape"/></g></svg>',"icon-align-none":'<svg width="24" height="24"><g id="icon-align-none" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M14.2 5L13 7H5a1 1 0 1 1 0-2h9.2zm4 0h.8a1 1 0 0 1 0 2h-2l1.2-2zm-6.4 4l-1.2 2H5a1 1 0 0 1 0-2h6.8zm4 0H19a1 1 0 0 1 0 2h-4.4l1.2-2zm-6.4 4l-1.2 2H5a1 1 0 0 1 0-2h4.4zm4 0H19a1 1 0 0 1 0 2h-6.8l1.2-2zM7 17l-1.2 2H5a1 1 0 0 1 0-2h2zm4 0h8a1 1 0 0 1 0 2H9.8l1.2-2zm5.2-13.5l1.3.7-9.7 16.3-1.3-.7 9.7-16.3z" id="shape"/></g></svg>',"icon-align-right":'<svg width="24" height="24"><g id="icon-align-right" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2z" id="shape"/></g></svg>',"icon-background-color":'<svg width="24" height="24"><g id="icon-background-color" stroke="none" stroke-width="1" fill-rule="evenodd"><path id="Rectangle" opacity=".1" d="M3 3h18v16H3z"/><path id="color" d="M3 19h18v3H3z"/><path d="M8.7 17h-.8a.5.5 0 0 1-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 0 1-.5.6h-.8a.5.5 0 0 1-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4zm2.6-7.6l-.6 2a.5.5 0 0 0 .5.6h1.6a.5.5 0 0 0 .5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4z" id="shape"/></g></svg>',"icon-bold":'<svg width="24" height="24"><g id="icon-bold" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 0 1-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4z" id="B"/></g></svg>',"icon-bookmark":'<svg width="24" height="24"><g id="icon-bookmark" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 0 0-1 1z" id="Shape" fill-rule="nonzero"/></g></svg>',"icon-border-width":'<svg width="24" height="24"><g id="icon-border-width" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M5 14.8h14a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2zm-.5 3.7h15c.3 0 .5.2.5.5s-.2.5-.5.5h-15a.5.5 0 1 1 0-1zm.5-8.3h14c.6 0 1 .4 1 1v1c0 .5-.4 1-1 1H5a1 1 0 0 1-1-1v-1c0-.6.4-1 1-1zm0-5.7h14c.6 0 1 .4 1 1v2c0 .6-.4 1-1 1H5a1 1 0 0 1-1-1v-2c0-.6.4-1 1-1z" id="shape"/></g></svg>',"icon-brightness":'<svg width="24" height="24"><g id="icon-brightness" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M12 17c.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7v-1c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3zm0-10a1 1 0 0 1-.7-.3A1 1 0 0 1 11 6V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3zm7 4c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-1a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1zM7 12c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H5a1 1 0 0 1-.7-.3A1 1 0 0 1 4 12c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1c.3 0 .5.1.7.3.2.2.3.4.3.7zm10 3.5l.7.8c.2.1.3.4.3.6 0 .3-.1.6-.3.8a1 1 0 0 1-.8.3 1 1 0 0 1-.6-.3l-.8-.7a1 1 0 0 1-.3-.8c0-.2.1-.5.3-.7a1 1 0 0 1 1.4 0zm-10-7l-.7-.8a1 1 0 0 1-.3-.6c0-.3.1-.6.3-.8.2-.2.5-.3.8-.3.2 0 .5.1.7.3l.7.7c.2.2.3.5.3.8 0 .2-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.8-.3zm10 0a1 1 0 0 1-.8.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.6.3-.8l.8-.7c.1-.2.4-.3.6-.3.3 0 .6.1.8.3.2.2.3.5.3.8 0 .2-.1.5-.3.7l-.7.7zm-10 7c.2-.2.5-.3.8-.3.2 0 .5.1.7.3a1 1 0 0 1 0 1.4l-.8.8a1 1 0 0 1-.6.3 1 1 0 0 1-.8-.3 1 1 0 0 1-.3-.8c0-.2.1-.5.3-.6l.7-.8zM12 8a4 4 0 0 1 3.7 2.4 4 4 0 0 1 0 3.2A4 4 0 0 1 12 16a4 4 0 0 1-3.7-2.4 4 4 0 0 1 0-3.2A4 4 0 0 1 12 8zm0 6.5c.7 0 1.3-.2 1.8-.7.5-.5.7-1.1.7-1.8s-.2-1.3-.7-1.8c-.5-.5-1.1-.7-1.8-.7s-1.3.2-1.8.7c-.5.5-.7 1.1-.7 1.8s.2 1.3.7 1.8c.5.5 1.1.7 1.8.7z" id="shape"/></g></svg>',"icon-browse":'<svg width="24" height="24"><g id="icon-browse" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14zm-8 9.4l-2.3 2.3a1 1 0 1 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1-1.4 1.4L13 13.4V20a1 1 0 0 1-2 0v-6.6z" id="Shape" fill-rule="nonzero"/></g></svg>',"icon-cancel":'<svg width="24" height="24"><g id="icon-cancel" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M12 4.6a7.4 7.4 0 1 1 0 14.8 7.4 7.4 0 0 1 0-14.8zM12 3a9 9 0 1 0 0 18 9 9 0 0 0 0-18zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7z" id="Combined-Shape" fill-rule="nonzero"/></g></svg>',"icon-character-count":'<svg width="24" height="24"><g id="icon-character-count" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M4 11.5h16v1H4v-1zm4.8-6.8V10H7.7V5.8h-1v-1h2zM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1zM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2v-.1-.2l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 0 1-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 0 0-.5-.1 1 1 0 0 0-.4 0l-.3.4h-1zm2.3.8h-.2l-.2.1-.4.1a1 1 0 0 0-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 0 0 1.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 0 0-.6-.3l-.6.3-.2.8zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 0 0-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 0 1-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 0 1-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1z" id="shape"/></g></svg>',"icon-checkmark":'<svg width="24" height="24"><g id="icon-checkmark" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M18.2 5.4a1 1 0 0 1 1.6 1.2l-8 12a1 1 0 0 1-1.5.1l-5-5a1 1 0 1 1 1.4-1.4l4.1 4.1 7.4-11z" id="Shape-Copy" fill-rule="nonzero"/></g></svg>',"icon-chevron-down":'<svg width="10" height="10"><g id="icon-chevron-down" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 0 1 0-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8z" id="Shape" fill-rule="nonzero"/></g></svg>',"icon-chevron-left":'<svg width="10" height="10"><g id="icon-chevron-left" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M7.8 1.3L4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 0 1 0-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1z" id="Shape" fill-rule="nonzero"/></g></svg>',"icon-chevron-right":'<svg width="10" height="10"><g id="icon-chevron-right" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M2.2 1.3a.8.8 0 0 1 0-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 0 1 0-1.1L6 5 2.2 1.3z" id="Shape" fill-rule="nonzero"/></g></svg>',"icon-chevron-up":'<svg width="10" height="10"><g id="icon-chevron-up" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M8.7 7.8L5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 0 1 0-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0z" id="Shape" fill-rule="nonzero"/></g></svg>',"icon-close":'<svg width="24" height="24"><g id="icon-close" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M17.3 8.2L13.4 12l3.9 3.8a1 1 0 0 1-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 0 1-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 0 1 1.5-1.5l3.8 3.9 3.8-3.9a1 1 0 0 1 1.5 1.5z" id="shape"/></g></svg>',"icon-code-sample":'<svg width="24" height="26"><g id="icon-code-sample" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M7.1 11a2.8 2.8 0 0 1-.8 2 2.8 2.8 0 0 1 .8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 0 1-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 0 1 .8-2 2.8 2.8 0 0 1-.8-2zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2zM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 0 1-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 0 1-.5-.5V17a3 3 0 0 0 1-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5z" id="shape"/></g></svg>',"icon-color-levels":'<svg width="24" height="24"><g id="icon-color-levels" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M17.5 11.4A9 9 0 0 1 18 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 0 1-3.7 3 5.7 5.7 0 0 1-3.2 0A5.9 5.9 0 0 1 7.6 18a6.2 6.2 0 0 1-1.4-2.6 6.7 6.7 0 0 1 0-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 0 1 2.3-4A20 20 0 0 1 12 4a26.4 26.4 0 0 1 3.2 3.4 18.2 18.2 0 0 1 2.3 4zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 0 0-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 0 1-1.3 3 5.3 5.3 0 0 1-2.3 1.5 4.9 4.9 0 0 1-2 .1 4.3 4.3 0 0 0 2.4.8 4 4 0 0 0 2-.6 4 4 0 0 0 1.5-1.5z" id="shape"/></g></svg>',"icon-color-picker":'<svg width="24" height="24"><g id="icon-color-picker" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M12 3a9 9 0 0 0 0 18 1.5 1.5 0 0 0 1.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 0 0 5-5c0-4.4-4-8-9-8zm-5.5 9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm3-4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3zm3 4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3z" id="Shape" fill-rule="nonzero"/></g></svg>',"icon-color-swatch":'<svg width="24" height="24"><g id="icon-color-swatch" stroke="none" stroke-width="1" fill-rule="evenodd"><rect id="Rectangle" x="3" y="3" width="18" height="18" rx="1"/></g></svg>',"icon-comment":'<svg width="24" height="24"><g id="icon-comment" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M9 19l3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23z" id="Shape" fill-rule="nonzero"/></g></svg>',"icon-contrast":'<svg width="24" height="24"><g id="icon-contrast" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4zm-6 8a6 6 0 0 0 6 6V6a6 6 0 0 0-6 6z" id="shape"/></g></svg>',"icon-copy":'<svg width="24" height="24"><g id="icon-copy" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M16 3H6a2 2 0 0 0-2 2v11h2V5h10V3zm1 4a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7zm0 12V9h-7v10h7z" id="Combined-Shape" fill-rule="nonzero"/></g></svg>',"icon-crop":'<svg width="24" height="24"><g id="icon-crop" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-2H7V9H5a1 1 0 1 1 0-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3zM9 9v5l5-5H9zm1 6h5v-5l-5 5z" id="shape"/></g></svg>',"icon-cut":'<svg width="24" height="24"><g id="icon-cut" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 0 1 0 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8zm-8.5 2.2l.1-.4v-.3-.4a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2 1.6 1.6 0 0 0-.8 0 2.6 2.6 0 0 0-.8.3 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3 2.8 2.8 0 0 0 1-1zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4zm5.4 4l.2-.5v-.4-.3a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3 1.5 1.5 0 0 0-.8 0 1 1 0 0 0-.4.2 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4l.3.4.3.4a2.8 2.8 0 0 0 .8.5l.4.1h.7l.5-.2z" id="shape"/></g></svg>',"icon-document-properties":'<svg width="24" height="24"><g id="icon-document-properties" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3zM17 19H7V5h6v4h4v10z" id="Shape" fill-rule="nonzero"/></g></svg>',"icon-drag":'<svg width="24" height="24"><g id="icon-drag" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M13 5h2v2h-2V5zm0 4h2v2h-2V9zM9 9h2v2H9V9zm4 4h2v2h-2v-2zm-4 0h2v2H9v-2zm0 4h2v2H9v-2zm4 0h2v2h-2v-2zM9 5h2v2H9V5z" id="shape"/></g></svg>',"icon-duplicate":'<svg width="24" height="24"><g id="icon-duplicate" stroke="none" stroke-width="1" fill-rule="nonzero"><path d="M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10zm3 8h-2V9h-7v10h9a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7a2 2 0 0 1 2 2v2z" id="Combined-Shape"/><path d="M17 14h1a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1h-1a1 1 0 0 1 0-2h1v-1a1 1 0 0 1 2 0v1z" id="Combined-Shape"/></g></svg>',"icon-edit-image":'<svg width="24" height="24"><g id="icon-edit-image" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M18 16h2V7a2 2 0 0 0-2-2H7v2h11v9zM6 17h15a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1H6a2 2 0 0 1-2-2V7H3a1 1 0 1 1 0-2h1V4a1 1 0 1 1 2 0v13zm3-5.3l1.3 2 3-4.7 3.7 6H7l2-3.3z" id="Shape" fill-rule="nonzero"/></g></svg>',"icon-embed":'<svg width="24" height="24"><g id="icon-embed" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1zm1 2v14h14V5H5zm4.8 2.6l5.6 4a.5.5 0 0 1 0 .8l-5.6 4A.5.5 0 0 1 9 16V8a.5.5 0 0 1 .8-.4z" id="Combined-Shape" fill-rule="nonzero"/></g></svg>',"icon-emoji":'<svg width="24" height="24"><g id="icon-emoji" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5zM12 4a8 8 0 1 0 0 16 8 8 0 0 0 0-16zm0 14.5a6.5 6.5 0 1 1 0-13 6.5 6.5 0 0 1 0 13z" id="Shape" fill-rule="nonzero"/></g></svg>',"icon-fill":'<svg width="24" height="26"><g id="icon-fill" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M16.6 12l-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 0 0 2.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2zM5.2 13L10 8.2l4.8 4.8H5.2zM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.3-2-3.5-2-3.5z" id="Shape" fill-rule="nonzero"/></g></svg>',"icon-flip-horizontally":'<svg width="24" height="24"><g id="icon-flip-horizontally" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M14 19h2v-2h-2v2zm4-8h2V9h-2v2zM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 0 0-2 2zm14-2v2h2a2 2 0 0 0-2-2zm-7 16h2V3h-2v18zm7-6h2v-2h-2v2zm-4-8h2V5h-2v2zm4 12a2 2 0 0 0 2-2h-2v2z" id="Shape" fill-rule="nonzero"/></g></svg>',"icon-flip-vertically":'<svg width="24" height="24"><g id="icon-flip-vertically" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M14 19h2v-2h-2v2zm4-8h2V9h-2v2zM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 0 0-2 2zm14-2v2h2a2 2 0 0 0-2-2zm-7 16h2V3h-2v18zm7-6h2v-2h-2v2zm-4-8h2V5h-2v2zm4 12a2 2 0 0 0 2-2h-2v2z" id="Shape" fill-rule="nonzero" transform="rotate(90 12 12)"/></g></svg>',"icon-format-painter":'<svg width="24" height="24"><g id="icon-format-painter" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M18 5V4c0-.5-.4-1-1-1H5a1 1 0 0 0-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3z" id="Shape" fill-rule="nonzero"/></g></svg>',"icon-fullscreen":'<svg width="24" height="24"><g id="icon-fullscreen" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M15.3 10l-1.2-1.3 2.9-3h-2.3a.9.9 0 1 1 0-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 1 1-1.8 0V7l-2.9 3zm0 4l3 3v-2.3a.9.9 0 1 1 1.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 1 1 0-1.8H17l-3-2.9 1.3-1.2zM10 15.4l-2.9 3h2.3a.9.9 0 1 1 0 1.7H5a.9.9 0 0 1-.9-.9v-4.4a.9.9 0 1 1 1.8 0V17l2.9-3 1.2 1.3zM8.7 10L5.7 7v2.3a.9.9 0 0 1-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 0 1 0 1.8H7l3 2.9-1.3 1.2z" id="Shape" fill-rule="nonzero"/></g></svg>',"icon-gamma":'<svg width="24" height="24"><g id="icon-gamma" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1zm1 2v14h14V5H5zm6.5 11.8V14L9.2 8.7a5.1 5.1 0 0 0-.4-.8l-.1-.2H8 8v-1l.3-.1.3-.1h.7a1 1 0 0 1 .6.5l.1.3a8.5 8.5 0 0 1 .3.6l1.9 4.6 2-5.2a1 1 0 0 1 1-.6.5.5 0 0 1 .5.6L13 14v2.8a.7.7 0 0 1-1.4 0z" id="Combined-Shape" fill-rule="nonzero"/></g></svg>',"icon-help":'<svg width="24" height="24"><g id="icon-help" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M12 5.5a6.5 6.5 0 0 0-6 9 6.3 6.3 0 0 0 1.4 2l1 1a6.3 6.3 0 0 0 3.6 1 6.5 6.5 0 0 0 6-9 6.3 6.3 0 0 0-1.4-2l-1-1a6.3 6.3 0 0 0-3.6-1zM12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4z" id="shape"/><path d="M9.6 9.7a.7.7 0 0 1-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 0 0-.8.8.8.8 0 0 1-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8z" id="Path-2" fill-rule="nonzero"/><circle id="Oval" cx="12" cy="16" r="1"/></g></svg>',"icon-highlight-bg-color":'<svg width="24" height="24"><g id="icon-highlight-bg-color" stroke="none" stroke-width="1" fill-rule="evenodd"><path id="color" d="M3 18h18v3H3z"/><path d="M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zM12.8 9.2L11 7.4l3-2.9a2 2 0 0 1 2.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6" id="Shape" fill-rule="nonzero"/></g></svg>',"icon-home":'<svg width="24" height="24"><g id="icon-home" stroke="none" stroke-width="1" fill-rule="evenodd"><path id="Shape" fill-rule="nonzero" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></g></svg>',"icon-horizontal-rule":'<svg width="24" height="24"><g id="icon-horizontal-rule" stroke="none" stroke-width="1" fill-rule="evenodd"><path id="shape" d="M4 11h16v2H4z"/></g></svg>',"icon-image-options":'<svg width="24" height="24"><g id="icon-image-options" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2z" id="Shape" fill-rule="nonzero"/></g></svg>',"icon-image":'<svg width="24" height="24"><g id="icon-image" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M5 15.7l3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7zM5 18V19h3l2.8-2.9-2-2L5 17.9zm14-3l-2.5-2.4-6.4 6.5H19v-4zM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1zm6 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4z" id="Combined-Shape" fill-rule="nonzero"/></g></svg>',"icon-indent":'<svg width="24" height="24"><g id="icon-indent" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6z" id="Combined-Shape"/></g></svg>',"icon-indeterminate":'<svg width="24" height="24"><g id="icon-indeterminate" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M12 21a9 9 0 1 1 0-18 9 9 0 0 1 0 18zM9 11a1 1 0 0 0 0 2h6a1 1 0 0 0 0-2H9z" id="Combined-Shape"/></g></svg>',"icon-info":'<svg width="24" height="24"><g id="icon-info" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4zm-1 3v2h2V7h-2zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4z" id="shape"/></g></svg>',"icon-insert-character":'<svg width="24" height="24"><g id="icon-insert-character" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 0 0 1.8-2.9 6.3 6.3 0 0 0-.1-4.1 5.8 5.8 0 0 0-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 0 0-3.9 1.8 6.3 6.3 0 0 0-1.3 6 6.2 6.2 0 0 0 1.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 0 1 4 11c0-1 .2-1.9.6-2.7A7 7 0 0 1 6.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 0 1 5.7 2 7 7 0 0 1 1.7 2.3 6 6 0 0 1 .2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 0 1-3.6 2.5v.5z" id="shape"/></g></svg>',"icon-insert-time":'<svg width="24" height="24"><g id="icon-insert-time" stroke="none" stroke-width="1" fill-rule="evenodd"><g id="clock" transform="translate(2 2)" fill-rule="nonzero"><path d="M17 0H3a3 3 0 0 0-3 3v14a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V3a3 3 0 0 0-3-3zm-7 18a8 8 0 1 1 0-16 8 8 0 0 1 0 16z" id="Shape"/><path d="M13 10h-3V5a.5.5 0 0 0-1 0v6h4a.5.5 0 0 0 0-1z" id="Shape"/></g></g></svg>',"icon-invert":'<svg width="24" height="24"><g id="icon-invert" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M18 19.3L16.5 18a5.8 5.8 0 0 1-3.1 1.9 6.1 6.1 0 0 1-5.5-1.6A5.8 5.8 0 0 1 6 14v-.3l.1-1.2A13.9 13.9 0 0 1 7.7 9l-3-3 .7-.8 2.8 2.9 9 8.9 1.5 1.6-.7.6zm0-5.5v.3l-.1 1.1-.4 1-1.2-1.2a4.3 4.3 0 0 0 .2-1v-.2c0-.4 0-.8-.2-1.3l-.5-1.4a14.8 14.8 0 0 0-3-4.2L12 6a26.1 26.1 0 0 0-2.2 2.5l-1-1a20.9 20.9 0 0 1 2.9-3.3L12 4l1 .8a22.2 22.2 0 0 1 4 5.4c.6 1.2 1 2.4 1 3.6z" id="shape"/></g></svg>',"icon-italic":'<svg width="24" height="24"><g id="icon-italic" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M16.7 4.7l-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8z" id="I"/></g></svg>',"icon-line":'<svg width="24" height="24"><g id="icon-line" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M15 9l-8 8H4v-3l8-8 3 3zm1-1l-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1zM4 18h16v2H4v-2z" id="shape"/></g></svg>',"icon-link":'<svg width="24" height="24"><g id="icon-link" stroke="none" stroke-width="1" fill-rule="evenodd"><g id="link" transform="translate(3 3)" fill-rule="nonzero"><path d="M3.2 9.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4A1 1 0 1 1 11.4 8a2.9 2.9 0 0 1 0 4L6.6 17a3.9 3.9 0 0 1-5.5-5.5l2-2zm11.6-.6a1 1 0 0 1-1.4-1.4l2-2a2 2 0 1 0-2.6-2.8L8 7.3a1 1 0 0 0 0 1.4A1 1 0 1 1 6.6 10a2.9 2.9 0 0 1 0-4L11.4 1a3.9 3.9 0 0 1 5.5 5.5l-2 2z" id="Shape"/></g></g></svg>',"icon-list-bull-circle":'<svg width="48" height="48"><g id="icon-list-bull-circle" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M11 16a2 2 0 1 0 0-4 2 2 0 0 0 0 4zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6z" id="Oval" fill-rule="nonzero"/><path d="M11 26a2 2 0 1 0 0-4 2 2 0 0 0 0 4zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6z" id="Oval-Copy" fill-rule="nonzero"/><path d="M11 36a2 2 0 1 0 0-4 2 2 0 0 0 0 4zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6z" id="Oval-Copy-2" fill-rule="nonzero"/><path id="Rectangle-2" opacity=".2" d="M18 12h22v4H18z"/><path id="Rectangle-2-Copy" opacity=".2" d="M18 22h22v4H18z"/><path id="Rectangle-2-Copy-2" opacity=".2" d="M18 32h22v4H18z"/></g></svg>',"icon-list-bull-default":'<svg width="48" height="48"><g id="icon-list-bull-default" stroke="none" stroke-width="1" fill-rule="evenodd"><circle id="Oval" cx="11" cy="14" r="3"/><circle id="Oval-Copy" cx="11" cy="24" r="3"/><circle id="Oval-Copy-2" cx="11" cy="34" r="3"/><path id="Rectangle-2" opacity=".2" d="M18 12h22v4H18z"/><path id="Rectangle-2-Copy" opacity=".2" d="M18 22h22v4H18z"/><path id="Rectangle-2-Copy-2" opacity=".2" d="M18 32h22v4H18z"/></g></svg>',"icon-list-bull-square":'<svg width="48" height="48"><g id="icon-list-bull-square" stroke="none" stroke-width="1" fill-rule="evenodd"><path id="Rectangle" d="M8 11h6v6H8z"/><path id="Rectangle-Copy" d="M8 21h6v6H8z"/><path id="Rectangle-Copy-2" d="M8 31h6v6H8z"/><path id="Rectangle-2" opacity=".2" d="M18 12h22v4H18z"/><path id="Rectangle-2-Copy" opacity=".2" d="M18 22h22v4H18z"/><path id="Rectangle-2-Copy-2" opacity=".2" d="M18 32h22v4H18z"/></g></svg>',"icon-list-num-default":'<svg width="48" height="48"><g id="icon-list-num-default" stroke="none" stroke-width="1" fill-rule="evenodd"><path id="Rectangle-2" opacity=".2" d="M18 12h22v4H18z"/><path id="Rectangle-2-Copy" opacity=".2" d="M18 22h22v4H18z"/><path id="Rectangle-2-Copy-2" opacity=".2" d="M18 32h22v4H18z"/><path d="M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z" id="1.-2.-3."/></g></svg>',"icon-list-num-lower-alpha":'<svg width="48" height="48"><g id="icon-list-num-lower-alpha" stroke="none" stroke-width="1" fill-rule="evenodd"><path id="Rectangle-2" opacity=".2" d="M18 12h22v4H18z"/><path id="Rectangle-2-Copy" opacity=".2" d="M18 22h22v4H18z"/><path id="Rectangle-2-Copy-2" opacity=".2" d="M18 32h22v4H18z"/><path d="M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z" id="a.-b.-c."/></g></svg>',"icon-list-num-lower-greek":'<svg width="48" height="48"><g id="icon-list-num-lower-greek" stroke="none" stroke-width="1" fill-rule="evenodd"><path id="Rectangle-2" opacity=".2" d="M18 12h22v4H18z"/><path id="Rectangle-2-Copy" opacity=".2" d="M18 22h22v4H18z"/><path id="Rectangle-2-Copy-2" opacity=".2" d="M18 32h22v4H18z"/><path d="M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3zM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z" id="\u03b1.-\u03b2.-\u0194."/></g></svg>',"icon-list-num-lower-roman":'<svg width="48" height="48"><g id="icon-list-num-lower-roman" stroke="none" stroke-width="1" fill-rule="evenodd"><path id="Rectangle-2" opacity=".2" d="M18 12h22v4H18z"/><path id="Rectangle-2-Copy" opacity=".2" d="M18 22h22v4H18z"/><path id="Rectangle-2-Copy-2" opacity=".2" d="M18 32h22v4H18z"/><path d="M15.1 16v-1.2h1.3V16H15zm0 10v-1.2h1.3V26H15zm0 10v-1.2h1.3V36H15z" id=".-.-."/><path id="Rectangle" fill-rule="nonzero" d="M12 21h1.5v5H12z"/><path id="Rectangle-Copy-6" fill-rule="nonzero" d="M12 31h1.5v5H12z"/><path id="Rectangle-Copy-2" fill-rule="nonzero" d="M9 21h1.5v5H9z"/><path id="Rectangle-Copy-7" fill-rule="nonzero" d="M9 31h1.5v5H9z"/><path id="Rectangle-Copy-10" fill-rule="nonzero" d="M6 31h1.5v5H6z"/><path id="Rectangle-Copy-4" fill-rule="nonzero" d="M12 11h1.5v5H12z"/><path id="Rectangle-Copy" fill-rule="nonzero" d="M12 19h1.5v1H12z"/><path id="Rectangle-Copy-8" fill-rule="nonzero" d="M12 29h1.5v1H12z"/><path id="Rectangle-Copy-3" fill-rule="nonzero" d="M9 19h1.5v1H9z"/><path id="Rectangle-Copy-9" fill-rule="nonzero" d="M9 29h1.5v1H9z"/><path id="Rectangle-Copy-11" fill-rule="nonzero" d="M6 29h1.5v1H6z"/><path id="Rectangle-Copy-5" fill-rule="nonzero" d="M12 9h1.5v1H12z"/></g></svg>',"icon-list-num-upper-alpha":'<svg width="48" height="48"><g id="icon-list-num-upper-alpha" stroke="none" stroke-width="1" fill-rule="evenodd"><path id="Rectangle-2" opacity=".2" d="M18 12h22v4H18z"/><path id="Rectangle-2-Copy" opacity=".2" d="M18 22h22v4H18z"/><path id="Rectangle-2-Copy-2" opacity=".2" d="M18 32h22v4H18z"/><path d="M12.6 17l-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3zM11 12.3l-.7 2.3h1.6l-.8-2.3zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7zM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7zM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z" id="A.-B.-C."/></g></svg>',"icon-list-num-upper-roman":'<svg width="48" height="48"><g id="icon-list-num-upper-roman" stroke="none" stroke-width="1" fill-rule="evenodd"><path id="Rectangle-2" opacity=".2" d="M18 12h22v4H18z"/><path id="Rectangle-2-Copy" opacity=".2" d="M18 22h22v4H18z"/><path id="Rectangle-2-Copy-2" opacity=".2" d="M18 32h22v4H18z"/><path d="M15.1 17v-1.2h1.3V17H15zm0 10v-1.2h1.3V27H15zm0 10v-1.2h1.3V37H15z" id=".-.-."/><path id="Rectangle" fill-rule="nonzero" d="M12 20h1.5v7H12z"/><path id="Rectangle-Copy-6" fill-rule="nonzero" d="M12 30h1.5v7H12z"/><path id="Rectangle-Copy-2" fill-rule="nonzero" d="M9 20h1.5v7H9z"/><path id="Rectangle-Copy-7" fill-rule="nonzero" d="M9 30h1.5v7H9z"/><path id="Rectangle-Copy-10" fill-rule="nonzero" d="M6 30h1.5v7H6z"/><path id="Rectangle-Copy-4" fill-rule="nonzero" d="M12 10h1.5v7H12z"/></g></svg>',"icon-lock":'<svg width="24" height="24"><g id="icon-lock" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3zM10 8v3h4V8a1 1 0 0 0-.3-.7A1 1 0 0 0 13 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7z" id="shape"/></g></svg>',"icon-ltr":'<svg width="24" height="24"><g id="icon-ltr" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M11 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 7.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L11 5zM4.4 16.2L6.2 15l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6z" id="shape"/></g></svg>',"icon-new-document":'<svg width="24" height="24"><g id="icon-new-document" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3zM17 19H7V5h6v4h4v10z" id="Shape" fill-rule="nonzero"/></g></svg>',"icon-new-tab":'<svg width="24" height="24"><g id="icon-new-tab" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M15 13l2-2v8H5V7h8l-2 2H7v8h8v-4zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19z" id="shape"/></g></svg>',"icon-non-breaking":'<svg width="24" height="24"><g id="icon-non-breaking" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M11 11H8a1 1 0 1 1 0-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-3zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1z" id="shape"/></g></svg>',"icon-notice":'<svg width="24" height="24"><g id="icon-notice" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M17.8 9.8L15.4 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7l2.3 5.8zm0 0l2.2 5.7-2.3-5.8zM13 17v-2h-2v2h2zm0-4V7h-2v6h2z" id="shape"/></g></svg>',"icon-ordered-list":'<svg width="24" height="24"><g id="icon-ordered-list" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 1 1 0-2zM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 0 1-.5-.5V5h-.5a.5.5 0 0 1 0-1H6zm-1 8.8l.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2H4.5a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3zM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 0 1 0-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 1 1 0-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 1 1 0-1H6c.6 0 1 .4 1 1z" id="shape"/></g></svg>',"icon-orientation":'<svg width="24" height="24"><g id="icon-orientation" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M7.3 6.4L1 13l6.4 6.5 6.5-6.5-6.5-6.5zM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7zM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 0 1 0-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 1 1-4.3 16.9l1.5-1.5A7 7 0 1 0 13 6h-1z" id="Shape" fill-rule="nonzero"/></g></svg>',"icon-outdent":'<svg width="24" height="24"><g id="icon-outdent" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2zm1.6-3.8a1 1 0 0 1-1.2 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 0 1 1.2 1.6L6.8 12l1.8 1.2z" id="Combined-Shape"/></g></svg>',"icon-page-break":'<svg width="24" height="24"><g id="icon-page-break" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 0 1 0-2zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2z" id="shape"/><path d="M7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1z" id="Combined-Shape"/><path d="M6 22a1 1 0 0 1-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5H7v5c0 .6-.4 1-1 1z" id="Combined-Shape-Copy"/></g></svg>',"icon-paragraph":'<svg width="24" height="24"><g id="icon-paragraph" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5z" id="shape"/></g></svg>',"icon-paste-text":'<svg width="24" height="24"><g id="icon-paste-text" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9zM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1zm1.5-9.5v9h9v-9h-9zM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2z" id="Combined-Shape" fill-rule="nonzero"/></g></svg>',"icon-paste":'<svg width="24" height="24"><g id="icon-paste" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9zM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1zm1.5-9.5v9h9v-9h-9zM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1z" id="Combined-Shape" fill-rule="nonzero"/></g></svg>',"icon-plus":'<svg width="24" height="24"><g id="icon-plus" stroke="#000" stroke-width="2" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"><path d="M12 5v14M5 12h14" id="Shape"/></g></svg>',"icon-preferences":'<svg width="24" height="24"><g id="icon-preferences" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M20.1 13.5l-1.9.2a5.8 5.8 0 0 1-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 0 1-1.4 0l-1.5-1.2a6.2 6.2 0 0 1-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 0 1-1-.9l-.2-1.9a5.8 5.8 0 0 1-1.5-.6l-1.5 1.2a1 1 0 0 1-1.4 0l-.7-.7a1 1 0 0 1 0-1.4l1.2-1.5a6.2 6.2 0 0 1-.6-1.5l-1.9-.2a1 1 0 0 1-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 0 1 .6-1.5L5.2 7.3a1 1 0 0 1 0-1.4l.7-.7a1 1 0 0 1 1.4 0l1.5 1.2a6.2 6.2 0 0 1 1.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 0 1 1.5.6l1.5-1.2a1 1 0 0 1 1.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 0 1 .6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1zM12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6z" id="Combined-Shape"/></g></svg>',"icon-preview":'<svg width="24" height="24"><g id="icon-preview" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 0 0 2.1-2.8 15.7 15.7 0 0 0-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 0 0-6.7 3.2A16.2 16.2 0 0 0 3.2 12c0 .2.2.3.3.5zm-2.4-1l.7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 0 1 2.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 0 1-2.8-3.7 1 1 0 0 1 0-1zm12-3.3a2 2 0 1 0 2.7 2.6 4 4 0 1 1-2.6-2.6z" id="Combined-Shape" fill-rule="nonzero"/></g></svg>',"icon-print":'<svg width="24" height="24"><g id="icon-print" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M18 8H6a3 3 0 0 0-3 3v6h2v3h14v-3h2v-6a3 3 0 0 0-3-3zm-1 10H7v-4h10v4zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5zm.5-8H6v2h12V5z" id="Shape" fill-rule="nonzero"/></g></svg>',"icon-quote":'<svg width="24" height="24"><g id="icon-quote" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3z" id="Shape" fill-rule="nonzero"/></g></svg>',"icon-redo":'<svg width="24" height="24"><g id="icon-redo" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 1 1-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 1 1 1.4-1.4l5 5a1 1 0 0 1 0 1.4l-5 5a1 1 0 0 1-1.4-1.4l3.3-3.3z" id="Combined-Shape" fill-rule="nonzero"/></g></svg>',"icon-reload":'<svg width="24" height="24"><g id="icon-reload" stroke="none" stroke-width="1" fill-rule="evenodd"><g id="Group" transform="rotate(-45 13.2 13.2)" fill-rule="nonzero"><path d="M19.8 13.7l-2.4-4.2-.2-.2a1 1 0 0 0-1.5 0l-3.2 4a1 1 0 1 0 1.5 1.2l1.5-1.7a7.8 7.8 0 0 1-5.8 6c-2.5.6-5.1-.1-7-2a1 1 0 1 0-1.4 1.4 9.5 9.5 0 0 0 8.9 2.5 9.9 9.9 0 0 0 7.2-7.2l.7 1.2a1 1 0 1 0 1.7-1z" id="Shape" transform="matrix(-1 0 0 1 21 0)"/><path d="M13 9.4a1 1 0 0 0-1.4.1l-1.8 2a8 8 0 0 1 6-7.4c2.8-.5 5.6.4 7.5 2.4a1 1 0 0 0 1.5-1.3 9.5 9.5 0 0 0-9.3-3 10 10 0 0 0-7.5 8l-.6-1a1 1 0 0 0-1.7 1l2.6 4.3a1 1 0 0 0 1.6.1l3.2-3.8c.4-.4.3-1-.1-1.4z" id="Shape" transform="matrix(-1 0 0 1 30.6 0)"/></g></g></svg>',"icon-remove-formatting":'<svg width="24" height="24"><g id="icon-remove-formatting" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M13.2 6a1 1 0 0 1 0 .2l-2.6 10a1 1 0 0 1-1 .8h-.2a.8.8 0 0 1-.8-1l2.6-10H8a1 1 0 1 1 0-2h9a1 1 0 0 1 0 2h-3.8zM5 18h7a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2zm13 1.5L16.5 18 15 19.5a.7.7 0 0 1-1-1l1.5-1.5-1.5-1.5a.7.7 0 0 1 1-1l1.5 1.5 1.5-1.5a.7.7 0 0 1 1 1L17.5 17l1.5 1.5a.7.7 0 0 1-1 1z" id="shape"/></g></svg>',"icon-remove":'<svg width="24" height="24"><g id="icon-remove" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M16 7h3a1 1 0 0 1 0 2h-1v9a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V9H5a1 1 0 1 1 0-2h3V6a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3v1zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 0 0-1 1v1h4zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9zm-7 3a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4zm4 0a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4z" id="Combined-Shape" fill-rule="nonzero"/></g></svg>',"icon-resize-handle":'<svg width="10" height="10"><g id="icon-resize-handle" stroke="none" stroke-width="1" fill-rule="nonzero"><path d="M8.1 1.1A.5.5 0 1 1 9 2l-7 7A.5.5 0 1 1 1 8l7-7z" id="Line"/><path d="M8.1 5.1A.5.5 0 1 1 9 6l-3 3A.5.5 0 1 1 5 8l3-3z" id="Line-2"/></g></svg>',"icon-resize":'<svg width="24" height="24"><g id="icon-resize" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-6a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3A1 1 0 0 1 4 11V5z" id="shape"/></g></svg>',"icon-restore-draft":'<svg width="24" height="24"><g id="icon-restore-draft" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1z" id="shape"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10z" id="Combined-Shape" fill-rule="nonzero"/></g></svg>',"icon-rotate-left":'<svg width="24" height="24"><g id="icon-rotate-left" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10z" id="Combined-Shape" fill-rule="nonzero"/></g></svg>',"icon-rotate-right":'<svg width="24" height="24"><g id="icon-rotate-right" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M20 8V5a1 1 0 0 1 2 0v6c0 .6-.4 1-1 1h-6a1 1 0 0 1 0-2h4.3L16 7A7.2 7.2 0 0 0 7.7 6a7 7 0 0 0 3 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 0 1 1.4 1.5A9.2 9.2 0 0 1 2.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8z" id="Combined-Shape" fill-rule="nonzero"/></g></svg>',"icon-rtl":'<svg width="24" height="24"><g id="icon-rtl" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 4.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L8 5zm12 11.2a1 1 0 1 1-1 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 1 1 1 1.6L18.4 15l1.8 1.2z" id="shape"/></g></svg>',"icon-save":'<svg width="24" height="24"><g id="icon-save" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M5 16h14a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2c0-1.1.9-2 2-2zm0 2v2h14v-2H5zm10 0h2v2h-2v-2zm-4-6.4L8.7 9.3a1 1 0 1 0-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 1 0-1.4-1.4L13 11.6V4a1 1 0 0 0-2 0v7.6z" id="Combined-Shape" fill-rule="nonzero"/></g></svg>',"icon-search":'<svg width="24" height="24"><g id="icon-search" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12z" id="Combined-Shape" fill-rule="nonzero"/></g></svg>',"icon-select-all":'<svg width="24" height="24"><g id="icon-select-all" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M3 5h2V3a2 2 0 0 0-2 2zm0 8h2v-2H3v2zm4 8h2v-2H7v2zM3 9h2V7H3v2zm10-6h-2v2h2V3zm6 0v2h2a2 2 0 0 0-2-2zM5 21v-2H3c0 1.1.9 2 2 2zm-2-4h2v-2H3v2zM9 3H7v2h2V3zm2 18h2v-2h-2v2zm8-8h2v-2h-2v2zm0 8a2 2 0 0 0 2-2h-2v2zm0-12h2V7h-2v2zm0 8h2v-2h-2v2zm-4 4h2v-2h-2v2zm0-16h2V3h-2v2zM7 17h10V7H7v10zm2-8h6v6H9V9z" id="Shape" fill-rule="nonzero"/></g></svg>',"icon-selected":'<svg width="24" height="24"><g id="icon-selected" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M12 21a9 9 0 1 1 0-18 9 9 0 0 1 0 18zm-2.4-6.1L7 12.3a.7.7 0 0 0-1 1L9.6 17 18 8.6a.7.7 0 0 0 0-1 .7.7 0 0 0-1 0l-7.4 7.3z" id="Combined-Shape"/></g></svg>',"icon-settings":'<svg width="24" height="24"><g id="icon-settings" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V8H5a1 1 0 1 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6zM8 8h2V6H8v2zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V13H5a1 1 0 0 1 0-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6zM14 13h2v-2h-2v2zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V18H5a1 1 0 0 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6zM8 18h2v-2H8v2z" id="shape"/></g></svg>',"icon-sharpen":'<svg width="24" height="24"><g id="icon-sharpen" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M16 6l4 4-8 9-8-9 4-4h8zm-4 10.2l5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2z" id="shape"/></g></svg>',"icon-sourcecode":'<svg width="24" height="24"><g id="icon-sourcecode" stroke="none" stroke-width="1" fill-rule="nonzero"><path d="M10.7 9.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2l-4.1 4.4c-.3.3-.8.3-1.2 0l-4.2-4.4a.8.8 0 0 1 0-1.2c.3-.3.8-.3 1.1 0L7 13l3.7-3.8z" id="Shape" transform="rotate(90 7 12)"/><path d="M20.7 9.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2l-4.1 4.4c-.3.3-.8.3-1.2 0l-4.2-4.4a.8.8 0 0 1 0-1.2c.3-.3.8-.3 1.1 0L17 13l3.7-3.8z" id="Shape-Copy" transform="matrix(0 1 1 0 5 -5)"/></g></svg>',"icon-spell-check":'<svg width="24" height="24"><g id="icon-spell-check" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6zm0-3v2h2V5H6zm13 0h-3v5h3v1h-3a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1zm-5 1.5l-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5zM13 10V8h-2v2h2zm0-3V5h-2v2h2zm3 5l1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12z" id="shape"/></g></svg>',"icon-strike-through":'<svg width="24" height="24"><g id="icon-strike-through" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 0 1 7 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1z" id="s"/><path d="M5 11h14a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2z" id="Rectangle" fill-rule="nonzero"/></g></svg>',"icon-subscript":'<svg width="24" height="24"><g id="icon-subscript" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M10.4 10l4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10zM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 0 0-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 0 1-1.3 1.3l-.6.6h2.6V19z" id="Shape" fill-rule="nonzero"/></g></svg>',"icon-superscript":'<svg width="24" height="24"><g id="icon-superscript" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M15 9.4L10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11z" id="Shape" fill-rule="nonzero"/></g></svg>',"icon-table-cell-properties":'<svg width="24" height="24"><g id="icon-table-cell-properties" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M4 5h16v14H4V5zm10 10h-4v3h4v-3zm0-8h-4v3h4V7zM9 7H5v3h4V7zm-4 4v3h4v-3H5zm10 0v3h4v-3h-4zm0-1h4V7h-4v3zM5 15v3h4v-3H5zm10 3h4v-3h-4v3z" id="shape"/></g></svg>',"icon-table-cell-select-all":'<svg width="24" height="24"><g id="icon-table-cell-select-all" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M12.5 5.5v6h6v-6h-6zm-1 0h-6v6h6v-6zm1 13h6v-6h-6v6zm-1 0v-6h-6v6h6zm-7-14h15v15h-15v-15z" id="Combined-Shape" fill-rule="nonzero"/></g></svg>',"icon-table-cell-select-inner":'<svg width="24" height="24"><g id="icon-table-cell-select-inner" stroke="none" stroke-width="1" fill-rule="nonzero"><path d="M5.5 5.5v13h13v-13h-13zm-1-1h15v15h-15v-15z" id="Rectangle-5-Copy" opacity=".2"/><path d="M11.5 11.5v-7h1v7h7v1h-7v7h-1v-7h-7v-1h7z" id="Combined-Shape"/></g></svg>',"icon-table-delete-column":'<svg width="24" height="24"><g id="icon-table-delete-column" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M9 11.2l1 1v.2l-1 1v-2.2zm5 1l1-1v2.2l-1-1v-.2zM20 5v14H4V5h16zm-1 2h-4v.8l-.2-.2-.8.8V7h-4v1.4l-.8-.8-.2.2V7H5v11h4v-1.8l.5.5.5-.4V18h4v-1.8l.8.8.2-.3V18h4V7zm-3.9 3.4l-1.8 1.9 1.8 1.9c.4.3.4.9 0 1.2-.3.3-.8.3-1.2 0L12 13.5l-1.8 1.9a.8.8 0 0 1-1.2 0 .9.9 0 0 1 0-1.2l1.8-1.9-1.9-2a.9.9 0 0 1 1.2-1.2l2 2 1.8-1.8c.3-.4.9-.4 1.2 0a.8.8 0 0 1 0 1.1z" id="shape"/></g></svg>',"icon-table-delete-row":'<svg width="24" height="24"><g id="icon-table-delete-row" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M16.7 8.8l1.1 1.2-2.4 2.5L18 15l-1.2 1.2-2.5-2.5-2.4 2.5-1.3-1.2 2.5-2.5-2.5-2.5 1.2-1.3 2.6 2.6 2.4-2.5zM4 5h16v14H4V5zm15 5V7H5v3h4.8l1 1H5v3h5.8l-1 1H5v3h14v-3h-.4l-1-1H19v-3h-1.3l1-1h.3z" id="shape"/></g></svg>',"icon-table-delete-table":'<svg width="24" height="26"><g id="icon-table-delete-table" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M4 6h16v14H4V6zm1 2v11h14V8H5zm11.7 8.7l-1.5 1.5L12 15l-3.3 3.2-1.4-1.5 3.2-3.2-3.3-3.2 1.5-1.5L12 12l3.2-3.2 1.5 1.5-3.2 3.2 3.2 3.2z" id="shape"/></g></svg>',"icon-table-insert-column-after":'<svg width="24" height="24"><g id="icon-table-insert-column-after" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M14.3 9c.4 0 .7.3.7.6v2.2h2.1c.4 0 .7.3.7.7 0 .4-.3.7-.7.7H15v2.2c0 .3-.3.6-.7.6a.7.7 0 0 1-.6-.6v-2.2h-2.2a.7.7 0 0 1 0-1.4h2.2V9.6c0-.3.3-.6.6-.6zM4 5h16v14H4V5zm5 13v-3H5v3h4zm0-4v-3H5v3h4zm0-4V7H5v3h4zm10 8V7h-9v11h9z" id="shape"/></g></svg>',"icon-table-insert-column-before":'<svg width="24" height="24"><g id="icon-table-insert-column-before" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M9.7 16a.7.7 0 0 1-.7-.6v-2.2H6.9a.7.7 0 0 1 0-1.4H9V9.6c0-.3.3-.6.7-.6.3 0 .6.3.6.6v2.2h2.2c.4 0 .8.3.8.7 0 .4-.4.7-.8.7h-2.2v2.2c0 .3-.3.6-.6.6zM4 5h16v14H4V5zm10 13V7H5v11h9zm5 0v-3h-4v3h4zm0-4v-3h-4v3h4zm0-4V7h-4v3h4z" id="shape"/></g></svg>',"icon-table-insert-row-above":'<svg width="24" height="24"><g id="icon-table-insert-row-above" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M14.8 10.5c0 .3-.2.5-.5.5h-1.8v1.8c0 .3-.2.5-.5.5a.5.5 0 0 1-.5-.6V11H9.7a.5.5 0 0 1 0-1h1.8V8.3c0-.3.2-.6.5-.6s.5.3.5.6V10h1.8c.3 0 .5.2.5.5zM4 5h16v14H4V5zm5 13v-3H5v3h4zm5 0v-3h-4v3h4zm5 0v-3h-4v3h4zm0-4V7H5v7h14z" id="shape"/></g></svg>',"icon-table-insert-row-after":'<svg width="24" height="24"><g id="icon-table-insert-row-after" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M9.2 14.5c0-.3.2-.5.5-.5h1.8v-1.8c0-.3.2-.5.5-.5s.5.2.5.6V14h1.8c.3 0 .5.2.5.5s-.2.5-.5.5h-1.8v1.7c0 .3-.2.6-.5.6a.5.5 0 0 1-.5-.6V15H9.7a.5.5 0 0 1-.5-.5zM4 5h16v14H4V5zm6 2v3h4V7h-4zM5 7v3h4V7H5zm14 11v-7H5v7h14zm0-8V7h-4v3h4z" id="shape"/></g></svg>',"icon-table-left-header":'<svg width="24" height="24"><g id="icon-table-left-header" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M4 5h16v13H4V5zm10 12v-3h-4v3h4zm0-4v-3h-4v3h4zm0-4V6h-4v3h4zm5 8v-3h-4v3h4zm0-4v-3h-4v3h4zm0-4V6h-4v3h4z" id="shape"/></g></svg>',"icon-table-merge-cells":'<svg width="24" height="24"><g id="icon-table-merge-cells" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M4 5h16v14H4V5zm6 13h9v-7h-9v7zm4-11h-4v3h4V7zM9 7H5v3h4V7zm-4 4v3h4v-3H5zm10-1h4V7h-4v3zM5 15v3h4v-3H5z" id="shape"/></g></svg>',"icon-table-row-properties":'<svg width="24" height="24"><g id="icon-table-row-properties" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M4 5h16v14H4V5zm10 10h-4v3h4v-3zm0-8h-4v3h4V7zM9 7H5v3h4V7zm6 3h4V7h-4v3zM5 15v3h4v-3H5zm10 3h4v-3h-4v3z" id="shape"/></g></svg>',"icon-table-split-cells":'<svg width="24" height="24"><g id="icon-table-split-cells" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M4 5h16v14H4V5zm6 2v3h4V7h-4zM9 18v-3H5v3h4zm0-4v-3H5v3h4zm0-4V7H5v3h4zm10 8v-7h-9v7h9zm0-8V7h-4v3h4zm-3.5 4.5l1.5 1.6c.3.2.3.7 0 1-.2.2-.7.2-1 0l-1.5-1.6-1.6 1.5c-.2.3-.7.3-1 0a.7.7 0 0 1 0-1l1.6-1.5-1.5-1.6a.7.7 0 0 1 1-1l1.5 1.6 1.6-1.5c.2-.3.7-.3 1 0 .2.2.2.7 0 1l-1.6 1.5z" id="shape"/></g></svg>',"icon-table-top-header":'<svg width="24" height="24"><g id="icon-table-top-header" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M4 5h16v13H4V5zm5 12v-3H5v3h4zm0-4v-3H5v3h4zm5 4v-3h-4v3h4zm0-4v-3h-4v3h4zm5 4v-3h-4v3h4zm0-4v-3h-4v3h4z" id="shape"/></g></svg>',"icon-table":'<svg width="24" height="24"><g id="icon-table" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M4 5h16v14H4V5zm6 9h4v-3h-4v3zm4 1h-4v3h4v-3zm0-8h-4v3h4V7zM9 7H5v3h4V7zm-4 4v3h4v-3H5zm10 0v3h4v-3h-4zm0-1h4V7h-4v3zM5 15v3h4v-3H5zm10 3h4v-3h-4v3z" id="shape"/></g></svg>',"icon-template":'<svg width="24" height="24"><g id="icon-template" stroke="none" stroke-width="1" fill-rule="evenodd"><g id="stamp" transform="translate(3 3)" fill-rule="nonzero"><path d="M16 16v-1H2v1h14zM6 13V9a5 5 0 1 1 6 0v4h4a2 2 0 0 1 2 2v3H0v-3c0-1.1.9-2 2-2h4zm4 0V8l.8-.6a3 3 0 1 0-3.6 0L8 8v5h2z" id="Shape"/></g></g></svg>',"icon-temporary-placeholder":'<svg width="24" height="24"><g id="icon-temporary-placeholder" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M20.5 2.5c-.8 0-1.5.7-1.5 1.5a1.5 1.5 0 0 1-3 0 3 3 0 0 0-6 0v2H8.5c-.3 0-.5.2-.5.5v1a8 8 0 1 0 6 0v-1c0-.3-.2-.5-.5-.5H11V4a2 2 0 0 1 4 0 2.5 2.5 0 0 0 5 0c0-.3.2-.5.5-.5a.5.5 0 0 0 0-1zM8.1 10.9a5 5 0 0 0-1.2 7 .5.5 0 0 1-.8.5 6 6 0 0 1 1.5-8.3.5.5 0 1 1 .5.8z" id="Shape" fill-rule="nonzero"/></g></svg>',"icon-text-color":'<svg width="24" height="24"><g id="icon-text-color" stroke="none" stroke-width="1" fill-rule="evenodd"><path id="color" d="M3 18h18v3H3z"/><path d="M8.7 16h-.8a.5.5 0 0 1-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 0 1-.5.6h-.8a.5.5 0 0 1-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4zm2.6-7.6l-.6 2a.5.5 0 0 0 .5.6h1.6a.5.5 0 0 0 .5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4z" id="shape"/></g></svg>',"icon-toc":'<svg width="24" height="24"><g id="icon-toc" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2z" id="shape"/></g></svg>',"icon-translate":'<svg width="24" height="24"><g id="icon-translate" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M12.7 14.3l-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 0 1 0-1l3.1-3A12.4 12.4 0 0 1 6.7 9H8a10.1 10.1 0 0 0 1.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 1 1 0-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 0 1-1 2.4 13.5 13.5 0 0 1-1.7 2.3l1.9 1.8zm4.3-3l2.7 7.3a.5.5 0 0 1-.4.7 1 1 0 0 1-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 0 1-1 .7.5.5 0 0 1-.4-.7l2.7-7.4a1 1 0 1 1 2 0zm-2.2 4.4h2.4L16 12.5l-1.2 3.2z" id="shape"/></g></svg>',"icon-underline":'<svg width="24" height="24"><g id="icon-underline" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M16 5c.6 0 1 .4 1 1v5.5a4 4 0 0 1-.4 1.8l-1 1.4a5.3 5.3 0 0 1-5.5 1 5 5 0 0 1-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 0 1-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 0 0 2.2.8 3.4 3.4 0 0 0 2.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1zM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2z" id="shape"/></g></svg>',"icon-undo":'<svg width="24" height="24"><g id="icon-undo" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 0 1-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 1 1-1.4 1.4l-5-5a1 1 0 0 1 0-1.4l5-5a1 1 0 0 1 1.4 1.4L6.4 8z" id="Combined-Shape" fill-rule="nonzero"/></g></svg>',"icon-unlink":'<svg width="24" height="24"><g id="icon-unlink" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2zm11.6-.6a1 1 0 0 1-1.4-1.4l2.1-2a2 2 0 1 0-2.7-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2zM7.6 6.3a.8.8 0 0 1-1 1.1L3.3 4.2a.7.7 0 1 1 1-1l3.2 3.1zM5.1 8.6a.8.8 0 0 1 0 1.5H3a.8.8 0 0 1 0-1.5H5zm5-3.5a.8.8 0 0 1-1.5 0V3a.8.8 0 0 1 1.5 0V5zm6 11.8a.8.8 0 0 1 1-1l3.2 3.2a.8.8 0 0 1-1 1L16 17zm-2.2 2a.8.8 0 0 1 1.5 0V21a.8.8 0 0 1-1.5 0V19zm5-3.5a.7.7 0 1 1 0-1.5H21a.8.8 0 0 1 0 1.5H19z" id="Combined-Shape" fill-rule="nonzero"/></g></svg>',"icon-unlock":'<svg width="24" height="24"><g id="icon-unlock" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 0 0-.3-.7A1 1 0 0 0 16 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2z" id="shape"/></g></svg>',"icon-unordered-list":'<svg width="24" height="24"><g id="icon-unordered-list" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2zM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1z" id="shape"/></g></svg>',"icon-unselected":'<svg width="24" height="24"><g id="icon-unselected" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M12 21a9 9 0 1 1 0-18 9 9 0 0 1 0 18zm0-1a8 8 0 1 0 0-16 8 8 0 0 0 0 16z" id="Combined-Shape"/></g></svg>',"icon-upload":'<svg width="24" height="24"><g id="icon-upload" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M18 19v-2a1 1 0 0 1 2 0v3c0 .6-.4 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 2 0v2h12zM11 6.4L8.7 8.7a1 1 0 0 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 1 1-1.4 1.4L13 6.4V16a1 1 0 0 1-2 0V6.4z" id="Combined-Shape" fill-rule="nonzero"/></g></svg>',"icon-user":'<svg width="24" height="24"><g id="icon-user" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M12 24a12 12 0 1 1 0-24 12 12 0 0 1 0 24zm-8.7-5.3a11 11 0 0 0 17.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7zM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13z" id="Shape" fill-rule="nonzero"/></g></svg>',"icon-warning":'<svg width="24" height="24"><g id="icon-warning" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6zM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3zm.7-3l.3-4a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7l.3 4h1.4z" id="shape"/></g></svg>',"icon-zoom-in":'<svg width="24" height="24"><g id="icon-zoom-in" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12zm-1-9a1 1 0 0 1 2 0v6a1 1 0 0 1-2 0V8zm-2 4a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8z" id="Combined-Shape" fill-rule="nonzero"/></g></svg>',"icon-zoom-out":'<svg width="24" height="24"><g id="icon-zoom-out" stroke="none" stroke-width="1" fill-rule="evenodd"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12zm-3-5a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8z" id="Combined-Shape" fill-rule="nonzero"/></g></svg>'},aw=function(t,e){return j.from(iw[t]).getOrThunk(e)},uw=function(t,e){return j.from(e()[t]).getOrThunk(function(){return aw(t,function(){return"!not found!"})})},cw=function(t,e,n){return j.from(e()[t]).getOrThunk(function(){return aw(t,n)})},sw={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},lw=hl({name:"Notification",factory:function(e){var t,n,o,r=Ud({dom:{tag:"p",innerHtml:e.translationProvider(e.text)},behaviours:bi([ug.config({})])}),i=function(t){return{dom:{tag:"div",classes:["tox-bar"],attributes:{style:"width: "+t+"%"}}}},a=function(t){return{dom:{tag:"div",classes:["tox-text"],innerHtml:t+"%"}}},u=Ud({dom:{tag:"div",classes:e.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[i(0)]},a(0)],behaviours:bi([ug.config({})])}),c={updateProgress:function(t,e){t.getSystem().isConnected()&&u.getOpt(t).each(function(t){ug.set(t,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[i(e)]},a(e)])})},updateText:function(t,e){if(t.getSystem().isConnected()){var n=r.get(t);ug.set(n,[_h(e)])}}},s=E(N([e.icon.toArray(),e.level.toArray(),e.level.bind(function(t){return j.from(sw[t])}).toArray()]),function(t){return"icon-"+t});return{uid:e.uid,dom:{tag:"div",attributes:{role:"alert"},classes:e.level.map(function(t){return["tox-notification","tox-notification--in","tox-notification--"+t]}).getOr(["tox-notification","tox-notification--in"])},components:[{dom:{tag:"div",classes:["tox-notification__icon"],innerHtml:(t=s,n=e.iconProvider,o=function(){return t=function(){return""},Tt(s,function(t){return j.from(iw[t])}).getOrThunk(t);var t},Tt(t,function(t){return j.from(n()[t])}).getOrThunk(o))}},{dom:{tag:"div",classes:["tox-notification__body"]},components:[r.asSpec()],behaviours:bi([ug.config({})])}].concat(e.progress?[u.asSpec()]:[]).concat(vl.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"]},components:[{dom:{tag:"div",classes:["tox-icon"],innerHtml:uw("icon-close",e.iconProvider)}}],action:function(t){e.onAction(t)}})),apis:c}},configFields:[Or("level"),br("progress"),br("icon"),br("onAction"),br("text"),br("iconProvider"),br("translationProvider")],apis:{updateProgress:function(t,e,n){t.updateProgress(e,n)},updateText:function(t,e,n){t.updateText(e,n)}}});function fw(r,i,a){var u=i.backstage;return{open:function(t,e){var n=function(){e(),rw.hide(r)},o=Fh(lw.sketch({text:t.text,level:T(["success","error","warning","info"],t.type)?t.type:undefined,progress:!0===t.progressBar,icon:j.from(t.icon),onAction:n,iconProvider:u.shared.providers.icons,translationProvider:u.shared.providers.translate})),r=Fh(rw.sketch({dom:{tag:"div",classes:["tox-notifications-container"]},lazySink:i.backstage.shared.getSink,fireDismissalEventInstead:{}}));return a.add(r),t.timeout&&setTimeout(function(){n()},t.timeout),{close:n,moveTo:function(t,e){rw.showAt(r,{anchor:"makeshift",x:t,y:e},Lh(o))},moveRel:function(t,e){rw.showAt(r,i.backstage.shared.anchors.banner(),Lh(o))},text:function(t){lw.updateText(o,t)},settings:t,getEl:function(){},progressBar:{value:function(t){lw.updateProgress(o,t)}}}},close:function(t){t.close()},reposition:function(t){A(t,function(t){t.moveTo(0,0)}),function(n){if(0<n.length){var t=n.slice(0,1)[0],e=(o=r).inline?o.getElement():o.getContentAreaContainer();t.moveRel(e,"tc-tc"),A(n,function(t,e){0<e&&t.moveRel(n[e-1].getEl(),"bc-tc")})}var o}(t)},getArgs:function(t){return t.settings}}}var dw,mw,hw=/[\u00a0 \t\r\n]/,gw=function(n,t,e,o,r){return void 0===r&&(r=0),(i=n).collapsed&&3===i.startContainer.nodeType?function(t,e,n,o){var r;for(r=e-1;0<=r;r--){if(hw.test(t.charAt(r)))return j.none();if(t.charAt(r)===n)break}return-1===r||e-r<o?j.none():j.some(t.substring(r+1,e))}(e,o,t,r).map(function(t){var e=n.cloneRange();return e.setStart(n.startContainer,n.startOffset-t.length-1),e.setEnd(n.startContainer,n.startOffset),{text:t,rng:e}}):j.none();var i},pw=function(n,t){t.on("keypress",n.onKeypressThrottle);var o=function(t,e){Jn(t,Lt(),{raw:e})};t.on("keydown",function(e){var t=function(){return n.getView().bind(yu.getHighlighted)};n.isActive()&&(8===e.which&&n.onKeypressThrottle(e),27===e.which?n.closeIfNecessary():32===e.which?n.closeIfNecessary():13===e.which?(t().each(Qn),e.preventDefault()):40===e.which?(t().fold(function(){n.getView().each(yu.highlightFirst)},function(t){o(t,e)}),e.preventDefault()):37!==e.which&&38!==e.which&&39!==e.which||t().each(function(t){o(t,e),e.preventDefault()}))})},vw=tinymce.util.Tools.resolve("tinymce.util.Promise"),bw=function(t,e){var n,o,r,i=e(),a=t.selection.getRng(),u=a.startContainer.nodeValue;return(n=a,o=u,r=i,Tt(r.triggerChars,function(e){return gw(n,e,o,n.startOffset).map(function(t){return{range:t.rng,text:t.text,triggerChar:e}})})).map(function(n){var t=B(i.lookupByChar(n.triggerChar),function(t){return n.text.length>=t.minChars&&t.matches(n.range,u,n.text)});return{lookupData:vw.all(E(t,function(e){return e.fetch(n.text,e.maxResults).then(function(t){return{items:t,columns:e.columns,onAction:e.onAction}})})),triggerChar:n.triggerChar,range:n.range}})},yw=Yo([Ir("type",function(){return"autocompleteitem"}),Ir("active",function(){return!1}),Ir("disabled",function(){return!1}),Vr("meta",{}),xr("value"),Mr("text"),Mr("icon")]),xw=Yo([xr("type"),xr("ch"),Ar("minChars",0),Vr("columns",1),Ar("maxResults",10),_r("matches",function(){return!0}),wr("fetch"),wr("onAction")]),ww=function(t){var e,n,o=t.ui.registry.getAll().popups,r=nt(o,function(t){return(e=t,ur("Autocompleter",xw,e)).fold(function(t){throw new Error(lr(t))},function(t){return t});var e}),i=(e=rt(r,function(t){return t.ch}),n={},A(e,function(t){n[t]={}}),Z(n)),a=it(r);return{dataset:r,triggerChars:i,lookupByChar:function(e){return B(a,function(t){return t.ch===e})}}},kw="tox-menu-nav__js",Sw="tox-collection__item",Cw="tox-swatch",Ow={normal:kw,color:Cw},zw="tox-collection__item--enabled",Mw="tox-collection__item-icon",Tw="tox-collection__item-label",Hw="tox-collection__item--active",Vw=function(t){return wt(Ow,t).getOr(kw)},Ew=tinymce.util.Tools.resolve("tinymce.Env"),Aw=tinymce.util.Tools.resolve("tinymce.util.I18n"),Bw=function(t){return{dom:{tag:"span",classes:[Mw],innerHtml:t}}},Dw=function(t){return{dom:{tag:"span",classes:[Tw]},components:[_h(Aw.translate(t))]}},_w=function(t){return{dom:{tag:"span",classes:["tox-collection__item-accessory"],innerHtml:(e=t,n=Ew.mac?{alt:"&#x2325;",ctrl:"&#x2318;",shift:"&#x21E7;",meta:"&#x2318;"}:{meta:"Ctrl"},o=e.split("+"),E(o,function(t){var e=t.toLowerCase();return at(n,e)?n[e]:t}).join("+"))}};var e,n,o},Rw=function(t){return{dom:{tag:"span",classes:[Mw,"tox-collection__item-checkmark"],innerHtml:uw("icon-checkmark",t)}}},Iw=function(t,e){var n,o,r,i,a,u,c,s=t.iconContent.map(function(t){return cw("icon-"+t,e.icons,U(t))});return"color"===t.presets?(a=t.value,{dom:(u=Cw,c=s.getOr(""),xl("custom"===a?'<button class="'+u+' tox-swatches__picker-btn">'+c+"</button>":"remove"===a?'<div class="'+u+' tox-swatch--remove">'+c+"</div>":'<div class="'+u+'" style="background-color: '+a+'" data-mce-color="'+a+'"></div>')),optComponents:[]}):(o=s,r=(n=t).checkMark.orThunk(function(){return o.or(j.some("")).map(Bw)}),i=n.ariaLabel.map(function(t){return{attributes:{title:Aw.translate(t)}}}).getOr({}),{dom:vt({tag:"div",classes:[kw,Sw]},i),optComponents:[r,n.textContent.map(Dw),n.shortcutContent.map(_w),n.caret]})},Fw=function(t){return Ym.config({disabled:t,disableClass:"tox-collection__item--state-disabled"})},Lw=function(t){return Ym.config({disabled:t})},Pw=function(t,e){var n=t.getApi(e);return function(t){t(n)}},jw=function(n,o){return oi(function(t){Pw(n,t)(function(t){var e=n.onSetup(t);null!==e&&e!==undefined&&o.set(e)})})},Nw=function(e,n){return ri(function(t){return Pw(e,t)(n.get())})},Uw={"alloy.execute":["disabling","alloy.base.behaviour","toggling","item-events"]},Ww=function(t){return W(t,function(t){return t.toArray()})},Gw=function(t,e,n){var o,r,i=zt(P);return{type:"item",dom:e.dom,components:Ww(e.optComponents),data:t.data,eventOrder:Uw,itemBehaviours:bi([bm("item-events",[(o=t,r=n,ai(function(t,e){Pw(o,t)(o.onAction),o.triggersSubmenu||r!==dw.CLOSE_ON_EXECUTE||(Kn(t,He()),e.stop())})),jw(t,i),Nw(t,i)]),Fw(t.disabled),ug.config({})].concat(t.itemBehaviours))}},Xw=function(t){return{value:t.value,meta:vt({text:t.text.getOr("")},t.meta)}},$w=U(_s("item-widget",Yh())),qw=$n("cell-over"),Yw=$n("cell-execute"),Kw=function(e,n,t){var o,r=function(t){return Jn(t,Yw,{row:e,col:n})};return Fh({dom:{tag:"div",attributes:(o={role:"button"},o["aria-labelledby"]=t,o)},behaviours:bi([bm("insert-table-picker-cell",[Yr(Rt(),Ha.focus),Yr(Ce(),r),Yr(Ut(),r)]),ba.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),Ha.config({onFocus:function(t){return Jn(t,qw,{row:e,col:n})}})])})},Jw={inserttable:function nB(o){var t,e=$n("size-label"),u=function(t,e,n){for(var o=[],r=0;r<e;r++){for(var i=[],a=0;a<n;a++)i.push(Kw(r,a,t));o.push(i)}return o}(e,10,10),c=Ud({dom:{tag:"span",classes:["tox-insert-table-picker__label"],attributes:{id:e}},components:[_h("0x0")],behaviours:bi([ug.config({})])});return{type:"widget",data:{value:$n("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[$w().widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:(t=u,W(t,function(t){return E(t,Lh)})).concat(c.asSpec()),behaviours:bi([bm("insert-table-picker",[Zr(qw,function(t,e,n){var o,r,i=n.event().row(),a=n.event().col();!function(t,e,n,o,r){for(var i=0;i<o;i++)for(var a=0;a<r;a++)ba.set(t[i][a],i<=e&&a<=n)}(u,i,a,10,10),ug.set(c.get(t),[(o=i,r=a,_h(r+1+"x"+(o+1)))])}),Zr(Yw,function(t,e,n){o.onAction({numRows:n.event().row()+1,numColumns:n.event().col()+1}),Kn(t,He())})]),Kc.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}}},Qw=function(t,a,e){return{dom:{tag:"div",classes:[kw,Sw]},optComponents:[j.some(e),t.map(function(t){return e=a.tag,n=a.styleAttr,o="span",r=[Tw],i=[{dom:{tag:e,attributes:{style:n}},components:[_h(t)]}],{dom:{tag:o,classes:r},components:i};var e,n,o,r,i})]}};(mw=dw||(dw={}))[mw.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",mw[mw.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX";var Zw,tk,ek,nk,ok=function(e,t,n,o,r,i,a){var u=Iw({presets:n,textContent:t?e.text:j.none(),ariaLabel:e.text,iconContent:e.icon,shortcutContent:t?e.shortcut:j.none(),checkMark:j.none(),caret:j.none(),value:e.value},a);return pt(Gw({data:Xw(e),disabled:e.disabled,getApi:function(e){return{setActive:function(t){ba.set(e,t)},isActive:function(){return ba.isOn(e)},isDisabled:function(){return Ym.isDisabled(e)},setDisabled:function(t){return t?Ym.disable(e):Ym.enable(e)}}},onAction:function(t){return o(e.value)},onSetup:function(t){return t.setActive(r),function(){}},triggersSubmenu:!1,itemBehaviours:[]},u,i),{toggling:{toggleClass:zw,toggleOnExecute:!1,selected:e.active}})},rk=function(e,t,n,o,r,i){var a=Iw({presets:n,textContent:t?e.text:j.none(),ariaLabel:e.text,iconContent:e.icon,shortcutContent:j.none(),checkMark:j.none(),caret:j.none(),value:e.value},i);return Gw({data:Xw(e),disabled:e.disabled,getApi:function(){return{}},onAction:function(t){return o(e.value,e.meta)},onSetup:function(){return function(){}},triggersSubmenu:!1,itemBehaviours:[]},a,r)},ik=function(t){return{type:"separator",dom:{tag:"div",classes:["tox-collection__separator"],innerHtml:t.text.getOr("")},components:[]}},ak=function(t,e,n){var o="togglemenuitem"===t.type&&t.active?Rw(n.icons):Bw(""),r=Qw(t.text,t.meta,o);return pt(Gw({data:Xw(t),disabled:t.disabled,getApi:function(){return 10},onAction:t.onAction,onSetup:function(){return function(){}},triggersSubmenu:!1,itemBehaviours:[]},r,e),"togglemenuitem"===t.type?{toggling:{toggleClass:zw,toggleOnExecute:!1,selected:t.active}}:{})},uk=function(t,e,n){var o,r=t.hasSubmenu?j.some((o=n.icons,{dom:{tag:"span",classes:["tox-collection__item-caret"],innerHtml:uw("icon-chevron-right",o)}})):j.none(),i=Iw({presets:"normal",iconContent:t.icon,textContent:t.text,ariaLabel:t.text,caret:r,checkMark:j.none(),shortcutContent:t.shortcut},n);return Gw({data:Xw(t),getApi:function(e){return{isDisabled:function(){return Ym.isDisabled(e)},setDisabled:function(t){return t?Ym.disable(e):Ym.enable(e)}}},disabled:t.disabled,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:t.hasSubmenu,itemBehaviours:[]},i,e)},ck=function(t,e,n){var o=Iw({iconContent:j.none(),textContent:t.text,ariaLabel:t.text,checkMark:j.some(Rw(n.icons)),caret:j.none(),shortcutContent:t.shortcut,presets:"normal"},n);return pt(Gw({data:Xw(t),disabled:t.disabled,getApi:function(e){return{setActive:function(t){ba.set(e,t)},isActive:function(){return ba.isOn(e)},isDisabled:function(){return Ym.isDisabled(e)},setDisabled:function(t){return t?Ym.disable(e):Ym.enable(e)}}},onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},o,e),{toggling:{toggleClass:zw,toggleOnExecute:!1,selected:t.active}})},sk=function(e){return(t=Jw,n=e.fancytype,Object.prototype.hasOwnProperty.call(t,n)?j.some(t[n]):j.none()).map(function(t){return t(e)});var t,n},lk=[Dr("disabled",!1),Mr("text"),Mr("shortcut"),er("value","value",xo(function(){return $n("menuitem-value")}),dr()),Vr("meta",{})],fk=Yo([xr("type"),Ir("hasSubmenu",function(t){return Ot(t,"getSubmenuItems")}),_r("onSetup",function(){return P}),_r("onAction",P),Mr("icon")].concat(lk)),dk=function(t){return ur("menuitem",fk,t)},mk=Yo([xr("type"),Dr("active",!1),_r("onSetup",function(){return P}),wr("onAction")].concat(lk)),hk=function(t){return ur("togglemenuitem",mk,t)},gk=Yo([xr("type"),Dr("active",!1),Mr("icon")].concat(lk)),pk=Yo([xr("type"),Mr("text")]),vk=Yo([xr("type"),(Zw="fancytype",tk=["inserttable"],er(Zw,Zw,bo(),ir(function(t){return T(tk,t)?dt.value(t):dt.error('Value was: "'+t+'". Must be one of ['+E(tk,function(t){return'"'+t+'"'}).join(", ")+"]")}))),_r("onAction",P)]),bk=function(t,o,e){var r=Xa(t.element(),"."+e);if(0<r.length){var n=I(r,function(t){var e=t.dom().getBoundingClientRect().top,n=r[0].dom().getBoundingClientRect().top;return Math.abs(e-n)>o}).getOr(r.length);return j.some({numColumns:n,numRows:Math.ceil(r.length/n)})}return j.none()},yk=function(t,e){return bi([bm(t,e)])},xk=function(t){return yk($n("unnamed-events"),t)},wk=function(t){return{backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:(e=t,"color"===e?"tox-swatches":"tox-menu"),tieredMenu:"tox-tiered-menu"};var e},kk=function(t){var e=wk(t);return{backgroundMenu:e.backgroundMenu,selectedMenu:e.selectedMenu,menu:e.menu,selectedItem:e.selectedItem,item:Vw(t)}},Sk=[ng.parts().items({})],Ck=function(t,e,n){var o=wk(n);return{dom:{tag:"div",classes:N([[o.tieredMenu]])},markers:kk(n)}},Ok=function(t,e){var n=kk(e);return 1===t?{mode:"menu",moveOnTab:!0}:"auto"===t?{mode:"grid",selector:"."+n.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+("color"===e?"tox-swatches__row":"tox-collection__group")}},zk=function(n,o){return function(t){var e=V(t,o);return E(e,function(t){return{dom:n,components:t}})}},Mk=function(e,i){return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(1===e?["tox-collection--list"]:["tox-collection--grid"])},components:[ng.parts().items({preprocess:function(t){return"auto"!==e&&1<e?zk({tag:"div",classes:["tox-collection__group"]},e)(t):(n=function(t,e){return"separator"===i[e].type},o=[],r=[],A(t,function(t,e){n(t,e)?(0<r.length&&o.push(r),r=[]):r.push(t)}),0<r.length&&o.push(r),E(o,function(t){return{dom:{tag:"div",classes:["tox-collection__group"]},components:t}}));var n,o,r}})]}};(nk=ek||(ek={}))[nk.ContentFocus=0]="ContentFocus",nk[nk.UiFocus=1]="UiFocus";var Tk,Hk,Vk=function(t){return console.error(lr(t)),console.log(t),j.none()},Ek=function(t){return t.icon!==undefined},Ak=function(t){return H(t,Ek)},Bk=function(t,e,n){switch(t.type){case"menuitem":return dk(t).fold(Vk,function(t){return j.some(uk(t,e,n))});case"styleitem":return"menuitem"===t.item.type?dk(t.item).fold(Vk,function(t){return j.some(ak(t,e,n))}):"togglemenuitem"===t.item.type?hk(t.item).fold(Vk,function(t){return j.some(ak(t,e,n))}):(console.error("Unsupported style item delegate",t.item),j.none());case"togglemenuitem":return hk(t).fold(Vk,function(t){return j.some(ck(t,e,n))});case"separator":return(r=t,ur("separatormenuitem",pk,r)).fold(Vk,function(t){return j.some(ik(t))});case"fancymenuitem":return(o=t,ur("fancymenuitem",vk,o)).fold(Vk,function(t){return sk(t)});default:return console.error("Unknown item in general menu",t),j.none()}var o,r},Dk=function(t,e,n,o,r){var i,a,u,c,s,l,f;return"color"===r?{value:t,dom:(i=o,f={dom:{tag:"div",classes:["tox-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[ng.parts().items({preprocess:"auto"!==i?zk({tag:"div",classes:["tox-swatches__row"]},i):b})]}]}).dom,components:f.components,items:n}:"normal"===r&&"auto"===o?{value:t,dom:(f=Mk(o,n)).dom,components:f.components,items:n}:"normal"===r&&1===o?{value:t,dom:(f=Mk(1,n)).dom,components:f.components,items:n}:"normal"===r?{value:t,dom:(f=Mk(o,n)).dom,components:f.components,items:n}:"toolbar"!==r||"auto"===o?{value:t,dom:(u=e,c=o,s=r,l=wk(s),{tag:"div",classes:N([[l.menu,"tox-menu-"+c+"-column"],u?[l.hasIcons]:[]])}),components:Sk,items:n}:{value:t,dom:(a=o,f={dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[ng.parts().items({preprocess:zk({tag:"div",classes:["tox-collection__group"]},a)})]}).dom,components:f.components,items:n}},_k=function(t,n,o,r,i,a,u){return Mt(E(t,function(e){return"choiceitem"===e.type?(t=e,ur("choicemenuitem",gk,t)).fold(Vk,function(t){return j.some(ok(t,1===o,r,n,a(e.value),i,u))}):j.none();var t}))},Rk=function(t,n,o,r,i){return Mt(E(t,function(t){return(e=t,ur("Autocompleter.Item",yw,e)).fold(Vk,function(t){return j.some(rk(t,1===o,"normal",n,r,i))});var e}))},Ik=function(t,e,n,o,r,i,a,u){var c=Ak(e),s=_k(e,n,o,"color"!==r?"normal":"color",i,a,u);return Dk(t,c,s,o,r)},Fk=function(t,e,n,o){var r=Ak(e),i=Mt(E(e,function(t){return Bk(t,n,o)}));return Dk(t,r,i,1,"normal")},Lk=function(t){return hg.singleData(t.value,t)},Pk=function(h,g){var p=Fh(rw.sketch({dom:{tag:"div",classes:["tox-autocompleter"]},components:[],lazySink:g.getSink})),t=function(){return rw.isOpen(p)},v=function(){t()&&rw.hide(p)},e=$t(function(){return ww(h)}),n={onKeypressThrottle:Zp(function(t){(" "===t.key?j.none():bw(h,e)).fold(v,function(m){m.lookupData.then(function(t){var e,n,o,r,i,a,u,c,s,l,f=(e=m.triggerChar,o=Tt(n=t,function(t){return j.from(t.columns)}).getOr(1),W(n,function(i){var t=i.items;return Rk(t,function(o,r){var t=h.selection.getRng();gw(t,e,t.startContainer.data,t.startOffset).fold(function(){return console.error("Lost context. Cursor probably moved")},function(t){var e=t.rng,n={hide:v};i.onAction(n,e,o,r)})},o,dw.BUBBLE_TO_SANDBOX,g.providers)})),d=Tt(t,function(t){return j.from(t.columns)}).getOr(1);rw.showAt(p,{anchor:"selection",root:je.fromDom(h.getBody()),getSelection:function(){return j.some({start:function(){return je.fromDom(m.range.startContainer)},soffset:function(){return m.range.startOffset},finish:function(){return je.fromDom(m.range.endContainer)},foffset:function(){return m.range.endOffset}})}},ng.sketch((r=Dk("autocompleter-value",!0,f,d,"normal"),i=d,a=ek.ContentFocus,u="normal",c=a===ek.ContentFocus?ku():wu(),s=Ok(i,u),l=kk(u),{dom:r.dom,components:r.components,items:r.items,value:r.value,markers:{selectedItem:l.selectedItem,item:l.item},movement:s,fakeFocus:a===ek.ContentFocus,focusManager:c,menuBehaviours:xk("auto"!==i?[]:[oi(function(o,t){bk(o,4,l.item).each(function(t){var e=t.numColumns,n=t.numRows;Kc.setGridSize(o,n,e)})})])}))),rw.getContent(p).each(yu.highlightFirst)})})},50).throttle,closeIfNecessary:v,isActive:t,getView:function(){return rw.getContent(p)}};pw(n,h)},jk=function(t){return j.from(t.settings.min_width).filter(z)},Nk=function(t){return j.from(t.settings.min_height).filter(z)},Uk=$n("form-component-change"),Wk=$n("form-close"),Gk=$n("form-cancel"),Xk=$n("form-action"),$k=$n("form-submit"),qk=$n("form-block"),Yk=$n("form-unblock"),Kk=$n("form-tabchange"),Jk=$n("form-resize"),Qk=U([Vr("prefix","form-field"),Qc("fieldBehaviours",[wm,Kl])]),Zk=U([Hs({schema:[br("dom")],name:"label"}),Hs({factory:{sketch:function(t){return{uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}}}},schema:[br("text")],name:"aria-descriptor"}),Ms({factory:{sketch:function(t){var e=bt(t,["factory"]);return t.factory.sketch(e)}},schema:[br("factory")],name:"field"})]),tS=gl({name:"FormField",configFields:Qk(),partFields:Zk(),factory:function(r,t,e,n){var o=ts(r.fieldBehaviours,[wm.config({find:function(t){return Ns(t,r,"field")}}),Kl.config({store:{mode:"manual",getValue:function(t){return wm.getCurrent(t).bind(Kl.getValue)},setValue:function(t,e){wm.getCurrent(t).each(function(t){Kl.setValue(t,e)})}}})]),i=Xr([oi(function(t,e){var o=Ws(t,r,["label","field","aria-descriptor"]);o.field().each(function(n){var e=$n(r.prefix);o.label().each(function(t){Mn(t.element(),"for",e),Mn(n.element(),"id",e)}),o["aria-descriptor"]().each(function(t){var e=$n(r.prefix);Mn(t.element(),"id",e),Mn(n.element(),"aria-labelledby",e)})})})]),a={getField:function(t){return Ns(t,r,"field")},getLabel:function(t){return Ns(t,r,"label")}};return{uid:r.uid,dom:r.dom,components:t,behaviours:o,events:i,apis:a}},apis:{getField:function(t,e){return t.getField(e)},getLabel:function(t,e){return t.getLabel(e)}}}),eS=Object.freeze({getCoupled:function(t,e,n,o){return n.getOrCreate(t,e,o)}}),nS=[yr("others",ar(dt.value,dr()))],oS=xi({fields:nS,name:"coupling",apis:eS,state:Object.freeze({init:function(t){var i={},e=U({});return vi({readState:e,getOrCreate:function(n,o,r){var t=Z(o.others);if(t)return wt(i,r).getOrThunk(function(){var t=wt(o.others,r).getOrDie("No information found for coupled component: "+r)(n),e=n.getSystem().build(t);return i[r]=e});throw new Error("Cannot find coupled component: "+r+". Known coupled components: "+Po(t,null,2))}})}})}),rS=Object.freeze({events:function(t,e){var n=t.stream.streams.setup(t,e);return Xr([Yr(t.event,n),ri(function(){return e.cancel()})].concat(t.cancelEvent.map(function(t){return[Yr(t,function(){return e.cancel()})]}).getOr([])))}}),iS=function(t){var e=zt(null);return vi({readState:function(){return{timer:null!==e.get()?"set":"unset"}},setTimer:function(t){e.set(t)},cancel:function(){var t=e.get();null!==t&&t.cancel()}})},aS=Object.freeze({throttle:iS,init:function(t){return t.stream.streams.state(t)}}),uS=[yr("stream",fr("mode",{throttle:[br("delay"),Vr("stopEvent",!0),na("streams",{setup:function(t,e){var n=t.stream,o=Zp(t.onStream,n.delay);return e.setTimer(o),function(t,e){o.throttle(t,e),n.stopEvent&&e.stop()}},state:iS})]})),Vr("event","input"),Or("cancelEvent"),ta("onStream")],cS=xi({fields:uS,name:"streaming",active:rS,state:aS}),sS=U("sink"),lS=U(Hs({name:sS(),overrides:U({dom:{tag:"div"},behaviours:bi([Nx.config({useFixed:!0})]),events:Xr([ti(Lt()),ti(At()),ti(Ut())])})})),fS=undefined&&undefined.__assign||function(){return(fS=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};(Hk=Tk||(Tk={}))[Hk.HighlightFirst=0]="HighlightFirst",Hk[Hk.HighlightNone=1]="HighlightNone";var dS=function(t,e){var n=t.getHotspot(e).getOr(e);return t.layouts.fold(function(){return{anchor:"hotspot",hotspot:n}},function(t){return{anchor:"hotspot",hotspot:n,layouts:t}})},mS=function(t,e,n,o,r,i,a){var u,c,s,l,f,d,m,h,g,p,v=dS(t,n);return(c=v,l=o,f=r,d=a,m=e,h=s=n,g=(0,(u=t).fetch)(h).map(m),p=pS(s,u),g.map(function(t){return hg.sketch(fS({},f.menu(),{uid:al(""),data:t,highlightImmediately:d===Tk.HighlightFirst,onOpenMenu:function(t,e){var n=p().getOrDie();Nx.position(n,c,e),Jx.decloak(l)},onOpenSubmenu:function(t,e,n){var o=p().getOrDie();Nx.position(o,{anchor:"submenu",item:e},n),Jx.decloak(l)},onEscape:function(){return Ha.focus(s),Jx.close(l),j.some(!0)}}))})).map(function(t){return Jx.cloak(o),Jx.open(o,t),i(o),o})},hS=function(t,e,n,o,r,i,a){return Jx.close(o),ub.pure(o)},gS=function(t,e,n,o,r,i){var a=oS.getCoupled(n,"sandbox");return(Jx.isOpen(a)?hS:mS)(t,e,n,a,o,r,i)},pS=function(e,t){return e.getSystem().getByUid(t.uid+"-"+sS()).map(function(t){return function(){return dt.value(t)}}).getOrThunk(function(){return t.lazySink.fold(function(){return function(){return dt.error(new Error("No internal sink is specified, nor could an external sink be found"))}},function(t){return function(){return t(e)}})})},vS=function(c,s,l){var e,f=(e=$n("aria-owns"),{id:U(e),link:function(t){Mn(t,"aria-owns",e)},unlink:function(t){En(t,"aria-owns")}}),t=pS(s,c);return{dom:{tag:"div",classes:c.sandboxClasses,attributes:{id:f.id()}},behaviours:ns(c.sandboxBehaviours,[Kl.config({store:{mode:"memory",initialValue:s}}),Jx.config({onOpen:function(t,e){var n,o,r,i,a,u=dS(c,s);f.link(s.element()),c.matchWidth&&(n=u.hotspot,o=e,r=c.useMinWidth,i=wm.getCurrent(o).getOr(o),a=lf(n.element()),r?Ba(i.element(),"min-width",a+"px"):sf(i.element(),a)),c.onOpen(u,t,e),l!==undefined&&l.onOpen!==undefined&&l.onOpen(t,e)},onClose:function(t,e){f.unlink(s.element()),l!==undefined&&l.onClose!==undefined&&l.onClose(t,e)},isPartOf:function(t,e,n){return ty(e,n)||ty(s,n)},getAttachPoint:function(){return t().getOrDie()}}),wm.config({find:function(t){return Jx.getState(t).bind(function(t){return wm.getCurrent(t)})}}),ew({isExtraPart:U(!1)})])}},bS=function(t,e,n){var o=Kl.getValue(n);Kl.setValue(e,o),xS(e)},yS=function(t,e){var n=t.element(),o=zm(n),r=n.dom();"number"!==Hn(n,"type")&&e(r,o)},xS=function(t){yS(t,function(t,e){return t.setSelectionRange(e.length,e.length)})},wS=function(t,e,o){if(t.selectsOver){var n=Kl.getValue(e),r=t.getDisplayText(n),i=Kl.getValue(o);return 0===t.getDisplayText(i).indexOf(r)?j.some(function(){var t,n;bS(0,e,o),t=e,n=r.length,yS(t,function(t,e){return t.setSelectionRange(n,e.length)})}):j.none()}return j.none()},kS=U("alloy.typeahead.itemexecute"),SS=undefined&&undefined.__assign||function(){return(SS=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},CS=function(){return[Vr("sandboxClasses",[]),es("sandboxBehaviours",[wm,aa,Jx,Kl])]},OS=U([Or("lazySink"),br("fetch"),Vr("minChars",5),Vr("responseTime",1e3),Qi("onOpen"),Vr("getHotspot",j.some),Vr("layouts",j.none()),Vr("eventOrder",{}),Rr("model",{},[Vr("getDisplayText",function(t){return t.meta!==undefined&&t.meta.text!==undefined?t.meta.text:t.value}),Vr("selectsOver",!0),Vr("populateFromBrowse",!0)]),Qi("onSetValue"),Zi("onExecute"),Qi("onItemExecute"),Vr("inputClasses",[]),Vr("inputAttributes",{}),Vr("inputStyles",{}),Vr("matchWidth",!0),Vr("useMinWidth",!1),Vr("dismissOnBlur",!0),Ki(["openClass"]),Or("initialData"),Qc("typeaheadBehaviours",[Ha,Kl,cS,Kc,ba,oS]),Ir("previewing",function(){return zt(!0)})].concat(Hm()).concat(CS())),zS=U([Ts({schema:[Yi()],name:"menu",overrides:function(o){return{fakeFocus:!0,onHighlight:function(e,n){o.previewing.get()?e.getSystem().getByUid(o.uid).each(function(t){wS(o.model,t,n).fold(function(){return yu.dehighlight(e,n)},function(t){return t()})}):e.getSystem().getByUid(o.uid).each(function(t){o.model.populateFromBrowse&&bS(o.model,t,n)}),o.previewing.set(!1)},onExecute:function(t,e){return t.getSystem().getByUid(o.uid).toOption().map(function(t){return Jn(t,kS(),{item:e}),!0})},onHover:function(t,e){o.previewing.set(!1),t.getSystem().getByUid(o.uid).each(function(t){o.model.populateFromBrowse&&bS(o.model,t,e)})}}}})]),MS=gl({name:"Typeahead",configFields:OS(),partFields:zS(),factory:function(r,t,e,i){var n=function(t,e,n){r.previewing.set(!1);var o=oS.getCoupled(t,"sandbox");Jx.isOpen(o)?wm.getCurrent(o).each(function(t){yu.getHighlighted(t).fold(function(){n(t)},function(){eo(o,t.element(),"keydown",e)})}):mS(r,a(t),t,o,i,function(t){wm.getCurrent(t).each(n)},Tk.HighlightFirst).get(P)},o=Vm(r),a=function(o){return function(t){var e=it(t.menus),n=W(e,function(t){return B(t.items,function(t){return"item"===t.type})});return Kl.getState(o).update(E(n,function(t){return t.data})),t}},u=[Ha.config({}),Kl.config({onSetValue:r.onSetValue,store:SS({mode:"dataset",getDataKey:function(t){return zm(t.element())},getFallbackEntry:function(t){return{value:t,meta:{}}},setValue:function(t,e){Mm(t.element(),r.model.getDisplayText(e))}},r.initialData.map(function(t){return kt("initialValue",t)}).getOr({}))}),cS.config({stream:{mode:"throttle",delay:r.responseTime,stopEvent:!1},onStream:function(t,e){var n=oS.getCoupled(t,"sandbox");if(Ha.isFocused(t)&&zm(t.element()).length>=r.minChars){var o=wm.getCurrent(n).bind(function(t){return yu.getHighlighted(t).map(Kl.getValue)});r.previewing.set(!0),mS(r,a(t),t,n,i,function(t){wm.getCurrent(n).each(function(t){o.fold(function(){r.model.selectsOver&&yu.highlightFirst(t)},function(e){yu.highlightBy(t,function(t){return Kl.getValue(t).value===e.value}),yu.getHighlighted(t).orThunk(function(){return yu.highlightFirst(t),j.none()})})})},Tk.HighlightFirst).get(P)}},cancelEvent:Ve()}),Kc.config({mode:"special",onDown:function(t,e){return n(t,e,yu.highlightFirst),j.some(!0)},onEscape:function(t){var e=oS.getCoupled(t,"sandbox");return Jx.isOpen(e)?(Jx.close(e),j.some(!0)):j.none()},onUp:function(t,e){return n(t,e,yu.highlightLast),j.some(!0)},onEnter:function(e){var t=oS.getCoupled(e,"sandbox"),n=Jx.isOpen(t);if(n&&!r.previewing.get())return wm.getCurrent(t).bind(function(t){return yu.getHighlighted(t)}).map(function(t){return Jn(e,kS(),{item:t}),!0});var o=Kl.getValue(e);return Kn(e,Ve()),r.onExecute(t,e,o),n&&Jx.close(t),j.some(!0)}}),ba.config({toggleClass:r.markers.openClass,aria:{mode:"pressed",syncWithExpanded:!0}}),oS.config({others:{sandbox:function(t){return vS(r,t,{onOpen:b,onClose:b})}}}),bm("typeaheadevents",[ai(function(t){var e=P;gS(r,a(t),t,i,e,Tk.HighlightFirst).get(P)}),Yr(kS(),function(t,e){var n=oS.getCoupled(t,"sandbox");bS(r.model,t,e.event().item()),Kn(t,Ve()),r.onItemExecute(t,n,e.event().item(),Kl.getValue(t)),Jx.close(n),xS(t)})].concat(r.dismissOnBlur?[Yr(ke(),function(t){var e=oS.getCoupled(t,"sandbox");Pi(e.element()).isNone()&&Jx.close(e)})]:[]))];return{uid:r.uid,dom:Em(r),behaviours:SS({},o,ts(r.typeaheadBehaviours,u)),eventOrder:r.eventOrder}}}),TS=function(t,e,n){var o=VS(t,e,n);return tS.sketch(o)},HS=function(t,e){return TS(t,e,[])},VS=function(t,e,n){return{dom:ES(n),components:t.toArray().concat([e])}},ES=function(t){return{tag:"div",classes:["tox-form__group"].concat(t)}},AS=function(t,e){return tS.parts().label({dom:{tag:"label",classes:["tox-label"],innerHtml:e.translate(t)}})},BS=function(t){return Ot(t,"getSubmenuItems")?(n=(e=t).getSubmenuItems(),o=DS(n),{item:e,menus:pt(o.menus,kt(e.value,o.items)),expansions:pt(o.expansions,kt(e.value,e.value))}):{item:t,menus:{},expansions:{}};var e,n,o},DS=function(t){return D(t,function(t,e){var n=wt(e,"value").getOrThunk(function(){return $n("generated-menu-item")}),o=pt({value:n},e),r=BS(o);return{menus:pt(t.menus,r.menus),items:[r.item].concat(t.items),expansions:pt(t.expansions,r.expansions)}},{menus:{},expansions:{},items:[]})},_S=function(t,n,o){var e=$n("primary-menu"),r=DS(t),i=Fk(e,r.items,n,o),a=nt(r.menus,function(t,e){return Fk(e,t,n,o)}),u=pt(a,kt(e,i));return hg.tieredData(e,u,r.expansions)},RS=ye.detect().browser.isFirefox(),IS={position:"absolute",left:"-9999px"},FS=function(t,e,n){var o,r,i,a=function(t,e){var n=je.fromTag("span",t.dom());Mn(n,"role","presentation");var o=je.fromText(e,t.dom());return gn(n,o),n}(an(e),n);RS&&(o=e,r=a,i=$n("ephox-alloy-aria-voice"),Mn(r,"id",i),Mn(o,"aria-describedby",i)),Tn(a,t(n)),Da(a,IS),gn(e,a),setTimeout(function(){En(a,"aria-live"),bn(a)},1e3)},LS=function(t){return{"aria-live":"assertive","aria-atomic":"true",role:"alert"}},PS=["input","textarea"],jS=function(t){var e=wn(t);return T(PS,e)},NS=function(t,e){var n=e.getRoot(t).getOr(t.element());Vi(n,e.invalidClass),e.notify.each(function(e){jS(t.element())&&En(n,"title"),e.getContainer(t).each(function(t){xn(t,e.validHtml)}),e.onValid(t)})},US=function(n,t,e,o){var r=t.getRoot(n).getOr(n.element());Hi(r,t.invalidClass),t.notify.each(function(t){var e;jS(n.element())&&Mn(n.element(),"title",o),e=oo(),FS(LS,e,o),t.getContainer(n).each(function(t){xn(t,o)}),t.onInvalid(n,o)})},WS=function(e,t,n){return t.validator.fold(function(){return ub.pure(dt.value(!0))},function(t){return t.validate(e)})},GS=function(e,n,t){return n.notify.each(function(t){t.onValidate(e)}),WS(e,n).map(function(t){return e.getSystem().isConnected()?t.fold(function(t){return US(e,n,0,t),dt.error(t)},function(t){return NS(e,n),dt.value(t)}):dt.error("No longer in system")})},XS=Object.freeze({markValid:NS,markInvalid:US,query:WS,run:GS,isInvalid:function(t,e){var n=e.getRoot(t).getOr(t.element());return Ai(n,e.invalidClass)}}),$S=Object.freeze({events:function(e,t){return e.validator.map(function(t){return Xr([Yr(t.onEvent,function(t){GS(t,e).get(b)})].concat(t.validateOnLoad?[oi(function(t){GS(t,e).get(P)})]:[]))}).getOr({})}}),qS=[br("invalidClass"),Vr("getRoot",j.none),Tr("notify",[Vr("aria","alert"),Vr("getContainer",j.none),Vr("validHtml",""),Qi("onValid"),Qi("onInvalid"),Qi("onValidate")]),Tr("validator",[br("validate"),Vr("onEvent","input"),Vr("validateOnLoad",!0)])],YS=xi({fields:qS,name:"invalidating",active:$S,apis:XS,extra:{validation:function(n){return function(t){var e=Kl.getValue(t);return ub.pure(n(e))}}}}),KS=function(t,e){return t.getParam("color_cols",e)},JS=function(t){return!1!==t.getParam("custom_colors")},QS=function(t){return t.getParam("color_map")},ZS="choiceitem",tC=zt([{type:ZS,text:"Black",value:"#1abc9c"},{type:ZS,text:"Black",value:"#2ecc71"},{type:ZS,text:"Black",value:"#3498db"},{type:ZS,text:"Black",value:"#9b59b6"},{type:ZS,text:"Black",value:"#34495e"},{type:ZS,text:"Black",value:"#16a085"},{type:ZS,text:"Black",value:"#27ae60"},{type:ZS,text:"Black",value:"#2980b9"},{type:ZS,text:"Black",value:"#8e44ad"},{type:ZS,text:"Black",value:"#2c3e50"},{type:ZS,text:"Black",value:"#f1c40f"},{type:ZS,text:"Black",value:"#e67e22"},{type:ZS,text:"Black",value:"#e74c3c"},{type:ZS,text:"Black",value:"#ecf0f1"},{type:ZS,text:"Black",value:"#95a5a6"},{type:ZS,text:"Black",value:"#f39c12"},{type:ZS,text:"Black",value:"#d35400"},{type:ZS,text:"Black",value:"#c0392b"},{type:ZS,text:"Black",value:"#bdc3c7"},{type:ZS,text:"Black",value:"#7f8c8d"},{type:ZS,text:"Black",value:"#000000"},{type:ZS,text:"Black",value:"#ffffff"}]),eC=function(t){var e,n=[];for(e=0;e<t.length;e+=2)n.push({text:t[e+1],value:"#"+t[e],type:"choiceitem"});return n},nC=function(t){return Math.ceil(Math.sqrt(t))},oC=function(t){var e=tC.get(),n=nC(e.length);return KS(t,n)},rC=function(t){return"remove"===t?'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><path d="M25 5L5 25" stroke-width="1.5" fill="none"></path></svg>':"custom"===t?"color-picker":'<div style="width: 24px; height: 24px; background-color: '+t+';"></div>'},iC=function(e,n,t,o,r){"custom"===o?sC(e)(function(t){uC(t),e.execCommand("mceApplyTextcolor",n,t),r(t)},"#000000"):"remove"===o?(r(""),e.execCommand("mceRemoveTextcolor",n)):(r(o),e.execCommand("mceApplyTextcolor",n,o))},aC=function(i){return function(t){var e,n,o,r;t(tC.get().concat((e=i,o={type:n="choiceitem",text:"Remove",icon:rC("remove"),value:"remove"},r={type:n,text:"Custom",icon:rC("custom"),value:"custom"},e?[o,r]:[o])))}},uC=function(t){tC.set(tC.get().concat([{type:"choiceitem",text:t,value:t}]))},cC=function(e,r,n,t){var i;e.ui.registry.addSplitButton(r,(i=zt(null),{type:"splitbutton",tooltip:t,presets:"color",icon:"forecolor"===r?"text-color":"background-color",select:function(){return!1},columns:oC(e),fetch:aC(JS(e)),onAction:function(t){null!==i.get()&&iC(e,n,0,i.get(),function(){})},onItemAction:function(o,t){iC(e,n,0,t,function(t){var e,n;i.set(t),e="forecolor"===r?"color":"Rectangle",n=t,o.setIconFill(e,n),o.setIconStroke(e,n)})}}))},sC=function(r){return function(t,e){var n,o=(n=t,function(t){var e=t.getData();n(e.colorpicker),t.close()});r.windowManager.open({title:"Color",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"submit",name:"ok",text:"Ok",primary:!0},{type:"cancel",name:"cancel",text:"Cancel"}],initialData:{colorpicker:e},onAction:function(t,e){"hex-valid"===e.name&&(e.value?t.enable("ok"):t.disable("ok"))},onSubmit:o,onClose:function(){r.focus()}})}},lC={register:function(t){var i,e=QS(t);e!==undefined&&tC.set(eC(e)),(i=t).addCommand("mceApplyTextcolor",function(t,e){var n,o,r;o=t,r=e,(n=i).undoManager.transact(function(){n.focus(),n.formatter.apply(o,{value:r}),n.nodeChanged()})}),i.addCommand("mceRemoveTextcolor",function(t){var e,n;n=t,(e=i).undoManager.transact(function(){e.focus(),e.formatter.remove(n,{value:null},null,!0),e.nodeChanged()})}),cC(t,"forecolor","forecolor","Color"),cC(t,"backcolor","hilitecolor","Background Color")},addColor:uC,getFetch:aC,colorPickerDialog:sC,getCurrentColor:function(t,n){var o;return t.dom.getParents(t.selection.getStart(),function(t){var e;(e=t.style["forecolor"===n?"color":"background-color"])&&(o=o||e)}),o},mapColors:eC,getColorCols:oC,calcCols:nC},fC=U([br("dom"),br("fetch"),Qi("onOpen"),Zi("onExecute"),Vr("getHotspot",j.some),Vr("layouts",j.none()),Qc("dropdownBehaviours",[ba,oS,Kc,Ha]),br("toggleClass"),Vr("eventOrder",{}),Or("lazySink"),Vr("matchWidth",!1),Vr("useMinWidth",!1),Or("role")].concat(CS())),dC=U([Ts({schema:[Yi()],name:"menu",defaults:function(t){return{onExecute:t.onExecute}}}),lS()]),mC=undefined&&undefined.__assign||function(){return(mC=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},hC=gl({name:"Dropdown",configFields:fC(),partFields:dC(),factory:function(e,t,n,o){var r,i=function(t){Jx.getState(t).each(function(t){hg.highlightPrimary(t)})},a={expand:function(t){ba.isOn(t)||gS(e,function(t){return t},t,o,P,Tk.HighlightNone).get(P)},open:function(t){ba.isOn(t)||gS(e,function(t){return t},t,o,P,Tk.HighlightFirst).get(P)},isOpen:ba.isOn,close:function(t){ba.isOn(t)&&gS(e,function(t){return t},t,o,P,Tk.HighlightFirst).get(P)}},u=function(t,e){return Qn(t),j.some(!0)};return{uid:e.uid,dom:e.dom,components:t,behaviours:ts(e.dropdownBehaviours,[ba.config({toggleClass:e.toggleClass,aria:{mode:"pressed",syncWithExpanded:!0}}),oS.config({others:{sandbox:function(t){return vS(e,t,{onOpen:function(){ba.on(t)},onClose:function(){ba.off(t)}})}}}),Kc.config({mode:"special",onSpace:u,onEnter:u,onDown:function(t,e){if(hC.isOpen(t)){var n=oS.getCoupled(t,"sandbox");i(n)}else hC.open(t);return j.some(!0)},onEscape:function(t,e){return hC.isOpen(t)?(hC.close(t),j.some(!0)):j.none()}}),Ha.config({})]),events:Ca(j.some(function(t){gS(e,function(t){return t},t,o,i,Tk.HighlightFirst).get(P)})),eventOrder:mC({},e.eventOrder,(r={},r[Ce()]=["toggling","alloy.base.behaviour"],r)),apis:a,domModification:{attributes:{role:e.role.getOr("button"),"aria-haspopup":"true"}}}},apis:{open:function(t,e){return t.open(e)},expand:function(t,e){return t.expand(e)},close:function(t,e){return t.close(e)},isOpen:function(t,e){return t.isOpen(e)}}}),gC=$n("color-change"),pC=$n("hex-change"),vC=function(t,e,o){var n,r,i=tS.parts().field({factory:Am,inputClasses:["tox-textfield"],onSetValue:function(t){return YS.run(t).get(function(){})},inputBehaviours:bi([_m.config({}),YS.config({invalidClass:"tox-textbox-field-invalid",getRoot:function(t){return cn(t.element())},notify:{onValid:function(t){var e=Kl.getValue(t);Jn(t,gC,{color:e})}},validator:{validateOnLoad:!1,validate:function(t){var e=Kl.getValue(t);if(0===e.length)return ub.pure(dt.value(!0));var n=je.fromTag("span");Ba(n,"background-color",e);var o=Ia(n,"background-color").fold(function(){return dt.error("blah")},function(t){return dt.value(e)});return ub.pure(o)}}})])}),a=t.label.map(function(t){return AS(t,e.providers)}),u=function(t,e){Jn(t,pC,{value:e})},c=Ud((n={dom:{tag:"span"},layouts:j.some({onRtl:function(){return[Jy]},onLtr:function(){return[Qy]}}),components:[],fetch:lC.getFetch(o.hasCustomColors()),onItemAction:function(n){e.getSink().each(function(t){c.getOpt(t).each(function(e){"custom"===n?o.colorPicker(function(t){u(e,t),lC.addColor(t)},"#ffffff"):u(e,"remove"===n?"":n)})})}},r=e,hC.sketch({dom:n.dom,components:n.components,toggleClass:"mce-active",dropdownBehaviours:bi([bl.config({}),_m.config({})]),layouts:n.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:r.getSink,fetch:function(){return ub.nu(function(t){return n.fetch(t)}).map(function(t){return Lk(pt(Ik($n("menu-value"),t,function(t){n.onItemAction(t)},5,"color",dw.CLOSE_ON_EXECUTE,function(){return!1},r.providers),{movement:Ok(5,"color")}))})},parts:{menu:Ck(0,0,"color")}})));return tS.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:a.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[i,c.asSpec()]}]),fieldBehaviours:bi([bm("form-field-events",[Yr(gC,function(t,e){c.getOpt(t).each(function(t){Ba(t.element(),"background-color",e.event().color())})}),Yr(pC,function(e,n){tS.getField(e).each(function(t){Kl.setValue(t,n.event().value()),wm.getCurrent(e).each(Ha.focus)})})])])})},bC=function(t){return{value:U(t)}},yC=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,xC=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,wC=function(t){return yC.test(t)||xC.test(t)},kC=function(t){var e,n=(e=t.value().replace(yC,function(t,e,n,o){return e+e+n+n+o+o}),{value:U(e)});return xC.exec(n.value())},SC=function(t){var e=t.toString(16);return 1==e.length?"0"+e:e},CC=function(t){var e=SC(t.red())+SC(t.green())+SC(t.blue());return bC(e)},OC=Math.min,zC=Math.max,MC=Math.round,TC=function(t,e,n,o){return{red:U(t),green:U(e),blue:U(n),alpha:U(o)}},HC=function(t){var e=parseInt(t,10);return e.toString()===t&&0<=e&&e<=255},VC=function(t){var e,n,o,r,i,a,u,c,s,l;if(i=(t.hue()||0)%360,a=t.saturation()/100,u=t.value()/100,a=zC(0,OC(a,1)),u=zC(0,OC(u,1)),0===a)return c=s=l=MC(255*u),TC(c,s,l,1);switch(e=i/60,o=(n=u*a)*(1-Math.abs(e%2-1)),r=u-n,Math.floor(e)){case 0:c=n,s=o,l=0;break;case 1:c=o,s=n,l=0;break;case 2:c=0,s=n,l=o;break;case 3:c=0,s=o,l=n;break;case 4:c=o,s=0,l=n;break;case 5:c=n,s=0,l=o;break;default:c=s=l=0}return c=MC(255*(c+r)),s=MC(255*(s+r)),l=MC(255*(l+r)),TC(c,s,l,1)},EC=function(t){var e=kC(t),n=parseInt(e[1],16),o=parseInt(e[2],16),r=parseInt(e[3],16);return TC(n,o,r,1)},AC=function(t){return"rgba("+t.red()+","+t.green()+","+t.blue()+","+t.alpha()+")"},BC=U(TC(255,0,0,1)),DC=U($n("rgb-hex-update")),_C=U($n("slider-update")),RC=U($n("palette-update")),IC=function(t,o){var r=Ed.parts().spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[o("sv-palette-spectrum")]}}),i=Ed.parts().thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[o("sv-palette-thumb")],innerHtml:"<div class="+o("sv-palette-inner-thumb")+' role="presentation"></div>'}}),a=function(t,e){var n=t.width,o=t.height,r=t.getContext("2d");r.fillStyle=e,r.fillRect(0,0,n,o);var i=r.createLinearGradient(0,0,n,0);i.addColorStop(0,"rgba(255,255,255,1)"),i.addColorStop(1,"rgba(255,255,255,0)"),r.fillStyle=i,r.fillRect(0,0,n,o);var a=r.createLinearGradient(0,0,0,o);a.addColorStop(0,"rgba(0,0,0,0)"),a.addColorStop(1,"rgba(0,0,0,1)"),r.fillStyle=a,r.fillRect(0,0,n,o)};return hl({factory:function(t){var e=U({x:U(0),y:U(0)}),n=bi([wm.config({find:j.some}),Ha.config({})]);return Ed.sketch({dom:{tag:"div",attributes:{role:"presentation"},classes:[o("sv-palette")]},model:{mode:"xy",getInitialValue:e},rounded:!1,components:[r,i],onChange:function(t,e,n){Jn(t,RC(),{value:n})},onInit:function(t,e,n,o){a(n.element().dom(),AC(BC()))},sliderBehaviours:n})},name:"SaturationBrightnessPalette",configFields:[],apis:{setRgba:function(t,e,n){var o,r;o=n,r=e.components()[0].element().dom(),a(r,AC(o))}},extraApis:{}})},FC=function(t,e){var n=Ed.parts().spectrum({dom:{tag:"div",classes:[e("hue-slider-spectrum")],attributes:{role:"presentation"}}}),o=Ed.parts().thumb({dom:{tag:"div",classes:[e("hue-slider-thumb")],attributes:{role:"presentation"}}});return Ed.sketch({dom:{tag:"div",classes:[e("hue-slider")],attributes:{role:"presentation"}},rounded:!1,model:{mode:"y",getInitialValue:U({y:U(0)})},components:[n,o],sliderBehaviours:bi([Ha.config({})]),onChange:function(t,e,n){Jn(t,_C(),{value:n})}})},LC=$n("valid-input"),PC=$n("invalid-input"),jC=$n("validating-input"),NC="colorcustom.rgb.",UC=function(m,h,g,p){var v=function(t,e,n,o,r){var i,a,u=m(NC+"range"),c=[tS.parts().label({dom:{tag:"label",innerHtml:n,attributes:{"aria-label":o}}}),tS.parts().field({data:r,factory:Am,inputAttributes:{type:"text"},inputClasses:[h("textfield")],inputBehaviours:bi([(i=e,a=t,YS.config({invalidClass:h("invalid"),notify:{onValidate:function(t){Jn(t,jC,{type:i})},onValid:function(t){Jn(t,LC,{type:i,value:Kl.getValue(t)})},onInvalid:function(t){Jn(t,PC,{type:i,value:Kl.getValue(t)})}},validator:{validate:function(t){var e=Kl.getValue(t),n=a(e)?dt.value(!0):dt.error(m("aria.input.invalid"));return ub.pure(n)},validateOnLoad:!1}})),_m.config({})]),onSetValue:function(t){YS.isInvalid(t)&&YS.run(t).get(P)}})],s="hex"!==e?[tS.parts()["aria-descriptor"]({text:u})]:[];return{dom:{tag:"div",attributes:{role:"presentation"}},components:c.concat(s)}},b=function(t,e){var n=e.red(),o=e.green(),r=e.blue();Kl.setValue(t,{red:n,green:o,blue:r})},y=Ud({dom:{tag:"div",classes:[h("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),x=function(t,e){y.getOpt(t).each(function(t){Ba(t.element(),"background-color","#"+e.value())})};return hl({factory:function(t){var n={red:U(zt(j.some(255))),green:U(zt(j.some(255))),blue:U(zt(j.some(255))),hex:U(zt(j.some("ffffff")))},o=function(t){return n[t]().get()},i=function(t,e){n[t]().set(e)},r=function(t){var e=t.red(),n=t.green(),o=t.blue();i("red",j.some(e)),i("green",j.some(n)),i("blue",j.some(o))},e=function(t,e){var n=e.event();"hex"!==n.type()?i(n.type(),j.none()):p(t)},a=function(r,t,e){var n=parseInt(e,10);i(t,j.some(n)),o("red").bind(function(n){return o("green").bind(function(e){return o("blue").map(function(t){return TC(n,e,t,1)})})}).each(function(t){var e,n,o=(e=r,n=CC(t),Zm.getField(e,"hex").each(function(t){Ha.isFocused(t)||Kl.setValue(e,{hex:n.value()})}),n);x(r,o)})},u=function(t,e){var n=e.event();"hex"===n.type()?function(t,e){g(t);var n=bC(e);i("hex",j.some(e));var o=EC(n);b(t,o),r(o),Jn(t,DC(),{hex:n}),x(t,n)}(t,n.value()):a(t,n.type(),n.value())},c=function(t){return{label:m(NC+t+".label"),description:m(NC+t+".description")}},s=c("red"),l=c("green"),f=c("blue"),d=c("hex");return pt(Zm.sketch(function(t){return{dom:{tag:"form",classes:[h("rgb-form")],attributes:{"aria-label":m("aria.color.picker")}},components:[t.field("red",tS.sketch(v(HC,"red",s.label,s.description,255))),t.field("green",tS.sketch(v(HC,"green",l.label,l.description,255))),t.field("blue",tS.sketch(v(HC,"blue",f.label,f.description,255))),t.field("hex",tS.sketch(v(wC,"hex",d.label,d.description,"ffffff"))),y.asSpec()],formBehaviours:bi([YS.config({invalidClass:h("form-invalid")}),bm("rgb-form-events",[Yr(LC,u),Yr(PC,e),Yr(jC,e)])])}}),{apis:{updateHex:function(t,e){var n,o;Kl.setValue(t,{hex:e.value()}),n=t,o=EC(e),b(n,o),r(o),x(t,e)}}})},name:"RgbForm",configFields:[],apis:{updateHex:function(t,e,n){t.updateHex(e,n)}},extraApis:{}})},WC=function(t,e,n){return{hue:U(t),saturation:U(e),value:U(n)}},GC=function(c,s){return hl({name:"ColourPicker",configFields:[Vr("onValidHex",P),Vr("onInvalidHex",P),Mr("formChangeEvent")],factory:function(t){var u,v,n=UC(c,s,t.onValidHex,t.onInvalidHex),o=IC(c,s),b={paletteRgba:U(zt(BC()))},e=Ud(o.sketch({})),r=Ud(n.sketch({})),i=function(t,n){e.getOpt(t).each(function(t){var e=EC(n);b.paletteRgba().set(e),o.setRgba(t,e)})},a=function(t,e){r.getOpt(t).each(function(t){n.updateHex(t,e)})},y=function(e,n,t){A(t,function(t){t(e,n)})};return{uid:t.uid,dom:t.dom,components:[e.asSpec(),FC(c,s),r.asSpec()],behaviours:bi([bm("colour-picker-events",[Yr(RC(),(v=[a],function(t,e){var n,o,r,i,a,u,c,s,l,f=e.event().value(),d=b.paletteRgba().get(),m=(c=a=0,o=(n=d).red()/255,r=n.green()/255,i=n.blue()/255,(s=Math.min(o,Math.min(r,i)))===(l=Math.max(o,Math.max(r,i)))?WC(0,0,100*(c=s)):(a=60*((a=o===s?3:i===s?1:5)-(o===s?r-i:i===s?o-r:i-o)/(l-s)),u=(l-s)/l,c=l,WC(Math.round(a),Math.round(100*u),Math.round(100*c)))),h=WC(m.hue(),f.x(),100-f.y()),g=VC(h),p=CC(g);y(t,p,v)})),Yr(_C(),(u=[i,a],function(t,e){var n,o,r,i=e.event().value(),a=(n=i.y(),o=WC(360*(100-n/100),100,100),r=VC(o),CC(r));y(t,a,u)}))]),wm.config({find:function(t){return r.getOpt(t)}}),Kc.config({mode:"acyclic"})])}}})},XC=function(){return wm.config({find:j.some})},$C=function(t){return wm.config({find:t.getOpt})},qC=function(t){return wm.config({find:function(e){return fn(e.element(),t).bind(function(t){return e.getSystem().getByDom(t).toOption()})}})},YC={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red component","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green component","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue component","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","colorcustom.sb.saturation":"Saturation","colorcustom.sb.brightness":"Brightness","colorcustom.sb.picker":"Saturation and Brightness Picker","colorcustom.sb.palette":"Saturation and Brightness Palette","colorcustom.sb.instructions":"Use arrow keys to select saturation and brightness, on x and y axes","colorcustom.hue.hue":"Hue","colorcustom.hue.slider":"Hue Slider","colorcustom.hue.palette":"Hue Palette","colorcustom.hue.instructions":"Use arrow keys to select a hue","aria.color.picker":"Color","aria.input.invalid":"Invalid input"},KC=function(t){return YC[t]},JC=Yo([Vr("preprocess",b),Vr("postprocess",b)]),QC=function(t,e,n){return Kl.config(pt({store:{mode:"manual",getValue:e,setValue:n}},t.map(function(t){return{store:{initialValue:t}}}).getOr({})))},ZC=function(t,e,n){return QC(t,function(t){return e(t.element())},function(t,e){return n(t.element(),e)})},tO=function(r,t){var i=sr("RepresentingConfigs.memento processors",JC,t);return Kl.config({store:{mode:"manual",getValue:function(t){var e=r.get(t),n=Kl.getValue(e);return i.postprocess(n)},setValue:function(t,e){var n=i.preprocess(e),o=r.get(t);Kl.setValue(o,n)}}})},eO=QC,nO=function(t){return ZC(t,yn,xn)},oO=function(t){return Kl.config({store:{mode:"memory",initialValue:t}})},rO=function(r,e){var n=function(t,e){e.stop()},o=function(t){return function(e,n){A(t,function(t){t(e,n)})}},i=function(t,e){if(!Ym.isDisabled(t)){var n=e.event().raw();u(t,n.dataTransfer.files)}},a=function(t,e){var n=e.event().raw().target.files;u(t,n)},u=function(t,e){var n,o;Kl.setValue(t,(n=e,o=new RegExp("("+".jpg,.jpeg,.png,.gif".split(/\s*,\s*/).join("|")+")$","i"),B(Q(n),function(t){return o.test(t.name)}))),Jn(t,Uk,{name:r.name})},c=Ud({dom:{tag:"input",attributes:{type:"file",multiple:"multiple"},styles:{display:"none"}},behaviours:bi([bm("input-file-events",[ti(Ut())])])}),t=r.label.map(function(t){return AS(t,e)}),s=tS.parts().field({factory:{sketch:function(t){return{uid:t.uid,dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:bi([oO([]),XC(),Ym.config({}),ba.config({toggleClass:"dragenter",toggleOnExecute:!1}),bm("dropzone-events",[Yr("dragenter",o([n,ba.toggle])),Yr("dragleave",o([n,ba.toggle])),Yr("dragover",n),Yr("drop",o([n,i])),Yr(Nt(),a)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p",innerHtml:e.translate("Drop an image here")}},vl.sketch({dom:{tag:"button",innerHtml:e.translate("Browse for an image"),styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[c.asSpec()],action:function(t){c.get(t).element().dom().click()},buttonBehaviours:bi([_m.config({})])})]}]}}}}),l=r.flex?["tox-form__group--stretched"]:[];return TS(t,s,l)},iO=$n("alloy-fake-before-tabstop"),aO=$n("alloy-fake-after-tabstop"),uO=function(t){return{dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:t},behaviours:bi([_m.config({})])}},cO=function(t,e){Jn(t,Lt(),{raw:{which:9,shiftKey:e}})},sO=function(t){return _v(t,["."+iO,"."+aO].join(","),U(!1))},lO=function(t,e){var n=e.element();Ai(n,iO)?cO(t,!0):Ai(n,aO)&&cO(t,!1)},fO=function(t){return{dom:{tag:"div",classes:["tox-navobj"]},components:[uO([iO]),t,uO([aO])],behaviours:bi([qC(1)])}},dO=!ye.detect().browser.isIE(),mO=function(t,e){var o,r,n=dO&&t.sandboxed,i=n?{sandbox:"allow-scripts"}:{},a=(o=n,r=zt(""),{getValue:function(t){return r.get()},setValue:function(t,e){if(o)Mn(t.element(),"src","data:text/html;charset=utf-8,"+encodeURIComponent(e));else{Mn(t.element(),"src","javascript:''");var n=t.element().dom().contentWindow.document;n.open(),n.write(e),n.close()}r.set(e)}}),u=t.label.map(function(t){return AS(t,e)}),c=tS.parts().field({factory:{sketch:function(t){return fO({uid:t.uid,dom:{tag:"iframe",attributes:pt(i)},behaviours:bi([_m.config({}),Ha.config({}),eO(j.none(),a.getValue,a.setValue)])})}}}),s=t.flex?["tox-form__group--stretched"]:[];return TS(u,c,s)};function hO(t,e,n){var o=e.type;function r(e,n){return t.then(function(t){return am.canvasToDataURL(t,e,n)})}return{getType:U(o),toBlob:function i(){return Yd.resolve(e)},toDataURL:function a(){return n},toBase64:function u(){return n.split(",")[1]},toAdjustedBlob:function c(e,n){return t.then(function(t){return am.canvasToBlob(t,e,n)})},toAdjustedDataURL:r,toAdjustedBase64:function s(t,e){return r(t,e).then(function(t){return t.split(",")[1]})},toCanvas:function l(){return t.then($d.clone)}}}function gO(e){return am.blobToDataUri(e).then(function(t){return hO(am.blobToCanvas(e),e,t)})}var pO={fromBlob:gO,fromCanvas:function oB(e,t){return am.canvasToBlob(e,t).then(function(t){return hO(Yd.resolve(e),t,e.toDataURL())})},fromImage:function rB(t){return am.imageToBlob(t).then(function(t){return gO(t)})},fromBlobAndUrlSync:function(t,e){return hO(am.blobToCanvas(t),t,e)}},vO=function(t){return pO.fromBlob(t)};function bO(t,e,n){return n<(t=parseFloat(t))?t=n:t<e&&(t=e),t}var yO=[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10];function xO(t,e){var n,o,r,i,a=[],u=new Array(10);for(n=0;n<5;n++){for(o=0;o<5;o++)a[o]=e[o+5*n];for(o=0;o<5;o++){for(r=i=0;r<5;r++)i+=t[o+5*r]*a[r];u[o+5*n]=i}}return u}function wO(t,n){return n=bO(n,0,1),t.map(function(t,e){return e%6==0?t=1-(1-t)*n:t*=n,bO(t,0,1)})}var kO={identity:function iB(){return[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1]},adjust:wO,multiply:xO,adjustContrast:function aB(t,e){var n;return e=bO(e,-1,1),xO(t,[(n=(e*=100)<0?127+e/100*127:127*(n=0==(n=e%1)?yO[e]:yO[Math.floor(e)]*(1-n)+yO[Math.floor(e)+1]*n)+127)/127,0,0,0,.5*(127-n),0,n/127,0,0,.5*(127-n),0,0,n/127,0,.5*(127-n),0,0,0,1,0,0,0,0,0,1])},adjustBrightness:function uB(t,e){return xO(t,[1,0,0,0,e=bO(255*e,-255,255),0,1,0,0,e,0,0,1,0,e,0,0,0,1,0,0,0,0,0,1])},adjustSaturation:function cB(t,e){var n;return xO(t,[.3086*(1-(n=1+(0<(e=bO(e,-1,1))?3*e:e)))+n,.6094*(1-n),.082*(1-n),0,0,.3086*(1-n),.6094*(1-n)+n,.082*(1-n),0,0,.3086*(1-n),.6094*(1-n),.082*(1-n)+n,0,0,0,0,0,1,0,0,0,0,0,1])},adjustHue:function sB(t,e){var n,o;return e=bO(e,-180,180)/180*Math.PI,xO(t,[.213+.787*(n=Math.cos(e))+-.213*(o=Math.sin(e)),.715+-.715*n+-.715*o,.072+-.072*n+.928*o,0,0,.213+-.213*n+.143*o,.715+n*(1-.715)+.14*o,.072+-.072*n+-.283*o,0,0,.213+-.213*n+-.787*o,.715+-.715*n+.715*o,.072+.928*n+.072*o,0,0,0,0,0,1,0,0,0,0,0,1])},adjustColors:function lB(t,e,n,o){return xO(t,[e=bO(e,0,2),0,0,0,0,0,n=bO(n,0,2),0,0,0,0,0,o=bO(o,0,2),0,0,0,0,0,1,0,0,0,0,0,1])},adjustSepia:function fB(t,e){return xO(t,wO([.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0,0,0,0,0,1],e=bO(e,0,1)))},adjustGrayscale:function dB(t,e){return xO(t,wO([.33,.34,.33,0,0,.33,.34,.33,0,0,.33,.34,.33,0,0,0,0,0,1,0,0,0,0,0,1],e=bO(e,0,1)))}};function SO(e,n){return e.toCanvas().then(function(t){return function i(t,e,n){var o,r=$d.get2dContext(t);return o=function T(t,e){var n,o,r,i,a,u=t.data,c=e[0],s=e[1],l=e[2],f=e[3],d=e[4],m=e[5],h=e[6],g=e[7],p=e[8],v=e[9],b=e[10],y=e[11],x=e[12],w=e[13],k=e[14],S=e[15],C=e[16],O=e[17],z=e[18],M=e[19];for(a=0;a<u.length;a+=4)n=u[a],o=u[a+1],r=u[a+2],i=u[a+3],u[a]=n*c+o*s+r*l+i*f+d,u[a+1]=n*m+o*h+r*g+i*p+v,u[a+2]=n*b+o*y+r*x+i*w+k,u[a+3]=n*S+o*C+r*O+i*z+M;return t}(r.getImageData(0,0,t.width,t.height),n),r.putImageData(o,0,0),pO.fromCanvas(t,e)}(t,e.getType(),n)})}function CO(e,n){return e.toCanvas().then(function(t){return function a(t,e,n){var o,r,i=$d.get2dContext(t);return o=i.getImageData(0,0,t.width,t.height),r=i.getImageData(0,0,t.width,t.height),r=function w(t,e,n){var o,r,i,a,u,c,s,l,f,d,m,h,g,p,v,b,y;function x(t,e,n){return n<t?t=n:t<e&&(t=e),t}for(i=Math.round(Math.sqrt(n.length)),a=Math.floor(i/2),o=t.data,r=e.data,b=t.width,y=t.height,c=0;c<y;c++)for(u=0;u<b;u++){for(s=l=f=0,m=0;m<i;m++)for(d=0;d<i;d++)h=x(u+d-a,0,b-1),g=x(c+m-a,0,y-1),p=4*(g*b+h),v=n[m*i+d],s+=o[p]*v,l+=o[p+1]*v,f+=o[p+2]*v;r[p=4*(c*b+u)]=x(s,0,255),r[p+1]=x(l,0,255),r[p+2]=x(f,0,255)}return e}(o,r,n),i.putImageData(r,0,0),pO.fromCanvas(t,e)}(t,e.getType(),n)})}function OO(c){return function(e,n){return e.toCanvas().then(function(t){return function(t,e,n){var o,r,i=$d.get2dContext(t),a=new Array(256);for(r=0;r<a.length;r++)a[r]=c(r,n);return o=function u(t,e){var n,o=t.data;for(n=0;n<o.length;n+=4)o[n]=e[o[n]],o[n+1]=e[o[n+1]],o[n+2]=e[o[n+2]];return t}(i.getImageData(0,0,t.width,t.height),a),i.putImageData(o,0,0),pO.fromCanvas(t,e)}(t,e.getType(),n)})}}function zO(n){return function(t,e){return SO(t,n(kO.identity(),e))}}function MO(e){return function(t){return CO(t,e)}}var TO={invert:function mB(e){return function(t){return SO(t,e)}}([-1,0,0,0,255,0,-1,0,0,255,0,0,-1,0,255,0,0,0,1,0]),brightness:zO(kO.adjustBrightness),hue:zO(kO.adjustHue),saturate:zO(kO.adjustSaturation),contrast:zO(kO.adjustContrast),grayscale:zO(kO.adjustGrayscale),sepia:zO(kO.adjustSepia),colorize:function(t,e,n,o){return SO(t,kO.adjustColors(kO.identity(),e,n,o))},sharpen:MO([0,-1,0,-1,5,-1,0,-1,0]),emboss:MO([-2,-1,0,-1,1,1,0,1,2]),gamma:OO(function(t,e){return 255*Math.pow(t/255,1-e)}),exposure:OO(function(t,e){return 255*(1-Math.exp(-t/255*e))}),colorFilter:SO,convoluteFilter:CO},HO={scale:function hB(t,e,n){var o=qd.getWidth(t),r=qd.getHeight(t),i=e/o,a=n/r,u=!1;(i<.5||2<i)&&(i=i<.5?.5:2,u=!0),(a<.5||2<a)&&(a=a<.5?.5:2,u=!0);var c=function l(u,c,s){return new Yd(function(t){var e=qd.getWidth(u),n=qd.getHeight(u),o=Math.floor(e*c),r=Math.floor(n*s),i=$d.create(o,r),a=$d.get2dContext(i);a.drawImage(u,0,0,e,n,0,0,o,r),t(i)})}(t,i,a);return u?c.then(function(t){return hB(t,e,n)}):c}},VO={rotate:function gB(e,n){return e.toCanvas().then(function(t){return function u(t,e,n){var o=$d.create(t.width,t.height),r=$d.get2dContext(o),i=0,a=0;return 90!=(n=n<0?360+n:n)&&270!=n||$d.resize(o,o.height,o.width),90!=n&&180!=n||(i=o.width),270!=n&&180!=n||(a=o.height),r.translate(i,a),r.rotate(n*Math.PI/180),r.drawImage(t,0,0),pO.fromCanvas(o,e)}(t,e.getType(),n)})},flip:function pB(e,n){return e.toCanvas().then(function(t){return function i(t,e,n){var o=$d.create(t.width,t.height),r=$d.get2dContext(o);return"v"==n?(r.scale(1,-1),r.drawImage(t,0,-o.height)):(r.scale(-1,1),r.drawImage(t,-o.width,0)),pO.fromCanvas(o,e)}(t,e.getType(),n)})},crop:function vB(e,n,o,r,i){return e.toCanvas().then(function(t){return function u(t,e,n,o,r,i){var a=$d.create(r,i);return $d.get2dContext(a).drawImage(t,-n,-o),pO.fromCanvas(a,e)}(t,e.getType(),n,o,r,i)})},resize:function bB(e,n,o){return e.toCanvas().then(function(t){return HO.scale(t,n,o).then(function(t){return pO.fromCanvas(t,e.getType())})})}},EO=(function(){function t(t){this.littleEndian=!1,this._dv=new DataView(t)}t.prototype.readByteAt=function(t){return this._dv.getUint8(t)},t.prototype.read=function(t,e){if(t+e>this.length())return null;for(var n=this.littleEndian?0:-8*(e-1),o=0,r=0;o<e;o++)r|=this.readByteAt(t+o)<<Math.abs(n+8*o);return r},t.prototype.BYTE=function(t){return this.read(t,1)},t.prototype.SHORT=function(t){return this.read(t,2)},t.prototype.LONG=function(t){return this.read(t,4)},t.prototype.SLONG=function(t){var e=this.read(t,4);return 2147483647<e?e-4294967296:e},t.prototype.CHAR=function(t){return String.fromCharCode(this.read(t,1))},t.prototype.STRING=function(t,e){return this.asArray("CHAR",t,e).join("")},t.prototype.SEGMENT=function(t,e){var n=this._dv.buffer;switch(arguments.length){case 2:return n.slice(t,t+e);case 1:return n.slice(t);default:return n}},t.prototype.asArray=function(t,e,n){for(var o=[],r=0;r<n;r++)o[r]=this[t](e+r);return o},t.prototype.length=function(){return this._dv?this._dv.byteLength:0}}(),function(t,e){return VO.rotate(t,e)}),AO=function(t){return TO.invert(t)},BO=function(t){return TO.sharpen(t)},DO=function(t,e){return TO.brightness(t,e)},_O=function(t,e){return TO.contrast(t,e)},RO=function(t,e,n,o){return TO.colorize(t,e,n,o)},IO=function(t,e){return TO.gamma(t,e)},FO=function(t,e){return VO.flip(t,e)},LO=function(t,e,n,o,r){return VO.crop(t,e,n,o,r)},PO=function(t,e,n){return VO.resize(t,e,n)},jO=EO,NO=function(t,e){return{dom:{tag:"span",innerHtml:cw("icon-"+t,e,U(t)),classes:["tox-tbtn__icon-wrap"]}}},UO=function(t,e,n){return{dom:{tag:"span",innerHtml:n.translate(t),classes:[e+"__select-label"]},behaviours:bi([ug.config({})])}},WO=function(t,e,n,o,r){void 0===n&&(n=[]);var i={buttonBehaviours:bi([Lw(t.disabled),_m.config({}),bm("button press",[qr("click"),qr("mousedown")])].concat(n)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]},action:e},a=pt(i,{dom:o}),u=pt(a,{components:r});return vl.sketch(u)},GO=function(t,e,n,o){void 0===o&&(o=[]);var r={tag:"button",classes:["tox-tbtn"],attributes:t.tooltip.map(function(t){return{"aria-label":n.translate(t),title:n.translate(t)}}).getOr({})},i=t.icon.map(function(t){return NO(t,n.icons)}),a=Ww([i]);return WO(t,e,o,r,a)},XO=function(t,e,n,o){void 0===o&&(o=[]);var r=n.translate(t.text),i={tag:"button",classes:t.primary?["tox-button"]:["tox-button","tox-button--secondary"],innerHtml:r,attributes:{title:r}};return WO(t,e,o,i,[])},$O=function(e,n){return function(t){"custom"===n?Jn(t,Xk,{name:e,value:{}}):"submit"===n?Kn(t,$k):"cancel"===n?Kn(t,Gk):console.error("Unknown button type: ",n)}},qO=function(t,e,n){var o=$O(t.name,e);return XO(t,o,n,[])},YO=U([Vr("field1Name","field1"),Vr("field2Name","field2"),ta("onLockedChange"),Ki(["lockClass"]),Vr("locked",!1),es("coupledFieldBehaviours",[wm,Kl])]),KO=function(t,i){return Ms({factory:tS,name:t,overrides:function(r){return{fieldBehaviours:bi([bm("coupled-input-behaviour",[Yr(jt(),function(n){var t,e,o;(t=n,e=r,o=i,Ns(t,e,o).bind(wm.getCurrent)).each(function(e){Ns(n,r,"lock").each(function(t){ba.isOn(t)&&r.onLockedChange(n,e,t)})})})])])}}})},JO=U([KO("field1","field2"),KO("field2","field1"),Ms({factory:vl,schema:[br("dom")],name:"lock",overrides:function(t){return{buttonBehaviours:bi([ba.config({selected:t.locked,toggleClass:t.markers.lockClass,aria:{mode:"pressed"}})])}}})]),QO=gl({name:"FormCoupledInputs",configFields:YO(),partFields:JO(),factory:function(o,t,e,n){return{uid:o.uid,dom:o.dom,components:t,behaviours:ns(o.coupledFieldBehaviours,[wm.config({find:j.some}),Kl.config({store:{mode:"manual",getValue:function(t){var e,n=$s(t,o,["field1","field2"]);return(e={})[o.field1Name]=Kl.getValue(n.field1()),e[o.field2Name]=Kl.getValue(n.field2()),e},setValue:function(t,e){var n=$s(t,o,["field1","field2"]);Ot(e,o.field1Name)&&Kl.setValue(n.field1(),e[o.field1Name]),Ot(e,o.field2Name)&&Kl.setValue(n.field2(),e[o.field2Name])}}})]),apis:{getField1:function(t){return Ns(t,o,"field1")},getField2:function(t){return Ns(t,o,"field2")},getLock:function(t){return Ns(t,o,"lock")}}}},apis:{getField1:function(t,e){return t.getField1(e)},getField2:function(t,e){return t.getField2(e)},getLock:function(t,e){return t.getLock(e)}}}),ZO=function(t){var e=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(t);if(null===e)return dt.error(t);var n=parseFloat(e[1]),o=e[2];return dt.value({value:n,unit:o})},tz=function(t,e){var n={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,"in":1},o=function(t){return Object.prototype.hasOwnProperty.call(n,t)};return t.unit===e?j.some(t.value):o(t.unit)&&o(e)?n[t.unit]===n[e]?j.some(t.value):j.some(t.value/n[t.unit]*n[e]):j.none()},ez=function(t){return j.none()},nz=function(t,e){return function(t,e){for(var n=[],o=0;o<t.length;o++){var r=t[o];if(!r.isSome())return j.none();n.push(r.getOrDie())}return j.some(e.apply(null,n))}([ZO(t).toOption(),ZO(e).toOption()],function(t,o){return tz(t,o.unit).map(function(t){return o.value/t}).map(function(t){return e=t,n=o.unit,function(t){return tz(t,n).map(function(t){return{value:t*e,unit:n}})};var e,n}).getOr(ez)}).getOr(ez)},oz=function(o,t){var u=ez,r=$n("ratio-event"),e=function(n){var t=tS.parts().field({factory:Am,inputClasses:["tox-textfield"],inputBehaviours:bi([_m.config({}),bm("size-input-events",[Yr(It(),function(t,e){Jn(t,r,{isField1:n.isField1})}),Yr(Nt(),function(t,e){Jn(t,Uk,{name:o.name})})])])}),e=tS.parts()["aria-descriptor"]({text:n.label});return{dom:{tag:"div"},components:[e,t]}},n=QO.parts().field1(e({label:"Width",isField1:!0})),i=QO.parts().field2(e({label:"Height",isField1:!1})),a=QO.parts().lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{title:t.translate(o.label.getOr("Constrain proportions"))}},components:[{dom:{tag:"span",classes:["tox-icon","tox-lock-icon__lock"],innerHtml:uw("icon-lock",t.icons)}},{dom:{tag:"span",classes:["tox-icon","tox-lock-icon__unlock"],innerHtml:uw("icon-unlock",t.icons)}}],buttonBehaviours:bi([_m.config({})])});return QO.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"label",classes:["tox-label"],innerHtml:t.translate("Dimensions")}},{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[n,{dom:{tag:"span",innerHtml:"\xd7"}},i,a]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:function(t,i,e){ZO(Kl.getValue(t)).each(function(t){u(t).each(function(t){var e,n,o,r;Kl.setValue(i,(o={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,"in":4,"%":4},-1!==(r=(e=t).value.toFixed((n=e.unit)in o?o[n]:1)).indexOf(".")&&(r=r.replace(/\.?0*$/,"")),r+e.unit))})})},coupledFieldBehaviours:bi([bm("size-input-events2",[Yr(r,function(t,e){var n=e.event().isField1(),o=n?QO.getField1(t):QO.getField2(t),r=n?QO.getField2(t):QO.getField1(t),i=o.map(Kl.getValue).getOr(""),a=r.map(Kl.getValue).getOr("");u=nz(i,a)})])])})},rz={undo:U($n("undo")),redo:U($n("redo")),zoom:U($n("zoom")),back:U($n("back")),apply:U($n("apply")),swap:U($n("swap")),transform:U($n("transform")),tempTransform:U($n("temp-transform")),transformApply:U($n("transform-apply"))},iz=U("save-state"),az=U("disable"),uz=U("enable"),cz={formActionEvent:Xk,saveState:iz,disable:az,enable:uz},sz=function(r,c){var t=function(t,e,n,o){return XO({name:t,text:t,disabled:n,primary:o},e,c)},e=function(t,e,n,o){return GO({name:t,icon:j.some(t),tooltip:j.some(e),disabled:o},n,c)},l={tag:"div",classes:["tox-image-tools__toolbar","tox-image-tools-edit-panel"]},n=j.none(),o=P,i=function(t,e,n){Jn(t,e,n)},f=function(t,e){i(t,rz.transform(),{transform:e})},a=function(t,e){i(t,rz.tempTransform(),{transform:e})},u=function(t){return function(){L.getOpt(t).each(function(t){ug.set(t,[I])})}},s=function(t,e){i(t,rz.transformApply(),{transform:e,swap:u(t)})},d=function(){return t("Back",function(t){return i(t,rz.back(),{swap:u(t)})},!1,!1)},m=function(){return t("Apply",function(t){return i(t,rz.apply(),{swap:u(t)})},!0,!0)},h=Cm.sketch({dom:l,components:[d(),{dom:{tag:"div",classes:["tox-spacer"]}},t("Apply",function(t){s(t,function(t){var e=r.getRect();return LO(t,e.x,e.y,e.w,e.h)}),r.hideCrop()},!1,!0)]}),g=Ud(oz({name:"size",label:n,colspan:n,type:"sizeinput",constrain:!0},c)),p=Cm.sketch({dom:l,components:[d(),{dom:{tag:"div",classes:["tox-spacer"]}},g.asSpec(),{dom:{tag:"div",classes:["tox-spacer"]}},t("Apply",function(u){g.getOpt(u).each(function(t){var e,n,o=Kl.getValue(t),r=parseInt(o.width,10),i=parseInt(o.height,10),a=(e=r,n=i,function(t){return PO(t,e,n)});s(u,a)})},!1,!0)]}),v=function(e,n){return function(t){return e(t,n)}},b=v(FO,"h"),y=v(FO,"v"),x=v(jO,-90),w=v(jO,90),k=Cm.sketch({dom:l,components:[d(),{dom:{tag:"div",classes:["tox-spacer"]}},e("flip-horizontally","Flip horizontally",function(t){a(t,b)},!1),e("flip-vertically","Flip vertically",function(t){a(t,y)},!1),e("rotate-left","Rotate counterclockwise",function(t){a(t,x)},!1),e("rotate-right","Rotate clockwise",function(t){a(t,w)},!1),{dom:{tag:"div",classes:["tox-spacer"]}},m()]}),S=function(t,e,n,o,r){var i=Ed.parts().label({dom:{tag:"label",innerHtml:c.translate(t)}}),a=Ed.parts().spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),u=Ed.parts().thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return Ed.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:n,maxX:r,getInitialValue:U({x:U(o)})},components:[i,a,u],sliderBehaviours:bi([Ha.config({})]),onChoose:e})},C=function(t,e,n,o,r){return Cm.sketch({dom:l,components:[d(),(i=t,a=e,u=n,c=o,s=r,S(i,function(t,e,n){var o=v(a,n.x()/100);f(t,o)},u,c,s)),m()]});var i,a,u,c,s},O=Cm.sketch({dom:l,components:[d(),{dom:{tag:"div",classes:["tox-spacer"]}},m()]}),z=C("Brightness",DO,-100,0,100),M=C("Contrast",_O,-100,0,100),T=C("Gamma",IO,-100,0,100),H=function(t){return S(t,function(l,t,e){var n=V.getOpt(l),o=A.getOpt(l),r=E.getOpt(l);n.each(function(s){o.each(function(c){r.each(function(t){var e,n,o,r=Kl.getValue(s).x()/100,i=Kl.getValue(t).x()/100,a=Kl.getValue(c).x()/100,u=(e=r,n=i,o=a,function(t){return RO(t,e,n,o)});f(l,u)})})})},0,100,200)},V=Ud(H("R")),E=Ud(H("G")),A=Ud(H("B")),B=Cm.sketch({dom:l,components:[d(),V.asSpec(),E.asSpec(),A.asSpec(),m()]}),D=function(e,n,o){return function(t){i(t,rz.swap(),{transform:n,swap:function(){L.getOpt(t).each(function(t){ug.set(t,[e]),o(t)})}})}},_=j.some(BO),R=j.some(AO),I=Cm.sketch({dom:l,components:[e("crop","Crop",D(h,n,function(t){r.showCrop()}),!1),e("resize","Resize",D(p,n,function(t){g.getOpt(t).each(function(t){var e=r.getMeasurements(),n=e.width,o=e.height;Kl.setValue(t,{width:n,height:o})})}),!1),e("orientation","Orientation",D(k,n,o),!1),e("brightness","Brightness",D(z,n,o),!1),e("sharpen","Sharpen",D(O,_,o),!1),e("contrast","Contrast",D(M,n,o),!1),e("color-levels","Color levels",D(B,n,o),!1),e("gamma","Gamma",D(T,n,o),!1),e("invert","Invert",D(O,R,o),!1)]}),F=Cm.sketch({dom:{tag:"div"},components:[I],containerBehaviours:bi([ug.config({})])}),L=Ud(F);return{memContainer:L,getApplyButton:function(t){return L.getOpt(t).map(function(t){var e=t.components()[0];return e.components()[e.components().length-1]})}}},lz=tinymce.util.Tools.resolve("tinymce.dom.DomQuery"),fz=tinymce.util.Tools.resolve("tinymce.geom.Rect"),dz=tinymce.util.Tools.resolve("tinymce.util.Observable"),mz=tinymce.util.Tools.resolve("tinymce.util.Tools"),hz=tinymce.util.Tools.resolve("tinymce.util.VK");function gz(t){var e,n;if(t.changedTouches)for(e="screenX screenY pageX pageY clientX clientY".split(" "),n=0;n<e.length;n++)t[e[n]]=t.changedTouches[0][e[n]]}function pz(t,r){var i,a,e,u,c,l,f,d=r.document||document;r=r||{};var m=d.getElementById(r.handle||t);e=function(t){var e,n,o=function s(t){var e,n,o,r,i,a,u,c=Math.max;return e=t.documentElement,n=t.body,o=c(e.scrollWidth,n.scrollWidth),r=c(e.clientWidth,n.clientWidth),i=c(e.offsetWidth,n.offsetWidth),a=c(e.scrollHeight,n.scrollHeight),u=c(e.clientHeight,n.clientHeight),{width:o<i?r:o,height:a<c(e.offsetHeight,n.offsetHeight)?u:a}}(d);gz(t),t.preventDefault(),a=t.button,e=m,l=t.screenX,f=t.screenY,n=window.getComputedStyle?window.getComputedStyle(e,null).getPropertyValue("cursor"):e.runtimeStyle.cursor,i=lz("<div></div>").css({position:"absolute",top:0,left:0,width:o.width,height:o.height,zIndex:2147483647,opacity:1e-4,cursor:n}).appendTo(d.body),lz(d).on("mousemove touchmove",c).on("mouseup touchend",u),r.start(t)},c=function(t){if(gz(t),t.button!==a)return u(t);t.deltaX=t.screenX-l,t.deltaY=t.screenY-f,t.preventDefault(),r.drag(t)},u=function(t){gz(t),lz(d).off("mousemove touchmove",c).off("mouseup touchend",u),i.remove(),r.stop&&r.stop(t)},this.destroy=function(){lz(m).off()},lz(m).on("mousedown touchstart",e)}var vz,bz,yz,xz,wz,kz,Sz,Cz=0,Oz=function(e){var l=Ud({dom:{tag:"div",classes:["tox-image-tools__image-bg"],attributes:{role:"presentation"}}}),f=zt(1),d=zt(j.none()),m=zt({x:0,y:0,w:1,h:1}),c=zt({x:0,y:0,w:1,h:1}),s=function(t,s){h.getOpt(t).each(function(t){var n=f.get(),o=lf(t.element()),r=Na(t.element()),i=s.dom().naturalWidth*n,a=s.dom().naturalHeight*n,u=Math.max(0,o/2-i/2),c=Math.max(0,r/2-a/2),e={left:u.toString()+"px",top:c.toString()+"px",width:i.toString()+"px",height:a.toString()+"px",position:"absolute"};Da(s,e),l.getOpt(t).each(function(t){Da(t.element(),e)}),d.get().each(function(t){var e=m.get();t.setRect({x:e.x*n+u,y:e.y*n+c,w:e.w*n,h:e.h*n}),t.setClampRect({x:u,y:c,w:i,h:a}),t.setViewPortRect({x:0,y:0,w:o,h:r})})})},n=function(t,e){var n,u=je.fromTag("img");return Mn(u,"src",e),(n=u.dom(),new vw(function(t){var e=function(){n.removeEventListener("load",e),t(n)};n.complete?t(n):n.addEventListener("load",e)})).then(function(){return h.getOpt(t).map(function(t){var e=Rh({element:u});ug.replaceAt(t,1,j.some(e));var n=c.get(),o={x:0,y:0,w:u.dom().naturalWidth,h:u.dom().naturalHeight};c.set(o);var r,a,i=fz.inflate(o,-20,-20);return m.set(i),n.w===o.w&&n.h===o.h||(r=t,a=u,h.getOpt(r).each(function(t){var e=lf(t.element()),n=Na(t.element()),o=a.dom().naturalWidth,r=a.dom().naturalHeight,i=Math.min(e/o,n/r);1<=i?f.set(1):f.set(i)})),s(t,u),u})})},t=Cm.sketch({dom:{tag:"div",classes:["tox-image-tools__image"]},components:[l.asSpec(),{dom:{tag:"img",attributes:{src:e}}},{dom:{tag:"div"},behaviours:bi([bm("image-panel-crop-events",[oi(function(t){h.getOpt(t).each(function(t){var e=function k(s,n,l,o,r){var f,a,e,i,u="tox-",c="tox-crid-"+Cz++;function d(t,e){return{x:e.x-t.x,y:e.y-t.y,w:e.w,h:e.h}}function m(t,e,n,o){var r,i,a,u,c;r=e.x,i=e.y,a=e.w,u=e.h,r+=n*t.deltaX,i+=o*t.deltaY,(a+=n*t.deltaW)<20&&(a=20),(u+=o*t.deltaH)<20&&(u=20),c=s=fz.clamp({x:r,y:i,w:a,h:u},l,"move"===t.name),c=d(l,c),f.fire("updateRect",{rect:c}),p(c)}function h(e){function t(t,e){e.h<0&&(e.h=0),e.w<0&&(e.w=0),lz("#"+c+"-"+t,o).css({left:e.x,top:e.y,width:e.w,height:e.h})}mz.each(a,function(t){lz("#"+c+"-"+t.name,o).css({left:e.w*t.xMul+e.x,top:e.h*t.yMul+e.y})}),t("top",{x:n.x,y:n.y,w:n.w,h:e.y-n.y}),t("right",{x:e.x+e.w,y:e.y,w:n.w-e.x-e.w+n.x,h:e.h}),t("bottom",{x:n.x,y:e.y+e.h,w:n.w,h:n.h-e.y-e.h+n.y}),t("left",{x:n.x,y:e.y,w:e.x-n.x,h:e.h}),t("move",e)}function g(t){h(s=t)}function p(t){g(function n(t,e){return{x:e.x+t.x,y:e.y+t.y,w:e.w,h:e.h}}(l,t))}return a=[{name:"move",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:0,deltaH:0,label:"Crop Mask"},{name:"nw",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:-1,deltaH:-1,label:"Top Left Crop Handle"},{name:"ne",xMul:1,yMul:0,deltaX:0,deltaY:1,deltaW:1,deltaH:-1,label:"Top Right Crop Handle"},{name:"sw",xMul:0,yMul:1,deltaX:1,deltaY:0,deltaW:-1,deltaH:1,label:"Bottom Left Crop Handle"},{name:"se",xMul:1,yMul:1,deltaX:0,deltaY:0,deltaW:1,deltaH:1,label:"Bottom Right Crop Handle"}],i=["top","right","bottom","left"],function v(){lz('<div id="'+c+'" class="'+u+'croprect-container" role="grid" aria-dropeffect="execute">').appendTo(o),mz.each(i,function(t){lz("#"+c,o).append('<div id="'+c+"-"+t+'"class="'+u+'croprect-block" style="display: none" data-mce-bogus="all">')}),mz.each(a,function(t){lz("#"+c,o).append('<div id="'+c+"-"+t.name+'" class="'+u+"croprect-handle "+u+"croprect-handle-"+t.name+'"style="display: none" data-mce-bogus="all" role="gridcell" tabindex="-1" aria-label="'+t.label+'" aria-grabbed="false" title="'+t.label+'">')}),e=mz.map(a,function t(e){var n;return new pz(c,{document:o.ownerDocument,handle:c+"-"+e.name,start:function(){n=s},drag:function(t){m(e,n,t.deltaX,t.deltaY)}})}),h(s),lz(o).on("focusin focusout",function(t){lz(t.target).attr("aria-grabbed","focus"===t.type)}),lz(o).on("keydown",function(e){var i;function t(t,e,n,o,r){t.stopPropagation(),t.preventDefault(),m(i,n,o,r)}switch(mz.each(a,function(t){if(e.target.id===c+"-"+t.name)return i=t,!1}),e.keyCode){case hz.LEFT:t(e,0,s,-10,0);break;case hz.RIGHT:t(e,0,s,10,0);break;case hz.UP:t(e,0,s,0,-10);break;case hz.DOWN:t(e,0,s,0,10);break;case hz.ENTER:case hz.SPACEBAR:e.preventDefault(),r()}})}(),f=mz.extend({toggleVisibility:function b(t){var e;e=mz.map(a,function(t){return"#"+c+"-"+t.name}).concat(mz.map(i,function(t){return"#"+c+"-"+t})).join(","),t?lz(e,o).show():lz(e,o).hide()},setClampRect:function y(t){l=t,h(s)},setRect:g,getInnerRect:function t(){return d(l,s)},setInnerRect:p,setViewPortRect:function x(t){n=t,h(s)},destroy:function w(){mz.each(e,function(t){t.destroy()}),e=[]}},dz)}({x:10,y:10,w:100,h:100},{x:0,y:0,w:200,h:200},{x:0,y:0,w:200,h:200},t.element().dom(),function(){});e.toggleVisibility(!1),e.on("updateRect",function(t){var e=t.rect,n=f.get(),o={x:Math.round(e.x/n),y:Math.round(e.y/n),w:Math.round(e.w/n),h:Math.round(e.h/n)};m.set(o)}),d.set(j.some(e))})})])])}],containerBehaviours:bi([ug.config({}),bm("image-panel-events",[oi(function(t){n(t,e)})])])}),h=Ud(t);return{memContainer:h,updateSrc:n,zoom:function(t,e){var n=f.get(),o=0<e?Math.min(2,n+.1):Math.max(.1,n-.1);f.set(o),h.getOpt(t).each(function(t){var e=t.components()[1].element();s(t,e)})},showCrop:function(){d.get().each(function(t){t.toggleVisibility(!0)})},hideCrop:function(){d.get().each(function(t){t.toggleVisibility(!1)})},getRect:function(){return m.get()},getMeasurements:function(){var t=c.get();return{width:t.w,height:t.h}}}},zz=function(t,e,n,o,r){return GO({name:t,icon:j.some(e),disabled:n,tooltip:j.some(t)},o,r)},Mz=function(t,e){e?Ym.enable(t):Ym.disable(t)},Tz=function(){return qe.getOrDie("URL")},Hz=function(t){return Tz().createObjectURL(t)},Vz=function(t){Tz().revokeObjectURL(t)},Ez=function(t){var e=zt(t),n=zt(j.none()),r=function s(){var n=[],o=-1;function t(){return 0<o}function e(){return-1!==o&&o<n.length-1}return{data:n,add:function r(t){var e;return e=n.splice(++o),n.push(t),{state:t,removed:e}},undo:function i(){if(t())return n[--o]},redo:function a(){if(e())return n[++o]},canUndo:t,canRedo:e}}();r.add(t);var i=function(t){e.set(t)},a=function(t){return{blob:t,url:Hz(t)}},u=function(t){Vz(t.url)},o=function(){n.get().each(u),n.set(j.none())},c=function(t){var e=a(t);i(e);var n,o=r.add(e).removed;return n=o,mz.each(n,u),e.url};return{getBlobState:function(){return e.get()},setBlobState:i,addBlobState:c,getTempState:function(){return n.get().fold(function(){return e.get()},function(t){return t})},updateTempState:function(t){var e=a(t);return o(),n.set(j.some(e)),e.url},addTempState:function(t){var e=a(t);return n.set(j.some(e)),e.url},applyTempState:function(e){return n.get().fold(function(){},function(t){c(t.blob),e()})},destroyTempState:o,undo:function(){var t=r.undo();return i(t),t.url},redo:function(){var t=r.redo();return i(t),t.url},getHistoryStates:function(){return{undoEnabled:r.canUndo(),redoEnabled:r.canRedo()}}}},Az=function(t,e){var n,o,r,a=Ez(t.currentState),i=function(t){var e=a.getHistoryStates();g.updateButtonUndoStates(t,e.undoEnabled,e.redoEnabled),Jn(t,cz.formActionEvent,{name:cz.saveState(),value:e.undoEnabled})},u=function(t){return t.toBlob()},c=function(t){Jn(t,cz.formActionEvent,{name:cz.disable(),value:{}})},s=function(t){p.getApplyButton(t).each(function(t){Ym.enable(t)}),Jn(t,cz.formActionEvent,{name:cz.enable(),value:{}})},l=function(t,e){return c(t),h.updateSrc(t,e)},f=function(e,t,n,o,r){return c(e),vO(t).then(n).then(u).then(o).then(function(t){return l(e,t).then(function(t){return i(e),r(),s(e),t})})["catch"](function(t){console.log(t),s(e)})},d=function(t,e,n){var o=a.getBlobState().blob;f(t,o,e,function(t){return a.updateTempState(t)},n)},m=function(t){var e=a.getBlobState().url;return a.destroyTempState(),i(t),e},h=Oz(t.currentState.url),g=(o=Ud(zz("Undo","undo",!0,function(t){Jn(t,rz.undo(),{direction:1})},n=e)),r=Ud(zz("Redo","redo",!0,function(t){Jn(t,rz.redo(),{direction:1})},n)),{container:Cm.sketch({dom:{tag:"div",classes:["tox-image-tools__toolbar","tox-image-tools__sidebar"]},components:[o.asSpec(),r.asSpec(),zz("Zoom in","zoom-in",!1,function(t){Jn(t,rz.zoom(),{direction:1})},n),zz("Zoom out","zoom-out",!1,function(t){Jn(t,rz.zoom(),{direction:-1})},n)]}),updateButtonUndoStates:function(t,e,n){o.getOpt(t).each(function(t){Mz(t,e)}),r.getOpt(t).each(function(t){Mz(t,n)})}}),p=sz(h,e);return{dom:{tag:"div",attributes:{role:"presentation"}},components:[p.memContainer.asSpec(),h.memContainer.asSpec(),g.container],behaviours:bi([Kl.config({store:{mode:"manual",getValue:function(){return a.getBlobState()}}}),bm("image-tools-events",[Yr(rz.undo(),function(e,t){var n=a.undo();l(e,n).then(function(t){s(e),i(e)})}),Yr(rz.redo(),function(e,t){var n=a.redo();l(e,n).then(function(t){s(e),i(e)})}),Yr(rz.zoom(),function(t,e){var n=e.event().direction();h.zoom(t,n)}),Yr(rz.back(),function(t,e){var n,o;o=m(n=t),l(n,o).then(function(t){s(n)}),e.event().swap()(),h.hideCrop()}),Yr(rz.apply(),function(t,e){a.applyTempState(function(){m(t),e.event().swap()()})}),Yr(rz.transform(),function(t,e){return d(t,e.event().transform(),P)}),Yr(rz.tempTransform(),function(t,e){return n=t,o=e.event().transform(),r=a.getTempState().blob,void f(n,r,o,function(t){return a.addTempState(t)},P);var n,o,r}),Yr(rz.transformApply(),function(t,e){return n=t,o=e.event().transform(),r=e.event().swap(),i=a.getBlobState().blob,void f(n,i,o,function(t){var e=a.addBlobState(t);return m(n),e},r);var n,o,r,i}),Yr(rz.swap(),function(e,t){var n;n=e,g.updateButtonUndoStates(n,!1,!1);var o=t.event().transform(),r=t.event().swap();o.fold(function(){r()},function(t){d(e,t,r)})})]),XC()])}},Bz=undefined&&undefined.__assign||function(){return(Bz=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},Dz=hl({name:"HtmlSelect",configFields:[br("options"),Qc("selectBehaviours",[Ha,Kl]),Vr("selectClasses",[]),Vr("selectAttributes",{}),Or("data")],factory:function(n,t){var e=E(n.options,function(t){return{dom:{tag:"option",value:t.value,innerHtml:t.text}}}),o=n.data.map(function(t){return kt("initialValue",t)}).getOr({});return{uid:n.uid,dom:{tag:"select",classes:n.selectClasses,attributes:n.selectAttributes},components:e,behaviours:ts(n.selectBehaviours,[Ha.config({}),Kl.config({store:Bz({mode:"manual",getValue:function(t){return zm(t.element())},setValue:function(t,e){R(n.options,function(t){return t.value===e}).isSome()&&Mm(t.element(),e)}},o)})])}}}),_z=function(n,e){var t=n.label.map(function(t){return AS(t,e)}),o=[Kc.config({mode:"execution",useEnter:!0!==n.multiline,useControlEnter:!0===n.multiline,execute:function(t){return Kn(t,$k),j.some(!0)}}),bm("textfield-change",[Yr(jt(),function(t,e){Jn(t,Uk,{name:n.name})}),Yr(Xt(),function(t,e){Jn(t,Uk,{name:n.name})})]),_m.config({})],r=n.validation.map(function(o){return YS.config({getRoot:function(t){return cn(t.element())},invalidClass:"tox-invalid",validator:{validate:function(t){var e=Kl.getValue(t),n=o.validator(e);return ub.pure(!0===n?dt.value(e):dt.error(n))},validateOnLoad:o.validateOnLoad}})}).toArray(),i=tS.parts().field({tag:!0===n.multiline?"textarea":"input",inputAttributes:{},inputClasses:[n.classname],inputBehaviours:bi(N([o,r])),factory:Am}),a=n.flex?["tox-form__group--stretched"]:[];return TS(t,i,a)},Rz=undefined&&undefined.__assign||function(){return(Rz=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},Iz=function(i){return Rz({},i,{toCached:function(){return Iz(i.toCached())},bindFuture:function(e){return Iz(i.bind(function(t){return t.fold(function(t){return ub.pure(dt.error(t))},function(t){return e(t)})}))},bindResult:function(e){return Iz(i.map(function(t){return t.bind(e)}))},mapResult:function(e){return Iz(i.map(function(t){return t.map(e)}))},foldResult:function(e,n){return i.map(function(t){return t.fold(e,n)})},withTimeout:function(t,r){return Iz(ub.nu(function(e){var n=!1,o=window.setTimeout(function(){n=!0,e(dt.error(r()))},t);i.get(function(t){n||(window.clearTimeout(o),e(t))})}))}})},Fz=function(t){return Iz(ub.nu(t))},Lz=Fz,Pz={type:"separator"},jz=function(t){return{type:"menuitem",value:t.url,text:t.title,meta:{attach:t.attach},onAction:function(){}}},Nz=function(t,e){return{type:"menuitem",value:e,text:t,meta:{attach:P},onAction:function(){}}},Uz=function(t,e){return o=t,n=B(e,function(t){return t.type===o}),E(n,jz);var n,o},Wz=function(t,e){var n=t.toLowerCase();return B(e,function(t){var e=t.meta!==undefined&&t.meta.text!==undefined?t.meta.text:t.text;return de(e.toLowerCase(),n)||de(t.value.toLowerCase(),n)})},Gz=function(c,t,s){var e=Kl.getValue(t),l=e.meta.text!==undefined?e.meta.text:e.value;return s.getLinkInformation().fold(function(){return[]},function(t){var e,n,o,r,i,a,u=Wz(l,(e=s.getHistory(c),E(e,function(t){return Nz(t,t)})));return"file"===c?(n=[u,Wz(l,(a=t,Uz("header",a.targets))),Wz(l,N([(i=t,i.anchorTop.map(function(t){return Nz("<top>",t)}).toArray()),(r=t,Uz("anchor",r.targets)),(o=t,o.anchorBottom.map(function(t){return Nz("<bottom>",t)}).toArray())]))],_(n,function(t,e){return 0===t.length||0===e.length?t.concat(e):t.concat(Pz,e)},[])):u})},Xz=function(i,a,o){var t,r=function(t){var e=Kl.getValue(t);o.addToHistory(e.value,i.filetype)},e=tS.parts().field({factory:MS,dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],minChars:0,responseTime:0,fetch:function(t){var e=Gz(i.filetype,t,o),n=_S(e,dw.BUBBLE_TO_SANDBOX,a.providers);return ub.pure(n)},getHotspot:function(t){return f.getOpt(t)},onSetValue:function(t,e){t.hasConfigured(YS)&&YS.run(t).get(P)},typeaheadBehaviours:bi(N([o.getValidationHandler().map(function(o){return YS.config({getRoot:function(t){return cn(t.element())},invalidClass:"tox-status-invalid",notify:{},validator:{validate:function(e){var n=Kl.getValue(e);return Lz(function(t){o({type:i.filetype,url:n.value},function(n){f.getOpt(e).each(function(t){var e=function(t,e,n){(n?Hi:Vi)(t.element(),e)};e(t,"tox-status-valid","valid"===n.status),e(t,"tox-status-unknown","unknown"===n.status)}),t(("invalid"===n.status?dt.error:dt.value)(n.message))})})},validateOnLoad:!1}})}).toArray(),[_m.config({}),bm("urlinput-events",N(["file"===i.filetype?[Yr(jt(),function(t){Jn(t,Uk,{name:i.name})})]:[],[Yr(Nt(),function(t){Jn(t,Uk,{name:i.name}),r(t)})]]))]])),eventOrder:(t={},t[jt()]=["streaming","urlinput-events","invalidating"],t),model:{getDisplayText:function(t){return t.value},selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"dog"},lazySink:a.getSink,parts:{menu:Ck(0,0,"normal")},onExecute:function(t,e,n){Jn(e,$k,{})},onItemExecute:function(t,e,n,o){r(t),Jn(t,Uk,{name:i.name})}}),n=i.label.map(function(t){return AS(t,a.providers)}),u=function(t,e,n){return void 0===e&&(e=t),void 0===n&&(n=t),{dom:{tag:"span",classes:["tox-icon","tox-status-icon__"+t],innerHtml:uw("icon-"+e,a.providers.icons),attributes:{title:a.providers.translate(n)}}}},c=Ud({dom:{tag:"span",classes:["tox-status"]},components:[u("checkmark","checkmark","valid"),u("warning"),u("error","warning")]}),s=o.getUrlPicker(i.filetype),l=$n("browser.url.event"),f=Ud({dom:{tag:"div",classes:["tox-input-wrap"]},components:[e,c.asSpec()]});return tS.sketch({dom:ES([]),components:n.toArray().concat([{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:N([[f.asSpec()],s.map(function(){return t=i.label,e=l,n="tox-browse-url",o="icon-browse",r=a.providers,vl.sketch({dom:{tag:"button",classes:["tox-tbtn",n],innerHtml:uw(o,r.icons),attributes:{title:r.translate(t.getOr(""))}},action:function(t){Kn(t,e)}});var t,e,n,o,r}).toArray()])}]),fieldBehaviours:bi([bm("url-input-events",[Yr(l,function(o){wm.getCurrent(o).each(function(e){var n=Kl.getValue(e);s.each(function(t){t(n).get(function(t){Kl.setValue(e,t),Jn(o,Uk,{name:i.name})})})})})])])})},$z=function(a,e){var t,n,o=a.label.map(function(t){return AS(t,e)}),r=function(n){return function(e,t){Ka(t.event().target(),"[data-collection-item-value]").each(function(t){n(e,t,Hn(t,"data-collection-item-value"))})}},i=[Yr(Rt(),r(function(t,e){Ii(e)})),Yr(Ut(),r(function(t,e,n){Jn(t,Xk,{name:a.name,value:n})})),Yr(It(),r(function(t,e,n){Ya(t.element(),"."+Hw).each(function(t){Vi(t,Hw)}),Hi(e,Hw)})),Yr(Ft(),r(function(t,e,n){Ya(t.element(),"."+Hw).each(function(t){Vi(t,Hw)})})),ai(r(function(t,e,n){Jn(t,Xk,{name:a.name,value:n})}))],u=tS.parts().field({dom:{tag:"div",classes:["tox-collection"].concat(1!==a.columns?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:b},behaviours:bi([ug.config({}),Kl.config({store:{mode:"memory",initialValue:[]},onSetValue:function(o,t){var e,n,r,i;e=o,n=E(t,function(t){var e,n=1===a.columns?t.text.map(function(t){return'<span class="tox-collection__item-label">'+t+"</span>"}).getOr(""):"",o=t.icon.map(function(t){return'<span class="tox-collection__item-icon">'+t+"</span>"}).getOr("");return'<div class="tox-collection__item" tabindex="-1" data-collection-item-value="'+('"'===(e=t.value)?"&quot;":e)+'">'+o+n+"</div>"}),r=1<a.columns&&"auto"!==a.columns?V(n,a.columns):[n],i=E(r,function(t){return'<div class="tox-collection__group">'+t.join("")+"</div>"}),xn(e.element(),i.join("")),"auto"===a.columns&&bk(o,5,"tox-collection__item").each(function(t){var e=t.numRows,n=t.numColumns;Kc.setGridSize(o,e,n)}),Kn(o,Jk)}}),_m.config({}),Kc.config((t=a.columns,n="normal",1===t?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:"auto"===t?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:"color"===n?".tox-swatches__row":".tox-collection__group",cell:"color"===n?"."+Cw:"."+Sw}})),bm("collection-events",i)])});return TS(o,u,["tox-form__group--collection"])},qz=function(r){return function(e,n,o){return wt(n,"name").fold(function(){return r(n,o)},function(t){return e.field(t,r(n,o))})}},Yz={collection:qz(function(t,e){return $z(t,e.shared.providers)}),alloy:qz(b),alertbanner:qz(function(t,e){return n=t,o=e.shared.providers,Cm.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in","tox-notification--"+n.level]},components:[{dom:{tag:"div",classes:["tox-notification__icon"],innerHtml:uw("icon-"+n.icon,o.icons)}},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:o.translate(n.text)}},vl.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"],innerHtml:uw("icon-close",o.icons)},action:function(t){Jn(t,Xk,{name:"alert-banner",value:n.url})}})]});var n,o}),input:qz(function(t,e){return n=t,o=e.shared.providers,_z({name:n.name,multiline:!1,label:n.label,flex:!1,classname:"tox-textfield",validation:j.none()},o);var n,o}),textarea:qz(function(t,e){return n=t,o=e.shared.providers,_z({name:n.name,multiline:!0,label:n.label,flex:n.flex,classname:"tox-textarea",validation:j.none()},o);var n,o}),listbox:qz(function(t,e){return n=t,o=e.shared.providers,r=AS(n.label,o),i=tS.parts().field({factory:Dz,dom:{classes:["mce-select-field"]},selectBehaviours:bi([_m.config({})]),options:n.values,data:n.initialValue.getOr(undefined)}),HS(j.some(r),i);var n,o,r,i}),label:qz(function(t,e){return n=t,{dom:{tag:"label",innerHtml:(o=e.shared).providers.translate(n.label),classes:["tox-label"]},components:E(n.items,o.interpreter),behaviours:bi([XC(),ug.config({}),nO(j.none()),Kc.config({mode:"acyclic"})])};var n,o}),iframe:(vz=function(t,e){return mO(t,e.shared.providers)},function(t,e,n){var o=pt(e,{source:"dynamic"});return qz(vz)(t,o,n)}),autocomplete:qz(function(t,e){return r=t,i=e.shared,n=AS(r.label.getOr("?"),i.providers),o=tS.parts().field({factory:MS,dismissOnBlur:!1,inputClasses:["tox-textfield"],minChars:1,fetch:function(t){var e=Kl.getValue(t),n=r.getItems(e),o=_S(n,dw.BUBBLE_TO_SANDBOX,i.providers);return ub.pure(o)},markers:{openClass:"dog"},lazySink:i.getSink,parts:{menu:Ck(0,0,"normal")}}),HS(j.some(n),o);var r,i,n,o}),button:qz(function(t,e){return n=t,o=e.shared.providers,r=$O(n.name,"custom"),XO(n,r,o,[oO(""),XC()]);var n,o,r}),checkbox:qz(function(t,e){return n=t,o=e.shared.providers,r=Kl.config({store:{mode:"manual",getValue:function(t){var e=t.element().dom();return e.indeterminate?"indeterminate":e.checked?"checked":"unchecked"},setValue:function(t,e){var n=t.element().dom();switch(e){case"indeterminate":n.indeterminate=!0;break;case"checked":n.checked=!0,n.indeterminate=!1;break;default:n.checked=!1,n.indeterminate=!1}}}}),i=function(t){return t.element().dom().click(),j.some(!0)},a=tS.parts().field({factory:{sketch:b},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:bi([XC(),_m.config({}),Ha.config({}),r,Kc.config({mode:"special",onEnter:i,onSpace:i}),bm("checkbox-events",[Yr(Nt(),function(t,e){Jn(t,Uk,{name:n.name})})])])}),u=tS.parts().label({dom:{tag:"span",classes:["tox-checkbox__label"],innerHtml:o.translate(n.label)},behaviours:bi([bl.config({})])}),s=Ud({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[(c=function(t){return{dom:{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+t],innerHtml:uw("icon-"+("checked"===t?"selected":"unchecked"===t?"unselected":"indeterminate"),o.icons)}}})("checked"),c("unchecked"),c("indeterminate")]}),tS.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[a,s.asSpec(),u]});var n,o,r,i,a,u,c,s}),colorinput:qz(function(t,e){return vC(t,e.shared,e.colorinput)}),colorpicker:qz(function(t){var e=function(t){return"tox-"+t},n=GC(KC,e),r=Ud(n.sketch({dom:{tag:"div",classes:[e("color-picker-container")],attributes:{role:"presentation"}},onValidHex:function(t){Jn(t,Xk,{name:"hex-valid",value:!0})},onInvalidHex:function(t){Jn(t,Xk,{name:"hex-valid",value:!1})}}));return{dom:{tag:"div"},components:[r.asSpec()],behaviours:bi([Kl.config({store:{mode:"manual",getValue:function(t){var e=r.get(t);return wm.getCurrent(e).bind(function(t){return Kl.getValue(t).hex}).map(function(t){return"#"+t}).getOr("")},setValue:function(t,e){var n=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/.exec(e),o=r.get(t);wm.getCurrent(o).fold(function(){console.log("Can not find form")},function(t){Kl.setValue(t,{hex:j.from(n[1]).getOr("")}),Zm.getField(t,"hex").each(function(t){Kn(t,jt())})})}}}),XC()])}}),dropzone:qz(function(t,e){return rO(t,e.shared.providers)}),grid:qz(function(t,e){return n=t,o=e.shared,{dom:{tag:"div",classes:["tox-form","tox-form--"+n.columns+"col"]},components:E(n.items,o.interpreter)};var n,o}),selectbox:qz(function(t,e){return n=t,o=e.shared.providers,r=n.label.map(function(t){return AS(t,o)}),i=tS.parts().field({dom:{},selectAttributes:{size:n.size},options:n.items,factory:Dz,selectBehaviours:bi([_m.config({}),bm("selectbox-change",[Yr(Nt(),function(t,e){Jn(t,Uk,{name:n.name})})])])}),a=1<n.size?j.none():j.some({dom:{tag:"div",classes:["tox-selectfield__icon-js"],innerHtml:uw("icon-chevron-down",o.icons)}}),u={dom:{tag:"div",classes:["tox-selectfield"]},components:N([[i],a.toArray()])},tS.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:N([r.toArray(),[u]])});var n,o,r,i,a,u}),sizeinput:qz(function(t,e){return oz(t,e.shared.providers)}),urlinput:qz(function(t,e){return Xz(t,e.shared,e.urlinput)}),customeditor:qz(function(e){var n=zt(j.none()),o=Ud({dom:{tag:e.tag}}),r=zt(j.none());return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:bi([bm("editor-foo-events",[oi(function(t){o.getOpt(t).each(function(t){e.init(t.element().dom()).then(function(e){r.get().each(function(t){e.setValue(t)}),r.set(j.none()),n.set(j.some(e))})})})]),Kl.config({store:{mode:"manual",getValue:function(){return n.get().fold(function(){return r.get().getOr("")},function(t){return t.getValue()})},setValue:function(t,e){n.get().fold(function(){r.set(j.some(e))},function(t){return t.setValue(e)})}}}),XC()]),components:[o.asSpec()]}}),htmlpanel:qz(function(t){return Cm.sketch({dom:{tag:"div",innerHtml:t.html}})}),imagetools:qz(function(t,e){return Az(t,e.shared.providers)}),table:qz(function(t,e){return n=t,o=e.shared.providers,a=function(t){return{dom:{tag:"th",innerHtml:o.translate(t)}}},u=function(t){return{dom:{tag:"td",innerHtml:o.translate(t)}}},c=function(t){return{dom:{tag:"tr"},components:E(t,u)}},{dom:{tag:"table",classes:["tox-dialog__table"]},components:[(i=n.header,{dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:E(i,a)}]}),(r=n.cells,{dom:{tag:"tbody"},components:E(r,c)})]};var n,o,r,i,a,u,c})},Kz={field:function(t,e){return e}},Jz=function(e,t,n){var o=pt(n,{shared:{interpreter:function(t){return Qz(e,t,o)}}});return Qz(e,t,o)},Qz=function(e,n,o){return wt(Yz,n.type).fold(function(){return console.error('Unknown factory type "'+n.type+'", defaulting to container: ',n),n},function(t){return t(e,n,o)})},Zz=function(t){return{colorPicker:(n=t,function(t,e){lC.colorPickerDialog(n)(t,e)}),hasCustomColors:(e=t,function(){return JS(e)})};var e,n},tM=undefined&&undefined.__assign||function(){return(tM=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},eM=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",icon:"bold",format:"bold"},{title:"Italic",icon:"italic",format:"italic"},{title:"Underline",icon:"underline",format:"underline"},{title:"Strikethrough",icon:"strike-through",format:"strikethrough"},{title:"Superscript",icon:"superscript",format:"superscript"},{title:"Subscript",icon:"subscript",format:"subscript"},{title:"Code",icon:"code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Alignment",items:[{title:"Left",icon:"align-left",format:"alignleft"},{title:"Center",icon:"align-center",format:"aligncenter"},{title:"Right",icon:"align-right",format:"alignright"},{title:"Justify",icon:"align-justify",format:"alignjustify"}]}],nM=function(t){return _(t,function(t,e){if(at(e,"items")){var n=nM(e.items);return{customFormats:t.customFormats.concat(n.customFormats),formats:t.formats.concat([{title:e.title,items:n.formats}])}}if(at(e,"inline")||at(e,"block")||at(e,"selector")){var o="custom-"+e.title.toLowerCase();return{customFormats:t.customFormats.concat([{name:o,format:e}]),formats:t.formats.concat([{title:e.title,format:o,icon:e.icon}])}}return tM({},t,{formats:t.formats.concat(e)})},{customFormats:[],formats:[]})},oM=function(i){return(t=i,j.from(t.getParam("style_formats")).filter(S)).map(function(t){var e,n,o,r=(e=i,n=nM(t),o=function(t){A(t,function(t){e.formatter.has(t.name)||e.formatter.register(t.name,t.format)})},e.formatter?o(n.customFormats):e.on("init",function(){o(n.customFormats)}),n.formats);return i.getParam("style_formats_merge",!1,"boolean")?eM.concat(r):r}).getOr(eM);var t},rM=function(t,e,n){var o={type:"formatter",isSelected:e(t.format),getStylePreview:n(t.format)};return pt(t,o)},iM=function(s,t,l,f){var d=function(t){return E(t,function(t){var e,n,o,r,i,a,u=Z(t);if(Ot(t,"items")){var c=d(t.items);return pt((i=t,a={type:"submenu",isSelected:U(!1),getStylePreview:function(){return j.none()}},pt(i,a)),{getStyleItems:function(){return c}})}return Ot(t,"format")?rM(t,l,f):1===u.length&&T(u,"title")?pt(t,{type:"separator"}):(n=$n((e=t).title),o={type:"formatter",format:n,isSelected:l(n),getStylePreview:f(n)},r=pt(e,o),s.formatter.register(n,r),r)})};return d(t)},aM=navigator,uM=aM.userAgent,cM=function(t){return"matchMedia"in window&&matchMedia(t).matches};/Android/.test(uM),yz=(yz=!(bz=/WebKit/.test(uM))&&/MSIE/gi.test(uM)&&/Explorer/gi.test(aM.appName))&&/MSIE (\w+)\./.exec(uM)[1],xz=-1!==uM.indexOf("Trident/")&&(-1!==uM.indexOf("rv:")||-1!==aM.appName.indexOf("Netscape"))&&11,wz=-1!==uM.indexOf("Edge/")&&!yz&&!xz&&12,yz=yz||xz||wz,!bz&&!xz&&/Gecko/.test(uM),uM.indexOf("Mac"),kz=/(iPad|iPhone)/.test(uM),Sz="FormData"in window&&"FileReader"in window&&"URL"in window&&!!Hz,cM("only screen and (max-device-width: 480px)"),cM("only screen and (min-width: 800px)"),uM.indexOf("Windows Phone"),wz&&(bz=!1),!kz||Sz||parseInt(uM.match(/AppleWebKit\/(\d*)/)[1],10),window.getSelection&&window,yz&&!wz&&document.documentMode;var sM,lM,fM,dM=Array.isArray,mM=function(t,e,n){var o,r;if(!t)return 0;if(n=n||t,t.length!==undefined){for(o=0,r=t.length;o<r;o++)if(!1===e.call(n,t[o],o,t))return 0}else for(o in t)if(t.hasOwnProperty(o)&&!1===e.call(n,t[o],o,t))return 0;return 1},hM=function(t,e,n){var o,r;for(o=0,r=t.length;o<r;o++)if(e.call(n,t[o],o,t))return o;return-1},gM={isArray:dM,toArray:function(t){var e,n,o=t;if(!dM(t))for(o=[],e=0,n=t.length;e<n;e++)o[e]=t[e];return o},each:mM,map:function(n,o){var r=[];return mM(n,function(t,e){r.push(o(t,e,n))}),r},filter:function(n,o){var r=[];return mM(n,function(t,e){o&&!o(t,e,n)||r.push(t)}),r},indexOf:function(t,e){var n,o;if(t)for(n=0,o=t.length;n<o;n++)if(t[n]===e)return n;return-1},reduce:function(t,e,n,o){var r=0;for(arguments.length<3&&(n=t[0]);r<t.length;r++)n=e.call(o,n,t[r],r);return n},findIndex:hM,find:function(t,e,n){var o=hM(t,e,n);return-1!==o?t[o]:undefined},last:function(t){return t[t.length-1]}},pM=(gM.isArray,gM.toArray,function(t,e,n){var o;for(e=e||",","string"==typeof(t=t||[])&&(t=t.split(e)),n=n||{},o=t.length;o--;)n[t[o]]={};return n}),vM=(gM.each,gM.map,gM.filter,gM.indexOf,function(t,e){for(var n,o,r,i=[],a=2;a<arguments.length;a++)i[a-2]=arguments[a];var u,c=arguments;for(n=1,o=c.length;n<o;n++)for(r in e=c[n])e.hasOwnProperty(r)&&(u=e[r])!==undefined&&(t[r]=u);return t}),bM=mz.trim,yM=function(e){return function(t){if(t&&1===t.nodeType){if(t.contentEditable===e)return!0;if(t.getAttribute("data-mce-contenteditable")===e)return!0}return!1}},xM=yM("true"),wM=yM("false"),kM=function(t,e,n,o,r){return{type:t,title:e,url:n,level:o,attach:r}},SM=function(t){return t.innerText||t.textContent},CM=function(t){return(e=t)&&"A"===e.nodeName&&(e.id||e.name)!==undefined&&zM(t);var e},OM=function(t){return t&&/^(H[1-6])$/.test(t.nodeName)},zM=function(t){return function(t){for(;t=t.parentNode;){var e=t.contentEditable;if(e&&"inherit"!==e)return xM(t)}return!1}(t)&&!wM(t)},MM=function(t){return OM(t)&&zM(t)},TM=function(t){var e,n,o=(e=t).id?e.id:$n("h");return kM("header",SM(t),"#"+o,OM(n=t)?parseInt(n.nodeName.substr(1),10):0,function(){t.id=o})},HM=function(t){var e=t.id||t.name,n=SM(t);return kM("anchor",n||"#"+e,"#"+e,0,P)},VM=function(t){var e,n;return e="h1,h2,h3,h4,h5,h6,a:not([href])",n=t,E(Xa(je.fromDom(n),e),function(t){return t.dom()})},EM=function(t){return 0<bM(t.title).length},AM=function(t){var e,n=VM(t);return B((e=n,E(B(e,MM),TM)).concat(E(B(n,CM),HM)),EM)},BM="tinymce-url-history",DM=function(t){return x(t)&&/^https?/.test(t)},_M=function(t){return w(t)&&function(t,e){for(var n=Z(t),o=0,r=n.length;o<r;o++){var i=n[o],a=t[i];if(e(a,i,t))return j.some(a)}return j.none()}(t,function(t){return!(S(e=t)&&e.length<=5&&G(e,DM));var e}).isNone()},RM=function(){var t,e=localStorage.getItem(BM);if(null===e)return{};try{t=JSON.parse(e)}catch(n){if(n instanceof SyntaxError)return console.log("Local storage "+BM+" was not valid JSON",n),{};throw n}return _M(t)?t:(console.log("Local storage "+BM+" was not valid format",t),{})},IM=function(t){var e=RM();return Object.prototype.hasOwnProperty.call(e,t)?e[t]:[]},FM=function(e,t){if(DM(e)){var n=RM(),o=Object.prototype.hasOwnProperty.call(n,t)?n[t]:[],r=B(o,function(t){return t!==e});n[t]=[e].concat(r).slice(0,5),function(t){if(!_M(t))throw new Error("Bad format for history:\n"+JSON.stringify(t));localStorage.setItem(BM,JSON.stringify(t))}(n)}},LM=Object.prototype.hasOwnProperty,PM=function(t){return!!t},jM=function(t){return nt(pM(t,/[, ]/),PM)},NM=function(t,e){return LM.call(t,e)?j.some(t[e]):j.none()},UM=function(t,e,n){var o=NM(t,e).getOr(n);return x(o)?j.some(o):j.none()},WM=function(u){return function(r){return(t=u.settings,e=r,n=j.some(t.file_picker_types).filter(PM),o=j.some(t.file_browser_callback_types).filter(PM),i=n.or(o).map(jM).fold(function(){return!0},function(t){return NM(t,e).getOr(!1)}),a=j.some(t.file_picker_callback).filter(O),i?a:j.none()).map(function(o){return function(e){return ub.nu(function(n){var t=vM({filetype:r},j.from(e.meta).getOr({}));o.call(u,function(t,e){if(!x(t))throw new Error("Expected value to be string");if(e!==undefined&&!w(e))throw new Error("Expected meta to be a object");n({value:t,meta:e})},e.value,t)})}});var t,e,n,o,i,a}},GM=function(t){return{getHistory:IM,addToHistory:FM,getLinkInformation:(n=t,function(){return!1===n.settings.typeahead_urls?j.none():j.some({targets:AM(n.getBody()),anchorTop:UM(n.settings,"anchor_top","#top"),anchorBottom:UM(n.settings,"anchor_bottom","#bottom")})}),getValidationHandler:(e=t,function(){var t=e.settings.filepicker_validator_handler;return O(t)?j.some(t):j.none()}),getUrlPicker:WM(t)};var e,n},XM=function(t,e,n){var o,r,i,a,u,c,s,l,f,d={shared:{providers:{icons:function(){return e.ui.registry.getAll().icons},translate:Aw.translate},interpreter:function(t){return Qz(Kz,t,d)},anchors:{toolbar:function(){return{anchor:"hotspot",hotspot:n(),layouts:{onRtl:function(){return[Jy]},onLtr:function(){return[Qy]}}}},banner:function(){return{anchor:"hotspot",hotspot:n(),layouts:{onRtl:function(){return[nx]},onLtr:function(){return[nx]}}}},cursor:function(){return{anchor:"selection",root:je.fromDom(e.getBody()),getSelection:function(){var t=e.selection.getRng();return j.some(lp(je.fromDom(t.startContainer),t.startOffset,je.fromDom(t.endContainer),t.endOffset))}}},node:function(t){return{anchor:"node",root:je.fromDom(e.getBody()),node:t}}},getSink:function(){return dt.value(t)}},urlinput:GM(e),styleselect:(o=e,r=function(t){return function(){return o.formatter.match(t)}},i=function(e){return function(){var t=o.formatter.get(e);return t!==undefined?j.some({tag:0<t.length&&(t[0].inline||t[0].block)||"div",styleAttr:o.formatter.getCssText(e)}):j.none()}},a=function(t){var e=t.items;return e!==undefined&&0<e.length?W(e,a):[t.format]},u=zt([]),c=zt([]),s=zt([]),l=zt([]),f=zt(!1),o.on("init",function(){var t=oM(o),e=iM(o,t,r,i);u.set(e),c.set(W(e,a))}),o.on("addStyleModifications",function(t){var e=iM(o,t.items,r,i);s.set(e),f.set(t.replace),l.set(W(e,a))}),{getData:function(){var t=f.get()?[]:u.get(),e=s.get();return t.concat(e)},getFlattenedKeys:function(){var t=f.get()?[]:c.get(),e=l.get();return t.concat(e)}}),colorinput:Zz(e)};return d},$M=tinymce.util.Tools.resolve("tinymce.util.Delay"),qM=function(t){return cv.sketch({dom:{tag:"div",classes:["tox-toolbar__group"]},components:[cv.parts().items({})],items:t.items,markers:{itemSelector:".tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled])"},tgroupBehaviours:bi([_m.config({}),Ha.config({})])})},YM=function(n){var t=n.cyclicKeying?"cyclic":"acyclic";return iv.sketch({uid:n.uid,dom:{tag:"div",classes:["tox-toolbar"]},components:[iv.parts().groups({})],toolbarBehaviours:bi([Kc.config({mode:t,onEscape:n.onEscape,selector:".tox-toolbar__group"}),bm("toolbar-events",[oi(function(t){var e=E(n.initGroups,qM);iv.setGroups(t,e)})])])})},KM=[Dr("disabled",!1),Mr("tooltip"),Mr("icon"),Mr("text"),_r("onSetup",function(){return P})],JM=Yo([xr("type"),wr("onAction")].concat(KM)),QM=function(t){return ur("toolbarbutton",JM,t)},ZM=Yo([xr("type"),Mr("tooltip"),Mr("icon"),Mr("text"),wr("fetch"),_r("onSetup",function(){return P})]),tT=Yo([xr("type"),Mr("tooltip"),Mr("icon"),Mr("text"),(sM="select",zr(sM,vr)),wr("fetch"),_r("onSetup",function(){return P}),Br("presets","normal"),Vr("columns",1),wr("onAction"),wr("onItemAction")]),eT=[Dr("active",!1)].concat(KM),nT=Yo(eT.concat([xr("type"),wr("onAction")])),oT=function(t){return ur("ToggleButton",nT,t)},rT=[_r("predicate",function(){return!1}),Vr("scope","node"),Vr("position","selection")],iT=KM.concat([Vr("type","contextformbutton"),Vr("primary",!1),wr("onAction"),Ir("original",b)]),aT=eT.concat([Vr("type","contextformbutton"),Vr("primary",!1),wr("onAction"),Ir("original",b)]),uT=KM.concat([Vr("type","contextformbutton")]),cT=eT.concat([Vr("type","contextformtogglebutton")]),sT=fr("type",{contextformbutton:iT,contextformtogglebutton:aT}),lT=Yo([Vr("type","contextform"),_r("initValue",function(){return""}),Mr("label"),Cr("commands",sT),zr("launch",fr("type",{contextformbutton:uT,contextformtogglebutton:cT}))].concat(rT)),fT=Yo([Vr("type","contexttoolbar"),xr("items")].concat(rT)),dT=$n("toolbar.button.execute"),mT={"alloy.execute":["disabling","alloy.base.behaviour","toggling","toolbar-button-events"]},hT=Object.freeze({getState:function(t,e,n){return n}}),gT=Object.freeze({events:function(r,i){var o=function(n,o){r.updateState.each(function(t){var e=t(n,o);i.set(e)}),r.renderComponents.each(function(t){var e=t(o,i.get());fo(n),A(e,function(t){uo(n,n.getSystem().build(t))})})};return Xr([Yr(Se(),function(t,e){var n=r.channel;T(e.channels(),n)&&o(t,e.data())}),oi(function(e,t){r.initialData.each(function(t){o(e,t)})})])}}),pT=Object.freeze({init:function(t){var e=zt(j.none());return{readState:function(){return e.get().getOr("none")},get:function(){return e.get()},set:function(t){return e.set(t)},clear:function(){return e.set(j.none())}}}}),vT=[br("channel"),Or("renderComponents"),Or("updateState"),Or("initialData")],bT=xi({fields:vT,name:"reflecting",active:gT,apis:hT,state:pT}),yT=U([br("toggleClass"),br("fetch"),ta("onExecute"),Vr("getHotspot",j.some),Vr("layouts",j.none()),ta("onItemExecute"),Or("lazySink"),br("dom"),Qi("onOpen"),Qc("splitDropdownBehaviours",[oS,Kc,Ha]),Vr("matchWidth",!1),Vr("useMinWidth",!1)].concat(CS())),xT=Ms({factory:vl,schema:[br("dom")],name:"arrow",defaults:function(t){return{dom:{attributes:{role:"button","aria-haspopup":!0}},buttonBehaviours:bi([Ha.revoke()])}},overrides:function(e){return{action:function(t){t.getSystem().getByUid(e.uid).each(Qn)},buttonBehaviours:bi([ba.config({toggleOnExecute:!1,toggleClass:e.toggleClass,aria:{mode:"pressed"}})])}}}),wT=Ms({factory:vl,schema:[br("dom")],name:"button",defaults:function(t){return{dom:{attributes:{role:"button"}},buttonBehaviours:bi([Ha.revoke()])}},overrides:function(n){return{action:function(e){e.getSystem().getByUid(n.uid).each(function(t){n.onExecute(t,e)})}}}}),kT=U([xT,wT,Ts({schema:[Yi()],name:"menu",defaults:function(o){return{onExecute:function(e,n){e.getSystem().getByUid(o.uid).each(function(t){o.onItemExecute(t,e,n)})}}}}),lS()]),ST=gl({name:"SplitDropdown",configFields:yT(),partFields:kT(),factory:function(n,t,e,o){var r=function(t){wm.getCurrent(t).each(function(t){yu.highlightFirst(t),Kc.focusIn(t)})},i=function(t){gS(n,function(t){return t},t,o,r,Tk.HighlightFirst).get(P)},a=function(t){var e=Us(t,n,"button");return Qn(e),j.some(!0)},u=Ca(j.some(i));return{uid:n.uid,dom:n.dom,components:t,eventOrder:{"alloy.execute":["toggling","alloy.base.behaviour"]},events:u,behaviours:ts(n.splitDropdownBehaviours,[oS.config({others:{sandbox:function(t){var e=Us(t,n,"arrow");return vS(n,t,{onOpen:function(){ba.on(e)},onClose:function(){ba.off(e)}})}}}),Kc.config({mode:"special",onSpace:a,onEnter:a,onDown:function(t){return i(t),j.some(!0)}}),Ha.config({})]),domModification:{attributes:{role:"presentation"}}}}}),CT=function(e){return{isDisabled:function(){return Ym.isDisabled(e)},setDisabled:function(t){return t?Ym.disable(e):Ym.enable(e)}}},OT=function(e){return{setActive:function(t){ba.set(e,t)},isActive:function(){return ba.isOn(e)},isDisabled:function(){return Ym.isDisabled(e)},setDisabled:function(t){return t?Ym.disable(e):Ym.enable(e)}}},zT=$n("focus-button"),MT=function(e,n,t,o,r){var i,a=t.map(function(t){return{"aria-label":r.translate(t),title:r.translate(t)}}).getOr({});return{dom:{tag:"button",classes:["tox-tbtn"].concat(n.isSome()?["tox-tbtn--select"]:[]),attributes:a},components:Ww([e.map(function(t){return NO(t,r.icons)}),n.map(function(t){return UO(t,"tox-tbtn",r)})]),eventOrder:(i={},i[At()]=["focusing","alloy.base.behaviour","common-button-display-events"],i),buttonBehaviours:bi([bm("common-button-display-events",[Yr(At(),function(t,e){e.event().prevent(),Kn(t,zT)})])].concat(o.map(function(t){return bT.config({channel:t,initialData:{icon:e,text:n},renderComponents:function(t,e){return Ww([t.icon.map(function(t){return NO(t,r.icons)}),t.text.map(function(t){return UO(t,"tox-tbtn",r)})])}})}).toArray()))}},TT=function(t,e,n){var o,r=zt(P),i=MT(t.icon,t.text,t.tooltip,j.none(),n);return vl.sketch({dom:i.dom,components:i.components,eventOrder:mT,buttonBehaviours:bi([bm("toolbar-button-events",[(o={onAction:t.onAction,getApi:e.getApi},ai(function(e,t){Pw(o,e)(function(t){Jn(e,dT,{buttonApi:t}),o.onAction(t)})})),jw(e,r),Nw(e,r)]),Lw(t.disabled)].concat(e.toolbarButtonBehaviours))})},HT=function(t,e,n){return TT(t,{toolbarButtonBehaviours:[].concat(0<n.length?[bm("toolbarButtonWith",n)]:[]),getApi:CT,onSetup:t.onSetup},e)},VT=function(t,e,n){return pt(TT(t,{toolbarButtonBehaviours:[ug.config({}),ba.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(0<n.length?[bm("toolbarToggleButtonWith",n)]:[]),getApi:OT,onSetup:t.onSetup},e))},ET=function(e,t){var n,r,o,i=$n("channel-update-split-dropdown-display"),a=function(n){return{isDisabled:function(){return!0},setDisabled:function(){},setIconFill:function(t,e){Ya(n.element(),'svg path[id="'+t+'"], rect[id="'+t+'"]').each(function(t){Mn(t,"fill",e)})},setIconStroke:function(t,e){Ya(n.element(),'svg path[id="'+t+'"], rect[id="'+t+'"]').each(function(t){Mn(t,"stroke",e)})},setActive:function(t){ba.set(n,t)},isActive:function(){return ba.isOn(n)}}},u=zt(P),c={getApi:a,onSetup:e.onSetup};return ST.sketch({dom:{tag:"div",classes:["tox-split-button"]},onExecute:function(t){e.onAction(a(t))},onItemExecute:function(t,e,n){},splitDropdownBehaviours:bi([ba.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1}),bm("split-dropdown-events",[Yr(zT,Ha.focus),jw(c,u),Nw(c,u)])]),toggleClass:"mce-active",lazySink:t.getSink,fetch:(n=a,r=e,o=t.providers,function(e){return ub.nu(function(t){return r.fetch(t)}).map(function(t){return Lk(pt(Ik($n("menu-value"),t,function(t){r.onItemAction(n(e),t)},r.columns,r.presets,dw.CLOSE_ON_EXECUTE,r.select.getOr(function(){return!1}),o),{movement:Ok(r.columns,r.presets),menuBehaviours:xk("auto"!==r.columns?[]:[oi(function(o,t){bk(o,4,Vw(r.presets)).each(function(t){var e=t.numRows,n=t.numColumns;Kc.setGridSize(o,e,n)})})])}))})}),parts:{menu:Ck(0,e.columns,e.presets)},components:[ST.parts().button(MT(e.icon,e.text,e.tooltip,j.some(i),t.providers)),ST.parts().arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:cw("icon-chevron-down",t.providers.icons,U(""))}})]})},AT=undefined&&undefined.__assign||function(){return(AT=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},BT=undefined&&undefined.__rest||function(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&(n[o[r]]=t[o[r]])}return n},DT=function(i,a){return Yr(dT,function(t,e){var n,o=i.get(t),r=(n=o,{hide:function(){return Kn(n,He())},getValue:function(){return Kl.getValue(n)}});a.onAction(r,e.event().buttonApi())})},_T=function(t,e,n){var o,r,i,a,u,c,s,l,f,d,m,h,g={backstage:{shared:{providers:n}}};return"contextformtogglebutton"===e.type?(s=t,f=g,(d=(l=e).original).primary,m=BT(d,["primary"]),h=cr(oT(AT({},m,{type:"togglebutton",onAction:function(){}}))),VT(h,f.backstage.shared.providers,[DT(s,l)])):(o=t,i=g,(a=(r=e).original).primary,u=BT(a,["primary"]),c=cr(QM(AT({},u,{type:"button",onAction:function(){}}))),HT(c,i.backstage.shared.providers,[DT(o,r)]))},RT=function(t,e){var n,o,r,i,a=$n("context-form-field"),u=t.label.map(function(t){return{dom:{tag:"label",classes:["tox-toolbar-label"],attributes:{"for":a},innerHtml:e.translate(t)}}}),c=t.label.fold(function(){return{}},function(t){return{id:a}}),s=Ud(Am.sketch({inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-js"],data:t.initValue(),inputAttributes:c,selectOnFocus:!0,inputBehaviours:bi([Kc.config({mode:"special",onEnter:function(t){return l.findPrimary(t).map(function(t){return Qn(t),!0})},onLeft:function(t,e){return e.cut(),j.none()},onRight:function(t,e){return e.cut(),j.none()}})])})),l=(n=s,o=t.commands,r=e,i=E(o,function(t){return Ud(_T(n,t,r))}),{asSpecs:function(){return E(i,function(t){return t.asSpec()})},findPrimary:function(n){return Tt(o,function(t,e){return t.primary?j.from(i[e]).bind(function(t){return t.getOpt(n)}).filter(k(Ym.isDisabled)):j.none()})}});return YM({uid:$n("context-toolbar"),initGroups:[{items:u.toArray().concat([s.asSpec()])},{items:l.asSpecs()}],onEscape:j.none,cyclicKeying:!0})},IT=$n("forward-slide"),FT=$n("backward-slide"),LT=$n("change-slide-event"),PT="tox-pop--resizing",jT=function(e,t){return Tt(t,function(t){return t.predicate(e.dom())?j.some({toolbarApi:t,elem:e}):j.none()})},NT=function(e,n){var t=function(t){return t.dom()===n.getBody()},o=je.fromDom(n.selection.getNode());return jT(o,e.inNodeScope).orThunk(function(){return jT(o,e.inEditorScope).orThunk(function(){return function(t,e,n){for(var o=t.dom(),r=O(n)?n:U(!1);o.parentNode;){o=o.parentNode;var i=je.fromDom(o),a=e(i);if(a.isSome())return a;if(r(i))break}return j.none()}(o,function(t){return jT(t,e.inNodeScope)},t)})})},UT=undefined&&undefined.__assign||function(){return(UT=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},WT=function(n,r){var t={},i=[],a=[],u={},c={},o=function(e,n){var o=cr(ur("ContextForm",lT,n));(t[e]=o).launch.map(function(t){u["form:"+e]=UT({},n.launch,{type:"contextformtogglebutton"===t.type?"togglebutton":"button",onAction:function(){r(o)}})}),"editor"===o.scope?a.push(o):i.push(o),c[e]=o},s=function(e,n){var t;(t=n,ur("ContextToolbar",fT,t)).each(function(t){"editor"===n.scope?a.push(t):i.push(t),c[e]=t})},e=Z(n);return A(e,function(t){var e=n[t];"contextform"===e.type?o(t,e):"contexttoolbar"===e.type&&s(t,e)}),{forms:t,inNodeScope:i,inEditorScope:a,lookupTable:c,formNavigators:u}},GT=$n("update-menu-text"),XT=function(t,e,o){var r=t.text.map(function(t){return Ud(UO(t,e,o.providers))}),n=function(t,e){var n=Kl.getValue(t);return Ha.focus(n),Jn(n,"keydown",{raw:e.event().raw()}),j.some(!0)};return Ud(hC.sketch({role:t.role,dom:{tag:"button",classes:[e,e+"--select"].concat(E(t.classes,function(t){return e+"--"+t}))},components:Ww([t.icon.map(function(t){return NO(t,o.providers.icons)}),r.map(function(t){return t.asSpec()}),j.some({dom:{tag:"div",classes:[e+"__select-chevron"],innerHtml:uw("icon-chevron-down",o.providers.icons)}})]),matchWidth:!0,useMinWidth:!0,dropdownBehaviours:bi([bl.config({}),ug.config({}),bm("menubutton-update-display-text",[oi(t.onAttach),ri(t.onDetach),Yr(GT,function(e,n){r.bind(function(t){return t.getOpt(e)}).each(function(t){ug.set(t,[_h(o.providers.translate(n.event().text()))])})})])]),eventOrder:pt(mT,{mousedown:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"]}),sandboxBehaviours:bi([Kc.config({mode:"special",onLeft:n,onRight:n})]),lazySink:o.getSink,toggleClass:e+"--active",parts:{menu:Ck(0,t.columns,t.presets)},fetch:function(){return ub.nu(t.fetch)}})).asSpec()},$T=function(t,e,n,o){var r,i,a,u,c,s,l="basic"===n.type?function(){return E(n.data,function(t){return rM(t,o.isSelectedFor,o.getPreviewFor)})}:n.getData;return{items:(r=t,i=e,a=o,u=function(e,n,t){var o=i.shared.providers.translate(e.title);return"separator"===e.type?{type:"separator",text:o}:"submenu"===e.type?{type:"menuitem",text:o,disabled:t,getSubmenuItems:function(){return W(e.getStyleItems(),function(t){return c(t,n)})}}:e.getStylePreview().fold(function(){return{type:"togglemenuitem",text:o,active:e.isSelected(),disabled:!1,onAction:a.onAction(e)}},function(t){return{type:"styleitem",item:{type:"togglemenuitem",text:o,disabled:!1,active:e.isSelected(),onAction:a.onAction(e),meta:t}}})},c=function(t,e){var n="formatter"===t.type&&!r.formatter.canApply(t.format);return 0===e?n?[]:[u(t,e,!1)]:[u(t,e,n)]},s=function(t){return W(t,function(t){return c(t,1)})},{validateItems:s,getFetch:function(o,r){return function(t){var e=r(),n=s(e);t(_S(n,dw.CLOSE_ON_EXECUTE,o.shared.providers))}}}),getStyleItems:l}},qT=function(n,t,e,o){var r=$T(n,t,e,o),i=r.items,a=r.getStyleItems;return XT({text:j.some(""),icon:j.none(),role:"button",fetch:i.getFetch(t,a),onAttach:o.nodeChangeHandler.map(function(e){return function(t){return n.on("nodeChange",e(t))}}).getOr(function(){}),onDetach:o.nodeChangeHandler.map(function(e){return function(t){return n.off("nodeChange",e(t))}}).getOr(function(){}),columns:1,presets:"normal",classes:["bespoke"]},"tox-tbtn",t.shared)};(fM=lM||(lM={}))[fM.SemiColon=0]="SemiColon",fM[fM.Space=1]="Space";var YT,KT,JT=function(t,e,n,o){var r,i,a=wt(t.settings,e).getOr(n);return{type:"basic",data:(i=a,r=o===lM.SemiColon?i.replace(/;$/,"").split(";"):i.split(" "),E(r,function(t){var e=t,n=t,o=t.split("=");return 1<o.length&&(e=o[0],n=o[1]),{title:e,format:n}}))}},QT=[{title:"Left",icon:"align-left",format:"alignleft"},{title:"Center",icon:"align-center",format:"aligncenter"},{title:"Right",icon:"align-right",format:"alignright"},{title:"Justify",icon:"align-justify",format:"alignjustify"}],ZT=function(n,o){var t=j.some(function(e){return function(){var t=R(QT,function(t){return n.formatter.match(t.format)}).fold(function(){return"Align"},function(t){return t.title});Jn(e,GT,{text:o.shared.providers.translate(t)})}}),e={type:"basic",data:QT};return qT(n,o,e,{isSelectedFor:function(t){return function(){return n.formatter.match(t)}},getPreviewFor:function(t){return function(){return j.none()}},onAction:function(t){return function(){n.undoManager.transact(function(){n.focus(),n.formatter.match(t.format)?n.formatter.remove(t.format):n.formatter.apply(t.format)})}},nodeChangeHandler:t})},tH=function(r){var o=function(){var n=function(t){return t?t.split(",")[0]:""},t=r.queryCommandValue("FontName"),e=i.data,o=t?t.toLowerCase():"";return R(e,function(t){var e=t.format;return e.toLowerCase()===o||n(e).toLowerCase()===n(o).toLowerCase()})},t=j.some(function(n){return function(){var t=r.queryCommandValue("FontName"),e=o().fold(function(){return t},function(t){return t.title});Jn(n,GT,{text:e})}}),i=JT(r,"font_formats","Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats",lM.SemiColon);return{isSelectedFor:function(e){return function(){return o().exists(function(t){return t.format===e})}},getPreviewFor:function(t){return function(){return j.some({tag:"div",styleAttr:-1===t.indexOf("dings")?"font-family:"+t:""})}},onAction:function(t){return function(){r.undoManager.transact(function(){r.focus(),r.execCommand("FontName",!1,t.format)})}},nodeChangeHandler:t,dataset:i}},eH=function(t,e){return/[0-9.]+px$/.test(t)?(n=72*parseInt(t,10)/96,o=e||0,r=Math.pow(10,o),Math.round(n*r)/r+"pt"):t;var n,o,r},nH=function(i){var a=function(){var n=j.none(),o=u.data,r=i.queryCommandValue("FontSize");if(r)for(var t=function(t){var e=eH(r,t);n=R(o,function(t){return t.format===r||t.format===e})},e=3;n.isNone()&&0<=e;e--)t(e);return{matchOpt:n,px:r}},t=j.some(function(r){return function(){var t=a(),e=t.matchOpt,n=t.px,o=e.fold(function(){return n},function(t){return t.title});Jn(r,GT,{text:o})}}),u=JT(i,"fontsize_formats","8pt 10pt 12pt 14pt 18pt 24pt 36pt",lM.Space);return{isSelectedFor:function(e){return function(){return a().matchOpt.exists(function(t){return t.format===e})}},getPreviewFor:function(){return function(){return j.none()}},onAction:function(t){return function(){i.undoManager.transact(function(){i.focus(),i.execCommand("FontSize",!1,t.format)})}},nodeChangeHandler:t,dataset:u}},oH=function(n,t,e){var o=e.parents,r=t();return Tt(o,function(e){return R(r,function(t){return n.formatter.matchNode(e,t.format)})}).orThunk(function(){return n.formatter.match("p")?j.some({title:"Paragraph",format:"p"}):j.none()})},rH=function(o){var t=j.some(function(n){return function(t){var e=oH(o,function(){return r.data},t).fold(function(){return"Paragraph"},function(t){return t.title});Jn(n,GT,{text:e})}}),r=JT(o,"block_formats","Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre",lM.SemiColon);return{isSelectedFor:function(t){return function(){return o.formatter.match(t)}},getPreviewFor:function(e){return function(){var t=o.formatter.get(e);return j.some({tag:0<t.length&&(t[0].inline||t[0].block)||"div",styleAttr:o.formatter.getCssText(e)})}},onAction:function(t){return function(){o.undoManager.transact(function(){o.focus(),o.formatter.match(t.format)?o.formatter.remove(t.format):o.formatter.apply(t.format)})}},nodeChangeHandler:t,dataset:r}},iH=function(i){return{isSelectedFor:function(t){return function(){return i.formatter.match(t)}},getPreviewFor:function(e){return function(){var t=i.formatter.get(e);return t!==undefined?j.some({tag:0<t.length&&(t[0].inline||t[0].block)||"div",styleAttr:i.formatter.getCssText(e)}):j.none()}},onAction:function(t){return function(){i.undoManager.transact(function(){i.focus(),i.formatter.match(t.format)?i.formatter.remove(t.format):i.formatter.apply(t.format)})}},nodeChangeHandler:j.some(function(n){var o=function(t){var e=t.items;return e!==undefined&&0<e.length?W(e,o):[{title:t.title,format:t.format}]},r=W(oM(i),o);return function(t){var e=oH(i,function(){return r},t).fold(function(){return"Paragraph"},function(t){return t.title});Jn(n,GT,{text:e})}})}},aH={file:{title:"File",items:"newdocument restoredraft | preview | print"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen"},insert:{title:"Insert",items:"image link media template codesample inserttable | charmap emoticons hr | pagebreak nonbreaking anchor toc | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | formats blockformats fontformats fontsizes align | removeformat"},tools:{title:"Tools",items:"spellchecker spellcheckerlanguage | a11ycheck code"},table:{title:"Table",items:"inserttable tableprops deletetable row column cell"},help:{title:"Help",items:"help"}},uH=function(t,e,n,o){return XT({text:t.text,icon:t.icon,role:o,fetch:function(e){t.fetch(function(t){e(_S(t,dw.CLOSE_ON_EXECUTE,n.providers))})},onAttach:function(){},onDetach:function(){},columns:1,presets:"normal",classes:[]},e,n)},cH={formats:function(t,e){var n=e.styleselect,o=$T(t,e,n,iH(t));return{type:"menuitem",text:"Formats",getSubmenuItems:function(){return o.items.validateItems(o.getStyleItems())}}},blockformats:function(t,e){var n=rH(t),o=$T(t,e,n.dataset,n);return{type:"menuitem",text:"Blocks",getSubmenuItems:function(){return o.items.validateItems(o.getStyleItems())}}},fontformats:function(t,e){var n=tH(t),o=$T(t,e,n.dataset,n);return{type:"menuitem",text:e.shared.providers.translate("Fonts"),getSubmenuItems:function(){return o.items.validateItems(o.getStyleItems())}}},fontsizes:function(t,e){var n=nH(t),o=$T(t,e,n.dataset,n);return{type:"menuitem",text:"Font Sizes",getSubmenuItems:function(){return o.items.validateItems(o.getStyleItems())}}}},sH=function(t){return"string"==typeof t?t.split(" "):t},lH=function(a,u,c){var s=vt(aH,u.menus),e=0<Z(u.menus).length,t=u.menubar===undefined||!0===u.menubar?sH("file edit view insert format tools table"):sH(!1===u.menubar?"":u.menubar),n=B(t,function(t){return e&&u.menus.hasOwnProperty(t)&&u.menus[t].hasOwnProperty("items")||aH.hasOwnProperty(t)}),o=E(n,function(t){var e,n,o,r,i=s[t];return e={title:i.title,items:sH(i.items)},n=u,o=a,r=c,{text:e.title,getItems:function(){return W(e.items,function(t){return 0===t.trim().length?[]:"separator"===t||"|"===t?[{type:"separator"}]:n.menuItems[t]?[n.menuItems[t]]:cH[t]?[cH[t](o,r)]:[]})}}});return B(o,function(t){return 0<t.getItems().length})},fH=function(o,r){return function(t,e){var n=o(t).fold(g(dt.error,lr),dt.value).getOrDie();return r(n,e)}},dH={button:fH(QM,function(t,e){return n=t,o=e.backstage.shared.providers,HT(n,o,[]);var n,o}),togglebutton:fH(oT,function(t,e){return n=t,o=e.backstage.shared.providers,VT(n,o,[]);var n,o}),menubutton:fH(function(t){return ur("menubutton",ZM,t)},function(t,e){return uH(t,"tox-tbtn",e.backstage.shared,"button")}),splitbutton:fH(function(t){return ur("SplitButton",tT,t)},function(t,e){return ET(t,e.backstage.shared)}),styleSelectButton:function(t,e){return n=t,o=e.backstage,r=o.styleselect,qT(n,o,r,iH(n));var n,o,r},fontsizeSelectButton:function(t,e){return n=t,o=e.backstage,r=nH(n),qT(n,o,r.dataset,r);var n,o,r},fontSelectButton:function(t,e){return n=t,o=e.backstage,r=tH(n),qT(n,o,r.dataset,r);var n,o,r},formatButton:function(t,e){return n=t,o=e.backstage,r=rH(n),qT(n,o,r.dataset,r);var n,o,r},alignMenuButton:function(t,e){return ZT(t,e.backstage)}},mH={styleselect:dH.styleSelectButton,fontsizeselect:dH.fontsizeSelectButton,fontselect:dH.fontSelectButton,formatselect:dH.formatButton,align:dH.alignMenuButton},hH=function(e,n,o){var t=(!1===n.toolbar?"":n.toolbar===undefined||!0===n.toolbar?"undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image":n.toolbar).split("|"),r=E(t,function(t){return t.trim().split(" ")}),i=E(r,function(t){return W(t,function(t){return 0===t.trim().length?[]:wt(n.buttons,t.toLowerCase()).fold(function(){return wt(mH,t.toLowerCase()).map(function(t){return t(e,o)}).orThunk(function(){return console.error("No representation for toolbarItem: "+t),j.none()})},function(t){return n=o,wt(dH,(e=t).type).fold(function(){return console.error("skipping button defined by",e),j.none()},function(t){return j.some(t(e,n))});var e,n}).toArray()})});return B(i,function(t){return 0<t.length})},gH=function(i,t,a,c){var n,o,s=Fh((n={sink:a,onEscape:function(){return i.focus(),j.some(!0)}},o=zt([]),rw.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:function(t){o.set([]),rw.getContent(t).each(function(t){Fa(t.element(),"visibility")}),Vi(t.element(),PT),Fa(t.element(),"width")},inlineBehaviours:bi([bm("context-toolbar-events",[ni(Wt(),function(t,e){rw.getContent(t).each(function(t){}),Vi(t.element(),PT),Fa(t.element(),"width")}),Yr(LT,function(e,n){Fa(e.element(),"width");var t=lf(e.element());rw.setContent(e,n.event().contents()),Hi(e.element(),PT);var o=lf(e.element());Ba(e.element(),"width",t+"px"),rw.getContent(e).each(function(t){n.event().focus().bind(function(t){return Ii(t),Pi(e.element())}).orThunk(function(){return Kc.focusIn(t),Li()})}),setTimeout(function(){Ba(e.element(),"width",o+"px")},0)}),Yr(IT,function(t,e){rw.getContent(t).each(function(t){o.set(o.get().concat([{bar:t,focus:Li()}]))}),Jn(t,LT,{contents:e.event().forwardContents(),focus:j.none()})}),Yr(FT,function(e,t){J(o.get()).each(function(t){o.set(o.get().slice(0,o.get().length-1)),Jn(e,LT,{contents:Lh(t.bar),focus:t.focus})})})]),Kc.config({mode:"special",onEscape:function(e){return J(o.get()).fold(function(){return n.onEscape()},function(t){return Kn(e,FT),j.some(!0)})}})]),lazySink:function(){return dt.value(n.sink)}}))),l=function(){return j.some(je.fromDom(i.contentAreaContainer))};i.on("init",function(){var t=i.getBody().ownerDocument.defaultView;Gg(je.fromDom(t),"scroll",function(){f.get().each(function(t){var e=d.get().getOr(i.selection.getNode()).getBoundingClientRect(),n=i.contentAreaContainer.getBoundingClientRect(),o=e.bottom<0,r=e.top>n.height;o||r?Ba(s.element(),"display","none"):(Fa(s.element(),"display"),Nx.positionWithin(a,t,s,l()))})})});var f=zt(j.none()),d=zt(j.none()),r=zt(null),m=function(t){return{dom:{tag:"div",classes:["tox-pop__dialog"]},components:[t],behaviours:bi([Kc.config({mode:"acyclic"}),bm("pop-dialog-wrap-events",[oi(function(t){i.shortcuts.add("ctrl+F9","focus statusbar",function(){return Kc.focusIn(t)})}),ri(function(t){i.shortcuts.remove("ctrl+F9")})])])}},u=$t(function(){return WT(t,function(t){var e=h(t);Jn(s,IT,{forwardContents:m(e)})})}),h=function(t){var e,n,o=i.ui.registry.getAll().buttons,r=u();return"contexttoolbar"===t.type?(e=vt(o,r.formNavigators),n=hH(i,{buttons:e,toolbar:t.items},c),YM({uid:$n("context-toolbar"),initGroups:E(n,function(t){return{items:t}}),onEscape:j.none,cyclicKeying:!0})):RT(t,c.backstage.shared.providers)};i.on("contexttoolbar-show",function(e){var t=u();wt(t.lookupTable,e.toolbarKey).each(function(t){b(t,e.target===i?j.none():j.some(e)),rw.getContent(s).each(Kc.focusIn)})});var e={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},g={maxHeightFunction:Iy()},p={bubble:Ny(12,0,e),layouts:{onLtr:function(){return[ox]},onRtl:function(){return[rx]}},overrides:g},v={bubble:Ny(0,12,e),layouts:{onLtr:function(){return[ex,nx,Zy,Jy,tx,Qy]},onRtl:function(){return[ex,nx,tx,Qy,Zy,Jy]}},overrides:g},b=function(t,e){x();var n,o,r,i=h(t),a=e.map(je.fromDom),u=(n=t.position,o=a,r="node"===n?c.backstage.shared.anchors.node(o):c.backstage.shared.anchors.cursor(),pt(r,"line"===n?p:v));f.set(j.some(u)),d.set(e),rw.showWithin(s,u,m(i),l()),Fa(s.element(),"display")},y=function(){var t=u();NT(t,i).fold(function(){f.set(j.none()),rw.hide(s)},function(t){b(t.toolbarApi,j.some(t.elem.dom()))})},x=function(){var t=r.get();null!==t&&(clearTimeout(t),r.set(null))};i.on("click keyup setContent ObjectResized nodeChange ResizeEditor",function(t){var e;e=$M.setEditorTimeout(i,y,0),x(),r.set(e)})},pH=function(t,n,o){var e=Gg(je.fromDom(document),"mousedown",function(e){A([n,o],function(t){t.broadcastOn([Qx()],{target:e.target()})})}),r=Gg(je.fromDom(document),"touchstart",function(e){A([n,o],function(t){t.broadcastOn([Qx()],{target:e.target()})})}),i=Gg(je.fromDom(document),"mouseup",function(e){0===e.raw().button&&A([n,o],function(t){t.broadcastOn([Zx()],{target:e.target()})})}),a=function(e){A([n,o],function(t){t.broadcastOn([Qx()],{target:je.fromDom(e.target)})})};t.on("mousedown",a),t.on("touchstart",a);var u=function(e){0===e.button&&A([n,o],function(t){t.broadcastOn([Zx()],{target:je.fromDom(e.target)})})};t.on("mouseup",u);var c=Gg(je.fromDom(window),"scroll",function(e){A([n,o],function(t){t.broadcastEvent(Ae(),e)})});t.on("remove",function(){t.off("mousedown",a),t.off("touchstart",a),t.off("mouseup",u),go(n),go(o),n.destroy(),o.destroy(),e.unbind(),r.unbind(),i.unbind(),c.unbind()})},vH=Ks,bH=As,yH=hl({factory:function(o,t){var e={focus:Kc.focusIn,setMenus:function(t,e){var n=E(e,function(e){var t={text:j.some(e.text),icon:j.none(),fetch:function(t){t(e.getItems())}};return uH(t,"tox-mbtn",{getSink:o.getSink,providers:o.providers},"menuitem")});ug.set(t,n)}};return{uid:o.uid,dom:o.dom,components:[],behaviours:bi([ug.config({}),bm("menubar-events",[oi(function(t){o.onSetup(t)}),Yr(Rt(),function(n,t){Ya(n.element(),".tox-mbtn--active").each(function(e){Ka(t.event().target(),".tox-mbtn").each(function(t){rn(e,t)||n.getSystem().getByDom(e).each(function(e){n.getSystem().getByDom(t).each(function(t){hC.expand(t),hC.close(e),Ha.focus(t)})})})})}),Yr(Re(),function(n,t){t.event().prevFocus().bind(function(t){return n.getSystem().getByDom(t).toOption()}).each(function(e){t.event().newFocus().bind(function(t){return n.getSystem().getByDom(t).toOption()}).each(function(t){hC.isOpen(e)&&(hC.expand(t),hC.close(e))})})})]),Kc.config({mode:"flow",selector:".tox-mbtn",onEscape:function(t){return o.onEscape(t),j.some(!0)}}),_m.config({})]),apis:e,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[br("dom"),br("uid"),br("onEscape"),br("getSink"),br("providers"),Vr("onSetup",P)],apis:{focus:function(t,e){t.focus(e)},setMenus:function(t,e,n){t.setMenus(e,n)}}}),xH=undefined&&undefined.__assign||function(){return(xH=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},wH="container",kH=[Qc("slotBehaviours",[])],SH=function(t){return"<alloy.field."+t+">"},CH=function(r,t,e){var n,o=function(t){return Xs(r)},i=function(n,o){return void 0===o&&(o=undefined),function(t,e){return Ns(t,r,e).map(function(t){return n(t,e)}).getOr(o)}},a=function(t,e){return"true"!==Hn(t.element(),"aria-hidden")},u=i(a,!1),c=i(function(t,e){if(a(t)){var n=t.element();Ba(n,"display","none"),Mn(n,"aria-hidden","true"),Jn(t,Ie(),{name:e,visible:!1})}}),s=(n=c,function(e,t){A(t,function(t){return n(e,t)})}),l=i(function(t,e){if(!a(t)){var n=t.element();Fa(n,"display"),En(n,"aria-hidden"),Jn(t,Ie(),{name:e,visible:!0})}}),f={getSlotNames:o,getSlot:function(t,e){return Ns(t,r,e)},isShowing:u,hideSlot:c,hideAllSlots:function(t){return s(t,o())},showSlot:l};return{uid:r.uid,dom:r.dom,components:t,behaviours:Zc(r.slotBehaviours),apis:f}},OH=nt({getSlotNames:function(t,e){return t.getSlotNames(e)},getSlot:function(t,e,n){return t.getSlot(e,n)},isShowing:function(t,e,n){return t.isShowing(e,n)},hideSlot:function(t,e,n){return t.hideSlot(e,n)},hideAllSlots:function(t,e){return t.hideAllSlots(e)},showSlot:function(t,e,n){return t.showSlot(e,n)}},Zs),zH=xH({},OH,{sketch:function(t){var n,e=(n=[],{slot:function(t,e){return n.push(t),Is(wH,SH(t),e)},record:function(){return n}}),o=t(e),r=e.record(),i=E(r,function(t){return Ms({name:t,pname:SH(t)})});return sl(wH,kH,i,CH,o)}}),MH=function(t){return{element:function(){return t.element().dom()}}},TH=function(e){return zH.sketch(function(t){return{dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:(o=t,i=e,E(i,function(t){var e=t.name,n=t.settings;return o.slot(e,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:xk([oi(function(t){n.onrender&&n.onrender(MH(t))}),Yr(Ie(),function(o,t){var r=t.event();R(i,function(t){return t.name===r.name()}).each(function(t){var e=t.settings,n=r.visible()?e.onshow:e.onhide;n&&n(MH(o))})})])})})),slotBehaviours:xk([oi(function(t){return zH.hideAllSlots(t)})])};var o,i})},HH=$n("FixSizeEvent"),VH=$n("AutoSizeEvent"),EH={setSidebar:function(t,e){wm.getCurrent(t).each(function(t){return ug.set(t,[TH(e)])})},toggleSidebar:function(t,n){wm.getCurrent(t).each(function(e){wm.getCurrent(e).each(function(t){Bv.hasGrown(e)?zH.isShowing(t,n)?Bv.shrink(e):(zH.hideAllSlots(t),zH.showSlot(t,n)):(zH.hideAllSlots(t),zH.showSlot(t,n),Bv.grow(e))})})},whichSidebar:function(t){return wm.getCurrent(t).bind(function(t){return Bv.isGrowing(t)||Bv.hasGrown(t)?wm.getCurrent(t).bind(function(e){return R(zH.getSlotNames(e),function(t){return zH.isShowing(e,t)})}):j.none()})},renderSidebar:function(t){return{uid:t.uid,dom:{tag:"div",classes:["tox-sidebar"]},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:bi([_m.config({}),Ha.config({}),Bv.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:function(t){wm.getCurrent(t).each(zH.hideAllSlots),Kn(t,VH)},onGrown:function(t){Kn(t,VH)},onStartGrow:function(t){Jn(t,HH,{width:Ia(t.element(),"width").getOr("")})},onStartShrink:function(t){Jn(t,HH,{width:lf(t.element())+"px"})}}),ug.config({}),wm.config({find:function(t){var e=ug.contents(t);return K(e)}})])}],behaviours:bi([qC(0),bm("sidebar-sliding-events",[Yr(HH,function(t,e){Ba(t.element(),"width",e.event().width())}),Yr(VH,function(t,e){Fa(t.element(),"width")})])])}}},AH=bH.optional({factory:yH,name:"menubar",schema:[br("dom"),br("getSink")]}),BH=bH.optional({factory:{sketch:function(t){return YM({uid:t.uid,onEscape:function(){return t.onEscape(),j.some(!0)},cyclicKeying:!1,initGroups:[]})}},name:"toolbar",schema:[br("dom"),br("onEscape")]}),DH=bH.optional({name:"socket",schema:[br("dom")]}),_H=bH.optional({factory:{sketch:EH.renderSidebar},name:"sidebar",schema:[br("dom")]}),RH=gl({name:"OuterContainer",factory:function(n,t,e){var o={getSocket:function(t){return vH.getPart(t,n,"socket")},setSidebar:function(t,e){vH.getPart(t,n,"sidebar").each(function(t){return EH.setSidebar(t,e)})},toggleSidebar:function(t,e){vH.getPart(t,n,"sidebar").each(function(t){return EH.toggleSidebar(t,e)})},whichSidebar:function(t){return vH.getPart(t,n,"sidebar").bind(EH.whichSidebar).getOrNull()},getToolbar:function(t){return vH.getPart(t,n,"toolbar")},setToolbar:function(t,e){vH.getPart(t,n,"toolbar").each(function(t){iv.setGroups(t,e)})},focusToolbar:function(t){vH.getPart(t,n,"toolbar").each(function(t){Kc.focusIn(t)})},setMenubar:function(t,e){vH.getPart(t,n,"menubar").each(function(t){yH.setMenus(t,e)})},focusMenubar:function(t){vH.getPart(t,n,"menubar").each(function(t){yH.focus(t)})}};return{uid:n.uid,dom:n.dom,components:t,apis:o,behaviours:n.behaviours}},configFields:[br("dom"),br("behaviours")],partFields:[AH,BH,DH,_H],apis:{getSocket:function(t,e){return t.getSocket(e)},setSidebar:function(t,e,n){t.setSidebar(e,n)},toggleSidebar:function(t,e,n){t.toggleSidebar(e,n)},whichSidebar:function(t,e){return t.whichSidebar(e)},getToolbar:function(t,e){return t.getToolbar(e)},setToolbar:function(t,e,n){var o=E(n,function(t){return qM({items:t})});t.setToolbar(e,o)},setMenubar:function(t,e,n){t.setMenubar(e,n)},focusMenubar:function(t,e){t.focusMenubar(e)},focusToolbar:function(t,e){t.focusToolbar(e)}}}),IH=function(t){return t.fire("SkinLoaded")},FH=function(t){return t.fire("ResizeEditor")},LH=function(t){var e=function(){t._skinLoaded=!0,IH(t)};return function(){t.initialized?e():t.on("init",e)}},PH=function(t,e){var n,o=function(t){var e=t.settings,n=e.skin,o=e.skin_url;if(!1!==n){var r=n||"oxide";o=o?t.documentBaseURI.toAbsolute(o):Gb.baseURL+"/skins/"+r}return o}(e);o&&(n=o+"/skin.min.css",e.contentCSS.push(o+(t?"/content.inline":"/content")+".min.css")),0==(!1===e.settings.skin)&&n?ji.DOM.styleSheetLoader.load(n,LH(e)):LH(e)()},jH=f(PH,!1),NH=f(PH,!0),UH={render:function(n,o,t,e,r){var i,a;jH(n),i=je.fromDom(r.targetNode),a=o.mothership,ho(i,a,mn),mo(oo(),o.uiMothership),n.on("init",function(){RH.setToolbar(o.outerContainer,hH(n,t,{backstage:e})),RH.setMenubar(o.outerContainer,lH(n,t,e)),RH.setSidebar(o.outerContainer,n.sidebars||[])});var u=RH.getSocket(o.outerContainer).getOrDie("Could not find expected socket element");return n.addCommand("ToggleSidebar",function(t,e){RH.toggleSidebar(o.outerContainer,e),n.fire("ToggleSidebar")}),n.addQueryValueHandler("ToggleSidebar",function(){return RH.whichSidebar(o.outerContainer)}),{iframeContainer:u.element().dom(),editorContainer:o.outerContainer.element().dom()}},getBehaviours:function(t){return[]}},WH=function(n,e){return sn(n).orThunk(function(){var t=je.fromTag("span");dn(n,t);var e=sn(t);return bn(t),e}).map(function(t){return oy(t).translate(-e.left(),-e.top())}).getOrThunk(function(){return Ql(0,0)})},GH=mt([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),XH=function(e){return function(t){return t.translate(-e.left(),-e.top())}},$H=function(e){return function(t){return t.translate(e.left(),e.top())}},qH=function(n){return function(t,e){return _(n,function(t,e){return e(t)},Ql(t,e))}},YH=function(t,e,n){return t.fold(qH([$H(n),XH(e)]),qH([XH(e)]),qH([]))},KH=function(t,e,n){return t.fold(qH([$H(n)]),qH([]),qH([$H(e)]))},JH=function(t,e,n){return t.fold(qH([]),qH([XH(n)]),qH([$H(e),XH(n)]))},QH=function(t,e,n){return t.fold(function(t,e){return{position:"absolute",left:t+"px",top:e+"px"}},function(t,e){return{position:"absolute",left:t-n.left()+"px",top:e-n.top()+"px"}},function(t,e){return{position:"fixed",left:t+"px",top:e+"px"}})},ZH=GH.offset,tV=GH.absolute,eV=GH.fixed,nV=function(t,e){Hi(t.element(),e.transitionClass),Vi(t.element(),e.fadeOutClass),Hi(t.element(),e.fadeInClass)},oV=function(t,e){Hi(t.element(),e.transitionClass),Vi(t.element(),e.fadeInClass),Hi(t.element(),e.fadeOutClass)},rV=function(t,e){return t.y()>=e.y()&&t.bottom()<=e.bottom()},iV=function(t,e){return Vn(t,e)?j.some(parseInt(Hn(t,e),10)):j.none()},aV=function(o,r,i){return(a=o,t=r,e=a.element(),iV(e,t.leftAttr).bind(function(o){return iV(e,t.topAttr).map(function(t){var e=lf(a.element()),n=Na(a.element());return yy(o,t,e,n)})})).bind(function(t){return rV(t,i)?(e=r,n=o.element(),En(n,e.leftAttr),En(n,e.topAttr),j.some(tV(t.x(),t.y()))):j.none();var e,n});var a,t,e},uV=function(t,e,n,o,r){var i=oy(t.element()),a=yy(i.left(),i.top(),lf(t.element()),Na(t.element()));if(rV(a,n))return j.none();u=t,c=e,s=i.left(),l=i.top(),f=u.element(),Mn(f,c.leftAttr,s),Mn(f,c.topAttr,l);var u,c,s,l,f,d=tV(i.left(),i.top()),m=YH(d,o,r),h=tV(n.x(),n.y()),g=YH(h,o,r),p=a.y()<=n.y()?g.top():g.top()+n.height()-a.height();return j.some(eV(m.left(),p))},cV=function(i,t,e){var a=t.lazyViewport(i);t.contextual.each(function(r){r.lazyContext(i).each(function(t){var e,n,o=xy(t);n=a,((e=o).y()<n.bottom()&&e.bottom()>n.y()?nV:oV)(i,r)})});var n,o,r,u,c,s=an(i.element()),l=iy(s),f=WH(i.element(),l);(n=i,o=t,r=a,u=l,c=f,Ia(n.element(),"position").is("fixed")?aV(n,o,r):uV(n,o,r,u,c)).each(function(t){var e=QH(t,0,f);Da(i.element(),e)})},sV=Object.freeze({refresh:cV}),lV=Object.freeze({events:function(o,t){return Xr([Yr(Wt(),function(e,n){o.contextual.each(function(t){rn(e.element(),n.event().target())&&(Vi(e.element(),t.transitionClass),n.stop())})}),Yr(Ae(),function(t,e){cV(t,o)})])}}),fV=[Tr("contextual",[br("fadeInClass"),br("fadeOutClass"),br("transitionClass"),br("lazyContext")]),Vr("lazyViewport",function(t){var e=iy();return yy(e.left(),e.top(),window.innerWidth,window.innerHeight)}),br("leftAttr"),br("topAttr")],dV=xi({fields:fV,name:"docking",active:lV,apis:sV}),mV={render:function(t,e,n,o,r){var i,a=ji.DOM;NH(t);var u=function(){Da(i.element(),{position:"absolute",top:oy(je.fromDom(t.getBody())).top()-Na(i.element())+"px",left:oy(je.fromDom(t.getBody())).left()+"px"})},c=function(){Ba(e.outerContainer.element(),"display","flex"),a.addClass(t.getBody(),"mce-edit-focus"),u(),dV.refresh(i)},s=function(){e.outerContainer&&(Ba(e.outerContainer.element(),"display","none"),a.removeClass(t.getBody(),"mce-edit-focus"))};return t.on("focus",function(){i?c():(i=e.outerContainer,mo(oo(),e.mothership),mo(oo(),e.uiMothership),RH.setToolbar(e.outerContainer,hH(t,n,{backstage:o})),RH.setMenubar(e.outerContainer,lH(t,n,o)),u(),c(),t.on("nodeChange ResizeWindow",u),t.on("activate",c),t.on("deactivate",s),t.nodeChanged())}),t.on("blur hide",s),{editorContainer:e.outerContainer.element().dom()}},getBehaviours:function(e){return[dV.config({leftAttr:"data-dock-left",topAttr:"data-dock-top",contextual:{lazyContext:function(t){return j.from(e).map(function(t){return je.fromDom(t.getBody())})},fadeInClass:"tox-toolbar-dock-fadein",fadeOutClass:"tox-toolbar-dock-fadeout",transitionClass:"tox-toolbar-dock-transition"}}),Ha.config({})]}},hV=function(t,e){return{anchor:"makeshift",x:t,y:e}},gV=function(t,e){var n,o,r,i=ji.DOM.getPos(t);return n=e,o=i.x,r=i.y,hV(n.x+o,n.y+r)},pV=function(t,e){return"contextmenu"===e.type?t.inline?hV((o=e).pageX,o.pageY):gV(t.getContentAreaContainer(),hV((n=e).clientX,n.clientY)):vV(t);var n,o},vV=function(t){return{anchor:"selection",root:je.fromDom(t.selection.getNode())}},bV=function(t){return t.settings.contextmenu_never_use_native||!1},yV=function(t){var e,n=t.getParam("contextmenu","link image imagetools table spellchecker");return"string"==typeof(e=n)?e.split(/[ ,]/):e},xV={type:"separator"},wV=function(t){switch(t.type){case"separator":return xV;case"submenu":return{type:"menuitem",text:t.text,icon:t.icon,getSubmenuItems:function(){return E(t.getSubmenuItems(),wV)}};default:return{type:"menuitem",text:t.text,icon:t.icon,onAction:(n=t.onAction,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return n()})}}var n},kV=function(l,t,f){var d=Fh(rw.sketch({dom:{tag:"div"},lazySink:t}));l.on("contextmenu",function(t){if(e=l,!t.ctrlKey||bV(e)){var e,n,o=2!==t.button||t.target===l.getBody(),r=o?(n=l,{anchor:"node",node:j.some(je.fromDom(n.selection.getNode())),root:je.fromDom(n.getBody())}):pV(l,t),i=l.ui.registry.getAll(),a=yV(l),u=o?l.selection.getStart(!0):t.target,c=function s(r,n,t,i){var e=W(t,function(t){if(r.hasOwnProperty(t)){var e=r[t].update(i);if(0<e.length){var n=E(e,function(t){return x(t)?t:wV(t)}),o=["|"];return o.concat(n).concat(o)}return[]}return[t]}),o=_(e,function(t,e){return x(e)?n.hasOwnProperty(e)?t.concat([n[e]]):"|"===e&&0<t.length&&"separator"!==t[t.length-1].type?t.concat([xV]):t:t.concat([e])},[]);return 0<o.length&&"separator"===o[o.length-1].type&&o.pop(),o}(i.contextMenus,i.menuItems,a,u);0<c.length&&(t.preventDefault(),rw.showMenuAt(d,r,{menu:{markers:kk("normal")},data:_S(c,dw.CLOSE_ON_EXECUTE,f.providers)}))}})},SV=function(t){return/^[0-9\.]+(|px)$/i.test(""+t)?j.some(parseInt(t,10)):j.none()},CV=function(t){return z(t)?t+"px":t},OV="data-initial-z-index",zV=function(t,e){var n;t.getSystem().addToGui(e),cn((n=e).element()).each(function(e){Ia(e,"z-index").each(function(t){Mn(e,OV,t)}),Ba(e,"z-index",_a(n.element(),"z-index"))})},MV=function(t){cn(t.element()).each(function(t){var e=Hn(t,OV);Vn(t,OV)?Ba(t,"z-index",e):Fa(t,"z-index"),En(t,OV)}),t.getSystem().removeFromGui(t)},TV=function(t,e,n,o){return(r=t,i=e,a=r.element(),u=parseInt(Hn(a,i.leftAttr),10),c=parseInt(Hn(a,i.topAttr),10),isNaN(u)||isNaN(c)?j.none():j.some(Ql(u,c))).fold(function(){return n},function(t){return eV(t.left()+o.left(),t.top()+o.top())});var r,i,a,u,c},HV=function(t,e,n,o,r,i){var a,u,c,s=TV(t,e,n,o),l=EV(t,e,s,r,i),f=YH(s,r,i);return a=e,u=f,c=t.element(),Mn(c,a.leftAttr,u.left()+"px"),Mn(c,a.topAttr,u.top()+"px"),l.fold(function(){return{coord:eV(f.left(),f.top()),extra:j.none()}},function(t){return{coord:t.output(),extra:t.extra()}})},VV=function(t,e){var n,o;n=e,o=t.element(),En(o,n.leftAttr),En(o,n.topAttr)},EV=function(t,e,g,p,v){var n=e.getSnapPoints(t);return Tt(n,function(t){var e,n,o,r,i,a,u,c,s,l,f,d,m,h=t.sensor();return e=g,n=h,o=t.range().left(),r=t.range().top(),u=KH(e,i=p,a=v),c=KH(n,i,a),Math.abs(u.left()-c.left())<=o&&Math.abs(u.top()-c.top())<=r?j.some({output:U((s=t.output(),l=g,f=p,d=v,m=function(o,r){return function(t,e){var n=o(l,f,d);return r(t.getOr(n.left()),e.getOr(n.top()))}},s.fold(m(JH,GH.offset),m(KH,GH.absolute),m(YH,GH.fixed)))),extra:t.extra}):j.none()})},AV=function(n,t,i,a,u,c){return t.fold(function(){var t,n,o,e=(t=i,n=c.left(),o=c.top(),t.fold(function(t,e){return GH.offset(t+n,e+o)},function(t,e){return GH.absolute(t+n,e+o)},function(t,e){return GH.fixed(t+n,e+o)})),r=YH(e,a,u);return eV(r.left(),r.top())},function(e){var t=HV(n,e,i,c,a,u);return t.extra.each(function(t){e.onSensor(n,t)}),t.coord})},BV=function(t,e,n){var o,r=e.getTarget(t.element());if(e.repositionTarget){var i=an(t.element()),a=iy(i),u=WH(r,a),c=Ia(o=r,"left").bind(function(n){return Ia(o,"top").bind(function(e){return Ia(o,"position").map(function(t){return("fixed"===t?eV:ZH)(parseInt(n,10),parseInt(e,10))})})}).getOrThunk(function(){var t=oy(o);return tV(t.left(),t.top())}),s=AV(t,e.snaps,c,a,u,n),l=QH(s,0,u);Da(r,l)}e.onDrag(t,r,n)},DV=Tr("snaps",[br("getSnapPoints"),Qi("onSensor"),br("leftAttr"),br("topAttr"),Vr("lazyViewport",function(){var t=iy();return{x:t.left,y:t.top,width:U(window.innerWidth),height:U(window.innerHeight),bottom:U(t.top()+window.innerHeight),right:U(t.left()+window.innerWidth)}})]),_V=Object.freeze({getData:function(t){return j.from(Ql(t.x(),t.y()))},getDelta:function(t,e){return Ql(e.left()-t.left(),e.top()-t.top())}}),RV=[Vr("useFixed",!1),br("blockerClass"),Vr("getTarget",b),Vr("onDrag",P),Vr("repositionTarget",!0),Qi("onDrop"),DV,na("dragger",{handlers:function(u,c){return Xr([Yr(At(),function(e,t){if(0===t.event().raw().button){t.stop();var n,o={drop:function(){i()},delayDrop:function(){a.schedule()},forceDrop:function(){i()},move:function(t){a.cancel(),c.update(_V,t).each(function(t){BV(e,u,t)})}},r=e.getSystem().build(Cm.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[u.blockerClass]},events:(n=o,Xr([Yr(At(),n.forceDrop),Yr(_t(),n.drop),Yr(Bt(),function(t,e){n.move(e.event())}),Yr(Dt(),n.delayDrop)]))})),i=function(){MV(r),u.snaps.each(function(t){VV(e,t)});var t=u.getTarget(e.element());u.onDrop(e,t)},a=Jg(i,200);c.reset(),zV(e,r)}})])}})],IV=Object.freeze({getData:function(t){var e,n=t.raw().touches;return 1===n.length?(e=n[0],j.some(Ql(e.clientX,e.clientY))):j.none()},getDelta:function(t,e){return Ql(e.left()-t.left(),e.top()-t.top())}}),FV=RV,LV=[Vr("useFixed",!1),Vr("getTarget",b),Vr("onDrag",P),Vr("repositionTarget",!0),Vr("onDrop",P),DV,na("dragger",{handlers:function(o,r){return Xr([ei(Ht()),Yr(Vt(),function(e,t){t.stop(),r.update(IV,t.event()).each(function(t){BV(e,o,t)})}),Yr(Et(),function(e,t){o.snaps.each(function(t){VV(e,t)});var n=o.getTarget(e.element());r.reset(),o.onDrop(e,n)})])}})],PV=Object.freeze({mouse:FV,touch:LV}),jV=Object.freeze({init:function(){var i=j.none(),t=U({});return vi({readState:t,reset:function(){i=j.none()},update:function(r,t){return r.getData(t).bind(function(t){return e=r,n=t,o=i.map(function(t){return e.getDelta(t,n)}),i=j.some(n),o;var e,n,o})}})}}),NV=ki({branchKey:"mode",branches:PV,name:"dragging",active:{events:function(t,e){return t.dragger.handlers(t,e)}},extra:{snap:Ge(["sensor","range","output"],["extra"])},state:jV});(KT=YT||(YT={}))[KT.None=0]="None",KT[KT.Both=1]="Both",KT[KT.Vertical=2]="Vertical";var UV,WV,GV=function(t,e,n,o){var r=t+e,i=n.filter(function(t){return r<t}),a=o.filter(function(t){return t<r});return i.or(a).getOr(r)},XV=function(t,e,n,o,r){var i,a,u={};return u.height=GV(o,e.top(),Nk(t),(i=t,j.from(i.getParam("max_height")).filter(z))),n===YT.Both&&(u.width=GV(r,e.left(),jk(t),(a=t,j.from(a.getParam("max_width")).filter(z)))),u},$V=function(t){if(1===t.nodeType){if("BR"===t.nodeName||t.getAttribute("data-mce-bogus"))return!0;if("bookmark"===t.getAttribute("data-mce-type"))return!0}return!1},qV=function(i,a){return a.delimiter||(a.delimiter="\xbb"),{dom:{tag:"div",classes:["tox-statusbar__path"]},behaviours:bi([Kc.config({mode:"flow",selector:"div[role=button]"}),_m.config({}),ug.config({}),bm("elementPathEvents",[oi(function(r,t){i.shortcuts.add("alt+F11","focus statusbar elementpath",function(){return Kc.focusIn(r)}),i.on("nodeChange",function(t){var e,o,n=function(t){for(var e=[],n=t.length;0<n--;){var o=t[n];if(1===o.nodeType&&!$V(o)){var r=i.fire("ResolveName",{name:o.nodeName.toLowerCase(),target:o});if(r.isDefaultPrevented()||e.push({name:r.name,element:o}),r.isPropagationStopped())break}}return e}(t.parents);0<n.length&&ug.set(r,(e=E(n||[],function(e,t){return vl.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{role:"button","data-index":t,"tab-index":-1,"aria-level":t+1},innerHtml:e.name},action:function(t){i.focus(),i.selection.select(e.element),i.nodeChanged()}})}),o={dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0},innerHtml:" "+a.delimiter+" "}},_(e.slice(1),function(t,e){var n=t;return n.push(o),n.push(e),n},[e[0]])))})})])]),components:[]}},YV=function(s,t){var e,n,o,r,i,a,u,c,l,f=function(c){return{dom:{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{title:t.translate("Resize")},innerHtml:aw("icon-resize-handle",function(){return""})},behaviours:bi([NV.config({mode:"mouse",repositionTarget:!1,onDrag:function(t,e,n){var o,r,i,a,u;o=s,r=n,i=c,a=je.fromDom(o.getContainer()),u=XV(o,r,i,o.getContainer().scrollHeight,lf(a)),et(u,function(t,e){return Ba(a,e,t+"px")}),FH(o)},blockerClass:"tox-blocker"})])}};return{dom:{tag:"div",classes:["tox-statusbar"]},components:(l=[],s.getParam("elementpath",!0,"boolean")&&l.push(qV(s,{})),de(s.settings.plugins,"wordcount")&&l.push((a=s,u=t,c=function(t,e,n){return ug.set(t,[_h(u.translate(["{0} "+n,e[n]]))])},{dom:{tag:"span",classes:["tox-statusbar__wordcount"]},components:[],behaviours:bi([ug.config({}),Kl.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),bm("wordcount-events",[Yr(Ut(),function(t){var e=Kl.getValue(t),n="words"===e.mode?"characters":"words";Kl.setValue(t,{mode:n,count:e.count}),c(t,e.count,n)}),oi(function(n){a.on("wordCountUpdate",function(t){var e=Kl.getValue(n).mode;Kl.setValue(n,{mode:e,count:t.wordCount}),c(n,t.wordCount,e)})})])])})),s.getParam("branding",!0,"boolean")&&l.push({dom:{tag:"span",classes:["tox-statusbar__branding"],styles:{"float":"right"},innerHtml:Aw.translate(["Powered by {0}",'<a href="https://www.tiny.cloud/?utm_campaign=editor_referral&amp;utm_medium=poweredby&amp;utm_source=tinymce&amp;utm_content=v5" rel="noopener" target="_blank" role="presentation" tabindex="-1">tinymce</a>'])}}),r=0<l.length?[{dom:{tag:"div",classes:["tox-statusbar__text-container"]},components:l}]:[],n=!de((e=s).settings.plugins,"autoresize"),i=!1===(o=e.getParam("resize",n))?YT.None:"both"===o?YT.Both:YT.Vertical,i!==YT.None&&r.push(f(i)),r)}},KV=undefined&&undefined.__assign||function(){return(KV=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},JV=function(s){var t=s.getParam("inline",!1,"boolean"),l=t?mV:UH,e=j.none(),n=Aw.isRtl()?{attributes:{dir:"rtl"}}:{},f=Fh({dom:KV({tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"]},n),behaviours:bi([Nx.config({useFixed:!1})])}),d=XM(f,s,function(){return e.bind(function(t){return RH.getToolbar(t)}).getOrDie("Could not find a toolbar element")}),m=function(){return dt.value(f)},o=RH.parts().menubar({dom:{tag:"div",classes:["tox-menubar"]},getSink:m,providers:{icons:function(){return s.ui.registry.getAll().icons},translate:Aw.translate},onEscape:function(){s.focus()}}),r=RH.parts().toolbar({dom:{tag:"div",classes:["tox-toolbar"]},onEscape:function(){s.focus()}}),i=RH.parts().socket({dom:{tag:"div",classes:["tox-edit-area"]}}),a=RH.parts().sidebar({dom:{tag:"div",classes:["tox-sidebar"]}}),u=s.getParam("statusbar",!0,"boolean")&&!t?j.some(YV(s,d.shared.providers)):j.none(),c={dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[i,a]},h=!1!==s.getParam("toolbar",!0,"boolean"),g=!1!==s.getParam("menubar",!0,"boolean"),p=N([g?[o]:[],h?[r]:[],t?[]:[c]]),v=N([[{dom:{tag:"div",classes:["tox-editor-container"]},components:p}],t?[]:u.toArray()]),b=Fh(RH.sketch({dom:KV({tag:"div",classes:["tox","tox-tinymce"].concat(t?["tox-tinymce-inline"]:[]),styles:{visibility:"hidden"}},n),components:v,behaviours:bi(l.getBehaviours(s).concat([Kc.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-sidebar--sliding-open, .tox-statusbar__path"})]))}));e=j.some(b),s.shortcuts.add("alt+F9","focus menubar",function(){RH.focusMenubar(b)}),s.shortcuts.add("alt+F10","focus toolbar",function(){RH.focusToolbar(b)});var y=Yv(b),x=Yv(f);pH(s,y,x);var w=function(t){var e,n,o,r=s.settings,i=ji.DOM;e=r.width||i.getStyle(t,"width")||"100%",n=(o=s).getParam("height",Math.max(o.getElement().offsetHeight,200),"number");var a=Nk(s),u=jk(s);return e=SV(e).bind(function(e){return u.map(function(t){return Math.max(e,t)})}).getOr(e),n=SV(n).bind(function(e){return a.map(function(t){return Math.max(e,t)})}).getOr(n),e&&Ba(b.element(),"width",CV(e)),!s.inline&&n&&Ba(b.element(),"height",CV(n)),n};return{mothership:y,uiMothership:x,backstage:d,renderUI:function(){kV(s,m,d.shared);var t=s.ui.registry.getAll(),e=t.buttons,n=t.menuItems,o=t.contextToolbars,r={menuItems:n,buttons:e,menus:s.settings.menu?nt(s.settings.menu,function(t){return vt(t,{items:t.items})}):{},menubar:s.settings.menubar,toolbar:s.settings.toolbar,sidebar:s.sidebars?s.sidebars:[]};gH(s,o,f,{backstage:d});var i=s.getElement(),a=w(i),u={mothership:y,uiMothership:x,outerContainer:b},c={targetNode:i,height:a};return l.render(s,u,r,d,c)},getUi:function(){return{channels:{broadcastAll:x.broadcast,broadcastOn:x.broadcastOn,register:function(){}}}}}},QV=function(t,e){return function(){t.execCommand("mceToggleFormat",!1,e)}},ZV=function(n){var t=[{type:"menuitem",text:"Left",icon:"align-left",onAction:QV(n,"alignleft")},{type:"menuitem",text:"Center",icon:"align-center",onAction:QV(n,"aligncenter")},{type:"menuitem",text:"Right",icon:"align-right",onAction:QV(n,"alignright")},{type:"menuitem",text:"Justify",icon:"align-justify",onAction:QV(n,"alignjustify")}];n.ui.registry.addMenuItem("align",{text:"Align",icon:"align-left",hasSubmenu:!0,getSubmenuItems:function(){return t}});var e=function(e){return function(t){n.formatter?n.formatter.formatChanged(e.name,t.setActive):n.on("init",function(){n.formatter.formatChanged(e.name,t.setActive)})}};mz.each([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],function(t){n.ui.registry.addToggleButton(t.name,{tooltip:t.text,onAction:function(){return n.execCommand(t.cmd)},icon:t.icon,onSetup:e(t)})});var o={name:"alignnone",text:"No alignment",cmd:"JustifyNone",icon:"align-justify"};n.ui.registry.addButton(o.name,{tooltip:o.text,onAction:function(){return n.execCommand(o.cmd)},icon:o.icon,onSetup:e(o)})},tE=function(t,e){return function(){t.execCommand("mceToggleFormat",!1,e)}},eE=function(i,a){return function(e){var t,n,o,r;return n=a,o=function(t){e.setActive(t)},r=function(t){o(t,n)},(t=i).formatter?t.formatter.formatChanged(n,r):t.on("init",function(){t.formatter.formatChanged(n,r)}),function(){}}},nE=function(t){var e,n,o;e=t,mz.each([{name:"bold",text:"Bold",icon:"bold"},{name:"italic",text:"Italic",icon:"italic"},{name:"underline",text:"Underline",icon:"underline"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],function(t){e.ui.registry.addToggleButton(t.name,{tooltip:t.text,icon:t.icon,onSetup:eE(e,t.name),onAction:tE(e,t.name)})}),n=t,mz.each([{name:"outdent",text:"Decrease indent",action:"Outdent",icon:"outdent"},{name:"indent",text:"Increase indent",action:"Indent",icon:"indent"},{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"copy",text:"Copy",action:"Copy",icon:"copy"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"help",text:"Help",action:"mceHelp",icon:"help"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"}],function(t){n.ui.registry.addButton(t.name,{tooltip:t.text,icon:t.icon,onAction:function(){return n.execCommand(t.action)}})}),o=t,mz.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],function(t){o.ui.registry.addToggleButton(t.name,{tooltip:t.text,icon:t.icon,onAction:function(){return o.execCommand(t.action)},onSetup:eE(o,t.name)})})},oE=function(t){var e;nE(t),e=t,mz.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through",shortcut:""},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript",shortcut:""},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript",shortcut:""},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting",shortcut:""},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document",shortcut:""},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A"}],function(t){e.ui.registry.addMenuItem(t.name,{text:t.text,icon:t.icon,shortcut:t.shortcut,onAction:function(){return e.execCommand(t.action)}})}),e.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onAction:tE(e,"code")})},rE=function(t,e,n){var o=function(){return!!e.undoManager&&e.undoManager[n]()},r=function(){t.setDisabled(e.readonly||!o())};return t.setDisabled(!o()),e.on("Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",r),function(){return e.off("Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",r)}},iE=function(t){var e,n;(e=t).ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:function(t){return rE(t,e,"hasUndo")},onAction:function(){return e.execCommand("undo")}}),e.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:function(t){return rE(t,e,"hasRedo")},onAction:function(){return e.execCommand("redo")}}),(n=t).ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",onSetup:function(t){return rE(t,n,"hasUndo")},onAction:function(){return n.execCommand("undo")}}),n.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",onSetup:function(t){return rE(t,n,"hasRedo")},onAction:function(){return n.execCommand("redo")}})},aE=function(t){var e,n;(e=t).ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:function(){return e.execCommand("mceToggleVisualAid")}}),(n=t).ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:function(t){return function(e,t){e.setActive(t.hasVisual);var n=function(t){e.setActive(t.hasVisual)};return t.on("VisualAid",n),function(){return t.off("VisualAid",n)}}(t,n)},onAction:function(){n.execCommand("mceToggleVisualAid")}})},uE=function(t){ZV(t),oE(t),iE(t),lC.register(t),aE(t)},cE=function(t,e){var n=j.from(Hn(t,"id")).fold(function(){var t=$n("dialog-label");return Mn(e,"id",t),t},b);Mn(t,"aria-labelledby",n)},sE=undefined&&undefined.__assign||function(){return(sE=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},lE=U([br("lazySink"),Or("dragBlockClass"),Vr("useTabstopAt",U(!0)),Vr("eventOrder",{}),Qc("modalBehaviours",[Kc]),Zi("onExecute"),ea("onEscape")]),fE={sketch:b},dE=U([Hs({name:"draghandle",overrides:function(t,e){return{behaviours:bi([NV.config({mode:"mouse",getTarget:function(t){return qa(t,'[role="dialog"]').getOr(t)},blockerClass:t.dragBlockClass.getOrDie(new Error("The drag blocker class was not specified for a dialog with a drag handle: \n"+Po(e,null,2)).message)})])}}}),Ms({schema:[br("dom")],name:"title"}),Ms({factory:fE,schema:[br("dom")],name:"close"}),Ms({factory:fE,schema:[br("dom")],name:"body"}),Ms({factory:fE,schema:[br("dom")],name:"footer"}),Ts({factory:{sketch:function(t,e){return sE({},t,{dom:e.dom,components:e.components})}},schema:[Vr("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),Vr("components",[])],name:"blocker"})]),mE=undefined&&undefined.__assign||function(){return(mE=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},hE=gl({name:"ModalDialog",configFields:lE(),partFields:dE(),factory:function(o,t,e,r){var u=$n("alloy.dialog.busy"),c=$n("alloy.dialog.idle"),s=bi([Kc.config({mode:"special",focusIn:j.some,onTab:function(){return j.some(!0)},onShiftTab:function(){return j.some(!0)}}),Ha.config({})]),n=$n("modal-events"),i=mE({},o.eventOrder,{"alloy.system.attached":[n].concat(o.eventOrder["alloy.system.attached"]||[])});return{uid:o.uid,dom:o.dom,components:t,apis:{show:function(i){var t=o.lazySink(i).getOrDie(),a=zt(j.none()),e=r.blocker(),n=t.getSystem().build(mE({},e,{components:e.components.concat([Lh(i)]),behaviours:bi([bm("dialog-blocker-events",[Yr(c,function(t,e){Vn(i.element(),"aria-busy")&&(En(i.element(),"aria-busy"),a.get().each(function(t){return ug.remove(i,t)}))}),Yr(u,function(t,e){Mn(i.element(),"aria-busy","true");var n=e.event().getBusySpec();a.get().each(function(t){ug.remove(i,t)});var o=n(i,s),r=t.getSystem().build(o);a.set(j.some(r)),ug.append(i,Lh(r)),r.hasConfigured(Kc)&&Kc.focusIn(r)})])])}));uo(t,n),Kc.focusIn(i)},hide:function(e){cn(e.element()).each(function(t){e.getSystem().getByDom(t).each(function(t){lo(t)})})},getBody:function(t){return Us(t,o,"body")},getFooter:function(t){return Us(t,o,"footer")},setIdle:function(t){Kn(t,c)},setBusy:function(t,e){Jn(t,u,{getBusySpec:e})}},eventOrder:i,domModification:{attributes:{role:"dialog"}},behaviours:ts(o.modalBehaviours,[ug.config({}),Kc.config({mode:"cyclic",onEnter:o.onExecute,onEscape:o.onEscape,useTabstopAt:o.useTabstopAt}),bm(n,[oi(function(t){cE(t.element(),Us(t,o,"title").element())})])])}},apis:{show:function(t,e){t.show(e)},hide:function(t,e){t.hide(e)},getBody:function(t,e){return t.getBody(e)},getFooter:function(t,e){return t.getFooter(e)},setBusy:function(t,e,n){t.setBusy(e,n)},setIdle:function(t,e){t.setIdle(e)}}}),gE=[xr("type"),xr("text"),er("level","level",bo(),ir(function(t){return T(["info","warn","error","success"],t)?dt.value(t):dt.error('Unsupported level: "'+t+'", choose one of "info", "warn", "error", "success".')})),xr("icon"),Vr("url","")],pE=[xr("type"),xr("text"),Dr("primary",!1),er("name","name",xo(function(){return $n("button-name")}),gr)],vE=[xr("type"),xr("name"),xr("label")],bE=["checked","unchecked","indeterminate"],yE=ir(function(t){return T(bE,t)?dt.value(t):dt.error('Checkbox data: can only be a string of either "'+bE.join('" | "')+'" ')}),xE=[xr("type"),xr("name"),Mr("label")],wE=xE,kE=gr,SE=xE,CE=gr,OE=xE.concat([Vr("flex",!1)]),zE=Ko(rr),ME=[xr("type"),(UV="columns",yr(UV,hr)),er("items","items",bo(),Ko(ir(function(t){return ur("Checking item of grid",qE,t).fold(function(t){return dt.error(lr(t))},function(t){return dt.value(t)})})))],TE=xE.concat([Dr("sandboxed",!0),Dr("flex",!1)]),HE=gr,VE=xE,EE=gr,AE=xE.concat([Sr("items",[xr("text"),xr("value")]),Ar("size",1)]),BE=gr,DE=xE.concat([Dr("constrain",!0)]),_E=Yo([xr("width"),xr("height")]),RE=xE.concat([Vr("flex",!1)]),IE=gr,FE=xE.concat([Vr("filetype","file")]),LE=Yo([xr("value"),Vr("meta",{})]),PE=xE.concat([xr("type"),Br("tag","textarea"),wr("init")]),jE=gr,NE=[xr("type"),xr("html")],UE=xE.concat([br("currentState")]),WE=xE.concat([Vr("columns",1)]),GE=(WV=[xr("value"),Mr("text"),Mr("icon")],Zo(WV)),XE=[xr("type"),xr("label"),er("items","items",bo(),Ko(ir(function(t){return ur("Checking item of label",qE,t).fold(function(t){return dt.error(lr(t))},function(t){return dt.value(t)})})))],$E=[xr("type"),Cr("header",gr),Cr("cells",Ko(gr))],qE=fr("type",{alertbanner:gE,button:pE,checkbox:vE,colorinput:wE,colorpicker:SE,dropzone:OE,grid:ME,iframe:TE,input:VE,selectbox:AE,sizeinput:DE,textarea:RE,urlinput:FE,customeditor:PE,htmlpanel:NE,imagetools:UE,collection:WE,label:XE,table:$E}),YE=[xr("type"),Cr("items",qE)],KE=[xr("title"),Cr("items",qE)],JE=[xr("type"),Sr("tabs",KE)],QE=Yo([xr("type"),er("name","name",xo(function(){return $n("button-name")}),gr),xr("text"),Br("align","end"),Dr("primary",!1),Dr("disabled",!1)]),ZE=Yo([xr("title"),yr("body",fr("type",{panel:YE,tabpanel:JE})),Br("size","normal"),Cr("buttons",QE),Vr("initialData",{}),_r("onAction",P),_r("onChange",P),_r("onSubmit",P),_r("onClose",P),_r("onCancel",P),Vr("onTabChange",P),Or("readyWhen")]),tA=function(t){return w(t)?[t].concat(W(it(t),tA)):S(t)?W(t,tA):[]},eA=function(t){return x(t.type)&&x(t.name)},nA={checkbox:yE,colorinput:kE,colorpicker:CE,dropzone:zE,input:EE,iframe:HE,sizeinput:_E,selectbox:BE,size:_E,textarea:IE,urlinput:LE,customeditor:jE,collection:GE},oA=function(t){var e=W(B(tA(t),eA),function(e){return(t=e,j.from(nA[t.type])).fold(function(){return[]},function(t){return[yr(e.name,t)]});var t});return Yo(e)},rA=function(t){return{internalDialog:cr(ur("dialog",ZE,t)),dataValidator:oA(t),initialData:t.initialData}},iA={open:function(t,e){var n=rA(e);return t(n.internalDialog,n.initialData,n.dataValidator)},redial:function(t){return rA(t)}},aA=$n("update-dialog"),uA=$n("update-title"),cA=$n("update-body"),sA=$n("update-footer"),lA=function(t){var n=[],o={};return et(t,function(t,e){t.fold(function(){n.push(e)},function(t){o[e]=t})}),0<n.length?dt.error(n):dt.value(o)},fA=hl({name:"TabButton",configFields:[Vr("uid",undefined),br("value"),er("dom","dom",wo(function(t){return{attributes:{role:"tab",id:$n("aria"),"aria-selected":"false"}}}),dr()),Or("action"),Vr("domModification",{}),Qc("tabButtonBehaviours",[Ha,Kc,Kl]),br("view")],factory:function(t,e){return{uid:t.uid,dom:t.dom,components:t.components,events:Ca(t.action),behaviours:ts(t.tabButtonBehaviours,[Ha.config({}),Kc.config({mode:"execution",useSpace:!0,useEnter:!0}),Kl.config({store:{mode:"memory",initialValue:t.value}})]),domModification:t.domModification}}}),dA=U([br("tabs"),br("dom"),Vr("clickToDismiss",!1),Qc("tabbarBehaviours",[yu,Kc]),Ki(["tabClass","selectedClass"])]),mA=Vs({factory:fA,name:"tabs",unit:"tab",overrides:function(o,t){var r=function(t,e){yu.dehighlight(t,e),Jn(t,Le(),{tabbar:t,button:e})},i=function(t,e){yu.highlight(t,e),Jn(t,Fe(),{tabbar:t,button:e})};return{action:function(t){var e=t.getSystem().getByUid(o.uid).getOrDie(),n=yu.isHighlighted(e,t);(n&&o.clickToDismiss?r:n?P:i)(e,t)},domModification:{classes:[o.markers.tabClass]}}}}),hA=U([mA]),gA=gl({name:"Tabbar",configFields:dA(),partFields:hA(),factory:function(t,e,n,o){return{uid:t.uid,dom:t.dom,components:e,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:ts(t.tabbarBehaviours,[yu.config({highlightClass:t.markers.selectedClass,itemClass:t.markers.tabClass,onHighlight:function(t,e){Mn(e.element(),"aria-selected","true")},onDehighlight:function(t,e){Mn(e.element(),"aria-selected","false")}}),Kc.config({mode:"flow",getInitial:function(t){return yu.getHighlighted(t).map(function(t){return t.element()})},selector:"."+t.markers.tabClass,executeOnMove:!0})])}}}),pA=hl({name:"Tabview",configFields:[Qc("tabviewBehaviours",[ug])],factory:function(t,e){return{uid:t.uid,dom:t.dom,behaviours:ts(t.tabviewBehaviours,[ug.config({})]),domModification:{attributes:{role:"tabpanel"}}}}}),vA=U([Vr("selectFirst",!0),Qi("onChangeTab"),Qi("onDismissTab"),Vr("tabs",[]),Qc("tabSectionBehaviours",[])]),bA=Ms({factory:gA,schema:[br("dom"),kr("markers",[br("tabClass"),br("selectedClass")])],name:"tabbar",defaults:function(t){return{tabs:t.tabs}}}),yA=Ms({factory:pA,name:"tabview"}),xA=U([bA,yA]),wA=gl({name:"TabSection",configFields:vA(),partFields:xA(),factory:function(i,t,e,n){var o=function(t,e){Ns(t,i,"tabbar").each(function(t){e(t).each(Qn)})};return{uid:i.uid,dom:i.dom,components:t,behaviours:Zc(i.tabSectionBehaviours),events:Xr(N([i.selectFirst?[oi(function(t,e){o(t,yu.getFirst)})]:[],[Yr(Fe(),function(t,e){var o,r,n=e.event().button();o=n,r=Kl.getValue(o),Ns(o,i,"tabview").each(function(n){R(i.tabs,function(t){return t.value===r}).each(function(t){var e=t.view();Mn(n.element(),"aria-labelledby",Hn(o.element(),"id")),ug.set(n,e),i.onChangeTab(n,o,e)})})}),Yr(Le(),function(t,e){var n=e.event().button();i.onDismissTab(t,n)})]])),apis:{getViewItems:function(t){return Ns(t,i,"tabview").map(function(t){return ug.contents(t)}).getOr([])},showTab:function(t,n){o(t,function(e){var t=yu.getCandidates(e);return R(t,function(t){return Kl.getValue(t)===n}).filter(function(t){return!yu.isHighlighted(e,t)})})}}}},apis:{getViewItems:function(t,e){return t.getViewItems(e)},showTab:function(t,e,n){t.showTab(e,n)}}}),kA=function(t){return K((e=t,n=function(t,e){return e<t?-1:t<e?1:0},(o=X.call(e,0)).sort(n),o));var e,n,o},SA=function(a){return{smartTabHeight:{extraEvents:[oi(function(t){Ya(t.element(),'[role="tabpanel"]').each(function(n){var e;Ba(n,"visibility","hidden"),t.getSystem().getByDom(n).toOption().bind(function(t){var o,r,i,e=(r=n,i=t,E(o=a,function(t,e){ug.set(i,o[e].view());var n=r.dom().getBoundingClientRect();return ug.set(i,[]),n.height}));return kA(e)}).each(function(t){Ba(n,"height",t+"px")}),Fa(n,"visibility"),e=t,K(a).each(function(t){return wA.showTab(e,t.value)})})}),Yr(Jk,function(t,e){Ya(t.element(),'[role="tabpanel"]').each(function(e){Ba(e,"visibility","hidden");var t=Ia(e,"height").map(function(t){return parseInt(t,10)});Fa(e,"height");var n=e.dom().getBoundingClientRect().height;t.forall(function(t){return t<n})?Ba(e,"height",n+"px"):t.each(function(t){Ba(e,"height",t+"px")}),Fa(e,"visibility")})})],selectFirst:!1},naiveTabHeight:{extraEvents:[],selectFirst:!0}}},CA="send-data-to-section",OA="send-data-to-view",zA=function(t,d){return{dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[],behaviours:bi([qC(0),bT.config({channel:cA,updateState:function(t,e){return j.some({isTabPanel:function(){return"tabpanel"===e.body.type}})},renderComponents:function(t){switch(t.body.type){case"tabpanel":return[(r={tabs:t.body.tabs},i=d,a=zt({}),u=function(t){var e=Kl.getValue(t),n=lA(e).getOr({}),o=a.get(),r=pt(o,n);a.set(r)},c=function(t){var e=a.get();Kl.setValue(t,e)},s=zt(null),l=E(r.tabs,function(t){return{value:t.title,dom:{tag:"div",classes:["tox-dialog__body-nav-item"],innerHtml:i.shared.providers.translate(t.title)},view:function(){return[Zm.sketch(function(e){return{dom:{tag:"div",classes:["tox-form"]},components:E(t.items,function(t){return Jz(e,t,i)}),formBehaviours:bi([Kc.config({mode:"acyclic",useTabstopAt:k(sO)}),bm("TabView.form.events",[oi(c),ri(u)]),aa.config({channels:St([{key:CA,value:{onReceive:u}},{key:OA,value:{onReceive:c}}])})])}})]}}}),f=SA(l).smartTabHeight,wA.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:function(t,e,n){var o=Kl.getValue(e);Jn(t,Kk,{title:o,oldTitle:s.get()}),s.set(o)},tabs:l,components:[wA.parts().tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[gA.parts().tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:bi([_m.config({})])}),wA.parts().tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:f.selectFirst,tabSectionBehaviours:bi([bm("tabpanel",f.extraEvents),Kc.config({mode:"acyclic"}),wm.config({find:function(t){return K(wA.getViewItems(t))}}),Kl.config({store:{mode:"manual",getValue:function(t){return t.getSystem().broadcastOn([CA],{}),a.get()},setValue:function(t,e){a.set(e),t.getSystem().broadcastOn([OA],{})}}})])}))];default:return[(n={items:t.body.items},o=d,e=Ud(Zm.sketch(function(e){return{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:E(n.items,function(t){return Jz(e,t,o)})}})),{dom:{tag:"div",classes:["tox-dialog__body"]},components:[e.asSpec()],behaviours:bi([Kc.config({mode:"acyclic",useTabstopAt:k(sO)}),$C(e),tO(e,{postprocess:function(t){return lA(t).fold(function(t){return console.error(t),{}},function(t){return t})}})])})]}var n,o,e,r,i,a,u,c,s,l,f},initialData:t})])}},MA=function(o,n){var t=function(t,r){return Yr(t,function(n,o){e(n,function(t,e){r(t,o.event(),n)})})},e=function(e,n){bT.getState(e).get().each(function(t){n(t.internalDialog,e)})};return[Zr(It(),lO),t($k,function(t){return t.onSubmit(o())}),t(Uk,function(t,e){t.onChange(o(),{name:e.name()})}),t(Xk,function(t,e){t.onAction(o(),{name:e.name(),value:e.value()})}),t(Kk,function(t,e){t.onTabChange(o(),e.title())}),t(Wk,function(t){n.onClose(),t.onClose()}),t(Gk,function(t,e,n){t.onCancel(o()),Kn(n,Wk)}),ri(function(t){var e=o();Kl.setValue(t,e.getData())}),Yr(Yk,function(t,e){return n.onUnblock()}),Yr(qk,function(t,e){return n.onBlock(e.event())})]},TA=function(t,e){var n=function(t,e){for(var n=[],o=[],r=0,i=t.length;r<i;r++){var a=t[r];(e(a,r,t)?n:o).push(a)}return{pass:n,fail:o}}(e.map(function(t){return t.footerButtons}).getOr([]),function(t){return"start"===t.align}),o=function(t,e){return Cm.sketch({dom:{tag:"div",classes:["tox-dialog__footer-"+t]},components:E(e,function(t){return t.memento.asSpec()})})};return[o("start",n.pass),o("end",n.fail)]},HA=function(t,i){return{dom:xl('<div class="tox-dialog__footer"></div>'),components:[],behaviours:bi([bT.config({channel:sA,initialData:t,updateState:function(t,e){var r=E(e.buttons,function(t){var e,n,o=Ud((n=i,qO(e=t,e.type,n)));return{name:t.name,align:t.align,memento:o}});return j.some({lookupByName:function(t,e){return n=t,o=e,R(r,function(t){return t.name===o}).bind(function(t){return t.memento.getOpt(n)});var n,o},footerButtons:r})},renderComponents:TA})])}},VA=undefined&&undefined.__assign||function(){return(VA=Object.assign||function(t){for(var e,n=1,o=arguments.length;n<o;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},EA=function(t){return vl.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":t.translate("Close"),title:t.translate("Close")}},components:[{dom:{tag:"div",classes:["tox-icon"],innerHtml:'<svg width="24" height="24" xmlns="http://www.w3.org/2000/svg"><path d="M17.953 7.453L13.422 12l4.531 4.547-1.406 1.406L12 13.422l-4.547 4.531-1.406-1.406L10.578 12 6.047 7.453l1.406-1.406L12 10.578l4.547-4.531z" fill-rule="evenodd"></path></svg>'}}],action:function(t){Kn(t,Gk)}})},AA=function(t,e,n){var o=function(t){return[_h(n.translate(t.title))]};return{dom:{tag:"div",classes:["tox-dialog__title"],attributes:VA({},e.map(function(t){return{id:t}}).getOr({}))},components:o(t),behaviours:bi([bT.config({channel:uA,renderComponents:o})])}},BA=function(e,n){if(e.getRoot().getSystem().isConnected()){var o=wm.getCurrent(e.getFormWrapper()).getOr(e.getFormWrapper());return Zm.getField(o,n).fold(function(){var t=e.getFooter();return bT.getState(t).get().bind(function(t){return t.lookupByName(o,n)})},function(t){return j.some(t)})}return j.none()},DA=function(c,o){var t=function(t){var e=c.getRoot();e.getSystem().isConnected()&&t(e)},s={getData:function(){var t=c.getRoot(),e=t.getSystem().isConnected()?c.getFormWrapper():t;return Kl.getValue(e)},setData:function(u){t(function(t){var e,n,o=s.getData(),r=vt(o,u),i=(e=r,n=c.getRoot(),bT.getState(n).get().map(function(t){return cr(ur("data",t.dataValidator,e))}).getOr(e)),a=c.getFormWrapper();Kl.setValue(a,i)})},disable:function(t){BA(c,t).each(Ym.disable)},enable:function(t){BA(c,t).each(Ym.enable)},focus:function(t){BA(c,t).each(Ha.focus)},block:function(e){t(function(t){Jn(t,qk,{message:e})})},unblock:function(){t(function(t){Kn(t,Yk)})},showTab:function(n){t(function(t){var e=c.getBody();bT.getState(e).get().exists(function(t){return t.isTabPanel()})&&wm.getCurrent(e).each(function(t){wA.showTab(t,n)})})},redial:function(n){t(function(t){var e=o(n);t.getSystem().broadcastOn([aA],e),t.getSystem().broadcastOn([uA],e.internalDialog),t.getSystem().broadcastOn([cA],e.internalDialog),t.getSystem().broadcastOn([sA],e.internalDialog),s.setData(e.initialData)})},close:function(){t(function(t){Kn(t,Wk)})}};return s},_A=function(t,e,n){var o,r,i,a,u,c,s,l,f,d,m,h=(r={title:n.shared.providers.translate(t.internalDialog.title),draggable:!0},i=n.shared.providers,a=hE.parts().title(AA(r,j.none(),i)),u=hE.parts().draghandle({dom:xl('<div class="tox-dialog__draghandle"></div>')}),c=hE.parts().close(EA(i)),s=[a].concat(r.draggable?[u]:[]).concat([c]),Cm.sketch({dom:xl('<div class="tox-dialog__header"></div>'),components:s})),g=(l={body:t.internalDialog.body},f=n,hE.parts().body(zA(l,f))),p=(d={buttons:t.internalDialog.buttons},m=n.shared.providers,hE.parts().footer(HA(d,m))),v=MA(function(){return x},{onClose:function(){return e.closeWindow()},onBlock:function(n){hE.setBusy(y,function(t,e){return{dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":n.message()},styles:{left:"0px",right:"0px",bottom:"0px",top:"0px",position:"absolute"}},behaviours:e,components:[{dom:xl('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}})},onUnblock:function(){hE.setIdle(y)}}),b="normal"!==t.internalDialog.size?"large"===t.internalDialog.size?"tox-dialog--width-lg":"tox-dialog--width-md":[],y=Fh(hE.sketch({lazySink:n.shared.getSink,onEscape:function(t){return Kn(t,Gk),j.some(!0)},useTabstopAt:function(t){return!sO(t)&&("button"!==wn(t)||"disabled"!==Hn(t,"disabled"))},modalBehaviours:bi([bT.config({channel:aA,updateState:function(t,e){return j.some(e)},initialData:t}),Ha.config({}),bm("execute-on-form",v.concat([ni(It(),function(t,e){Kc.focusIn(t)})])),oO({})]),eventOrder:(o={},o[Ce()]=["execute-on-form"],o[Be()]=["reflecting","execute-on-form"],o),dom:{tag:"div",classes:["tox-dialog"].concat(b),styles:{position:"relative"}},components:[h,g,p],dragBlockClass:"tox-dialog-wrap",parts:{blocker:{dom:xl('<div class="tox-dialog-wrap"></div>'),components:[{dom:{tag:"div",classes:["tox-dialog-wrap__backdrop"]}}]}}})),x=DA({getRoot:function(){return y},getBody:function(){return hE.getBody(y)},getFooter:function(){return hE.getFooter(y)},getFormWrapper:function(){var t=hE.getBody(y);return wm.getCurrent(t).getOr(t)}},e.redial);return{dialog:y,instanceApi:x}},RA=function(t,e,n){var o,r,i,a,u,c,s,l,f=$n("dialog-label"),d=Ud((i={title:t.internalDialog.title,draggable:!0},a=f,u=n.shared.providers,Cm.sketch({dom:xl('<div class="tox-dialog__header"></div>'),components:[AA(i,j.some(a),u),EA(u)],containerBehaviours:bi([NV.config({mode:"mouse",blockerClass:"blocker",getTarget:function(t){return Ka(t,'[role="dialog"]').getOrDie()},snaps:{getSnapPoints:function(){return[]},leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])}))),m=Ud((c={body:t.internalDialog.body},zA(c,n))),h=Ud((s={buttons:t.internalDialog.buttons},l=n.shared.providers,HA(s,l))),g=MA(function(){return v},{onBlock:function(){},onUnblock:function(){},onClose:function(){return e.closeWindow()}}),p=Fh({dom:{tag:"div",classes:["tox-dialog"],attributes:(o={role:"dialog"},o["aria-labelledby"]=f,o)},eventOrder:(r={},r[Se()]=[bT.name(),aa.name()],r[Ce()]=["execute-on-form"],r[Be()]=["reflecting","execute-on-form"],r),behaviours:bi([Kc.config({mode:"cyclic",onEscape:function(t){return Kn(t,Wk),j.some(!0)},useTabstopAt:function(t){return!sO(t)&&("button"!==wn(t)||"disabled"!==Hn(t,"disabled"))}}),bT.config({channel:aA,updateState:function(t,e){return j.some(e)},initialData:t}),bm("execute-on-form",g),oO({})]),components:[d.asSpec(),m.asSpec(),h.asSpec()]}),v=DA({getRoot:function(){return p},getFooter:function(){return h.get(p)},getBody:function(){return m.get(p)},getFormWrapper:function(){var t=m.get(p);return wm.getCurrent(t).getOr(t)}},e.redial);return{dialog:p,instanceApi:v}},IA=function(t){return hE.parts().close(vl.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":"Close"}},action:t,buttonBehaviours:bi([_m.config({})])}))},FA=function(){return hE.parts().title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}})},LA=function(t,e){return hE.parts().body({dom:{tag:"div",classes:["tox-dialog__body","todo-tox-fit"]},components:[{dom:xl("<p>"+e.translate(t)+"</p>")}]})},PA=function(t){return hE.parts().footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:t})},jA=function(t,e){return[Cm.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:t}),Cm.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:e})]},NA=function(n){return hE.sketch({lazySink:n.lazySink,onEscape:function(){return n.onCancel(),j.some(!0)},dom:{tag:"div",classes:["tox-dialog"].concat(n.extraClasses)},components:[{dom:{tag:"div",classes:["tox-dialog__header"]},components:[n.partSpecs.title,n.partSpecs.close]},n.partSpecs.body,n.partSpecs.footer],parts:{blocker:{dom:xl('<div class="tox-dialog-wrap"></div>'),components:[{dom:{tag:"div",classes:["tox-dialog-wrap__backdrop"]}}]}},modalBehaviours:bi([bm("basic-dialog-events",[Yr(Gk,function(t,e){n.onCancel()}),Yr($k,function(t,e){n.onSubmit()})])])})},UA=function(c){var a,u,o=(a=c.backstage.shared,{open:function(t,e){var n=function(t){hE.hide(t),e()},o=Ud(qO({name:"close-alert",text:"Ok",primary:!0},"cancel",a.providers)),r=Fh(NA({lazySink:function(){return a.getSink()},partSpecs:{title:FA(),close:IA(function(){n(r)}),body:LA(t,a.providers),footer:PA(jA([],[o.asSpec()]))},onCancel:function(){return n(r)},onSubmit:P,extraClasses:["tox-alert-dialog"]}));hE.show(r);var i=o.get(r);Ha.focus(i)}}),r=(u=c.backstage.shared,{open:function(t,n){var e=function(t,e){hE.hide(t),n(e)},o=Ud(qO({name:"yes",text:"Yes",primary:!0},"submit",u.providers)),r=qO({name:"no",text:"No",primary:!0},"cancel",u.providers),i=Fh(NA({lazySink:function(){return u.getSink()},partSpecs:{title:FA(),close:IA(function(){e(i,!1)}),body:LA(t,u.providers),footer:PA(jA([],[o.asSpec(),r]))},onCancel:function(){return e(i,!1)},onSubmit:function(){return e(i,!0)},extraClasses:["tox-confirm-dialog"]}));hE.show(i);var a=o.get(i);Ha.focus(a)}}),i=function(t,i){return iA.open(function(t,e,n){var o=e,r=_A({dataValidator:n,initialData:o,internalDialog:t},{redial:iA.redial,closeWindow:function(){hE.hide(r.dialog),i(r.instanceApi)}},c.backstage);return hE.show(r.dialog),r.instanceApi.setData(o),r.instanceApi},t)},s=function(t,a,u){return iA.open(function(t,e,n){var o=cr(ur("data",n,e)),r=RA({dataValidator:n,initialData:o,internalDialog:t},{redial:iA.redial,closeWindow:function(){rw.hide(i),u(r.instanceApi)}},c.backstage),i=Fh(rw.sketch({lazySink:c.backstage.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:{},inlineBehaviours:bi([bm("window-manager-inline-events",[Yr(_e(),function(t,e){Kn(r.dialog,Gk)})])])}));return rw.showAt(i,a,Lh(r.dialog)),r.instanceApi.setData(o),Kc.focusIn(r.dialog),r.instanceApi},t)};return{open:function(t,e,n){return e!==undefined&&"toolbar"===e.inline?s(t,c.backstage.shared.anchors.toolbar(),n):e!==undefined&&"cursor"===e.inline?s(t,c.backstage.shared.anchors.cursor(),n):i(t,n)},openInlineDialog:s,alert:function(t,e,n){o.open(t,function(){n(),e()})},close:function(t){t.close()},confirm:function(t,e,n){r.open(t,function(t){n(),e(t)})}}};qn.add("silver",function(o){if(ye.detect().deviceType.isTouch()&&!o.getParam("inline",!1,"boolean"))return Qb(o);var t=JV(o),e=t.mothership,n=t.uiMothership,r=t.backstage,i=t.renderUI,a=t.getUi;uE(o),Wn($n("silver-demo"),e),Wn($n("silver-ui-demo"),n),Pk(o,r.shared);var u=UA({backstage:r});return{renderUI:i,getWindowManagerImpl:function(){var t,e=(t=o.windowManager.windows,j.from(t[t.length-1])).fold(function(){return{getParams:P,setParams:P}},function(t){return{getParams:t.getData,setParams:t.setData}}),n={getWindows:function(){return o.windowManager.windows},windows:o.windowManager.windows};return vt(u,e,n)},getNotificationManagerImpl:function(){return fw(o,{backstage:r},n)},ui:a()}}),function yB(){}}();