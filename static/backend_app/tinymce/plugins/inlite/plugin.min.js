!function(){"use strict";var e,n,r,t,o,i,u,s=tinymce.util.Tools.resolve("tinymce.PluginManager"),a=0,c=function(e,n,r){var t,o,i;e.plugins.table?e.plugins.table.insertTable(n,r):(o=n,i=r,(t=e).undoManager.transact(function(){var e,n;t.insertContent(function(e,n){var r,t,o;for(o='<table data-mce-id="mce" style="width: 100%">',o+="<tbody>",t=0;t<n;t++){for(o+="<tr>",r=0;r<e;r++)o+="<td><br></td>";o+="</tr>"}return o+="</tbody>",o+="</table>"}(o,i)),(e=t.dom.select("*[data-mce-id]")[0]).removeAttribute("data-mce-id"),n=t.dom.select("td,th",e),t.selection.setCursorLocation(n[0],0)}))},f=function(e,n,r){var t,o,i,u;o=(t=e.editorUpload.blobCache).create((i="mceu",u=(new Date).getTime(),i+"_"+Math.floor(1e9*Math.random())+ ++a+String(u)),r,n),t.add(o),e.insertContent(e.dom.createHTML("img",{src:o.blobUri()}))},d="undefined"!=typeof window?window:Function("return this;")(),l=function(e,n){return function(e,n){for(var r=n!==undefined&&null!==n?n:d,t=0;t<e.length&&r!==undefined&&null!==r;++t)r=r[e[t]];return r}(e.split("."),n)},m=function(e,n){var r=l(e,n);if(r===undefined||null===r)throw e+" not available on this browser";return r},g=tinymce.util.Tools.resolve("tinymce.util.Promise"),v=function(t){return new g(function(e){var n=function r(){return new(m("FileReader"))}();n.onloadend=function(){e(n.result.split(",")[1])},n.readAsDataURL(t)})},h=function(){return new g(function(n){var e;(e=document.createElement("input")).type="file",e.style.position="fixed",e.style.left=0,e.style.top=0,e.style.opacity=.001,document.body.appendChild(e),e.onchange=function(e){n(Array.prototype.slice.call(e.target.files))},e.click(),e.parentNode.removeChild(e)})},p=function(r){r.ui.registry.addButton("quickimage",{icon:"image",tooltip:"Insert image",onAction:function(){h().then(function(e){var n=e[0];v(n).then(function(e){f(r,e,n)})})}}),r.ui.registry.addButton("quicktable",{icon:"table",tooltip:"Insert table",onAction:function(){c(r,2,2)}})},b=function(e){return function(){return e}},O=b(!1),N=b(!0),T=O,y=N,E=function(){return w},w=(t={fold:function(e,n){return e()},is:T,isSome:T,isNone:y,getOr:r=function(e){return e},getOrThunk:n=function(e){return e()},getOrDie:function(e){throw new Error(e||"error: getOrDie called on none.")},getOrNull:function(){return null},getOrUndefined:function(){return undefined},or:r,orThunk:n,map:E,ap:E,each:function(){},bind:E,flatten:E,exists:T,forall:y,filter:E,equals:e=function(e){return e.isNone()},equals_:e,toArray:function(){return[]},toString:b("none()")},Object.freeze&&Object.freeze(t),t),S=function(r){var e=function(){return r},n=function(){return o},t=function(e){return e(r)},o={fold:function(e,n){return n(r)},is:function(e){return r===e},isSome:y,isNone:T,getOr:e,getOrThunk:e,getOrDie:e,getOrNull:e,getOrUndefined:e,or:n,orThunk:n,map:function(e){return S(e(r))},ap:function(e){return e.fold(E,function(e){return S(e(r))})},each:function(e){e(r)},bind:t,flatten:e,exists:t,forall:t,filter:function(e){return e(r)?o:w},equals:function(e){return e.is(r)},equals_:function(e,n){return e.fold(T,function(e){return n(r,e)})},toArray:function(){return[r]},toString:function(){return"some("+r+")"}};return o},x={some:S,none:E,from:function(e){return null===e||e===undefined?w:S(e)}},k=function(e){if(null===e||e===undefined)throw new Error("Node cannot be null or undefined");return{dom:b(e)}},C={fromHtml:function(e,n){var r=(n||document).createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||1<r.childNodes.length)throw console.error("HTML does not have a single root node",e),"HTML must have a single root node";return k(r.childNodes[0])},fromTag:function(e,n){var r=(n||document).createElement(e);return k(r)},fromText:function(e,n){var r=(n||document).createTextNode(e);return k(r)},fromDom:k,fromPoint:function(e,n,r){var t=e.dom();return x.from(t.elementFromPoint(n,r)).map(k)}},D=(Node.ATTRIBUTE_NODE,Node.CDATA_SECTION_NODE,Node.COMMENT_NODE,Node.DOCUMENT_NODE,Node.DOCUMENT_TYPE_NODE,Node.DOCUMENT_FRAGMENT_NODE,Node.ELEMENT_NODE),_=(Node.TEXT_NODE,Node.PROCESSING_INSTRUCTION_NODE,Node.ENTITY_REFERENCE_NODE,Node.ENTITY_NODE,Node.NOTATION_NODE,function(n){return function(e){return function(e){if(null===e)return"null";var n=typeof e;return"object"===n&&Array.prototype.isPrototypeOf(e)?"array":"object"===n&&String.prototype.isPrototypeOf(e)?"string":n}(e)===n}}),A=_("string"),R=_("array"),M=_("boolean"),I=_("function"),L=(Array.prototype.slice,I(Array.from)&&Array.from,function(e,n){var r=function(e,n){for(var r=0;r<e.length;r++){var t=e[r];if(t.test(n))return t}return undefined}(e,n);if(!r)return{major:0,minor:0};var t=function(e){return Number(n.replace(r,"$"+e))};return F(t(1),t(2))}),U=function(){return F(0,0)},F=function(e,n){return{major:e,minor:n}},q={nu:F,detect:function(e,n){var r=String(n).toLowerCase();return 0===e.length?U():L(e,r)},unknown:U},B="Firefox",P=function(e,n){return function(){return n===e}},j=function(e){var n=e.current;return{current:n,version:e.version,isEdge:P("Edge",n),isChrome:P("Chrome",n),isIE:P("IE",n),isOpera:P("Opera",n),isFirefox:P(B,n),isSafari:P("Safari",n)}},H={unknown:function(){return j({current:undefined,version:q.unknown()})},nu:j,edge:b("Edge"),chrome:b("Chrome"),ie:b("IE"),opera:b("Opera"),firefox:b(B),safari:b("Safari")},W="Windows",X="Android",z="Solaris",Y="FreeBSD",G=function(e,n){return function(){return n===e}},$=function(e){var n=e.current;return{current:n,version:e.version,isWindows:G(W,n),isiOS:G("iOS",n),isAndroid:G(X,n),isOSX:G("OSX",n),isLinux:G("Linux",n),isSolaris:G(z,n),isFreeBSD:G(Y,n)}},V={unknown:function(){return $({current:undefined,version:q.unknown()})},nu:$,windows:b(W),ios:b("iOS"),android:b(X),linux:b("Linux"),osx:b("OSX"),solaris:b(z),freebsd:b(Y)},J=function(e,n){var r=String(n).toLowerCase();return function(e,n){for(var r=0,t=e.length;r<t;r++){var o=e[r];if(n(o,r,e))return x.some(o)}return x.none()}(e,function(e){return e.search(r)})},K=function(e,r){return J(e,r).map(function(e){var n=q.detect(e.versionRegexes,r);return{current:e.name,version:n}})},Q=function(e,r){return J(e,r).map(function(e){var n=q.detect(e.versionRegexes,r);return{current:e.name,version:n}})},Z=function(e,n){return-1!==e.indexOf(n)},ee=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,ne=function(n){return function(e){return Z(e,n)}},re=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(e){return Z(e,"edge/")&&Z(e,"chrome")&&Z(e,"safari")&&Z(e,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,ee],search:function(e){return Z(e,"chrome")&&!Z(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(e){return Z(e,"msie")||Z(e,"trident")}},{name:"Opera",versionRegexes:[ee,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:ne("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:ne("firefox")},{name:"Safari",versionRegexes:[ee,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(e){return(Z(e,"safari")||Z(e,"mobile/"))&&Z(e,"applewebkit")}}],te=[{name:"Windows",search:ne("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(e){return Z(e,"iphone")||Z(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:ne("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:ne("os x"),versionRegexes:[/.*?os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:ne("linux"),versionRegexes:[]},{name:"Solaris",search:ne("sunos"),versionRegexes:[]},{name:"FreeBSD",search:ne("freebsd"),versionRegexes:[]}],oe={browsers:b(re),oses:b(te)},ie=function(e){var n,r,t,o,i,u,s,a,c,f,d,l=oe.browsers(),m=oe.oses(),g=K(l,e).fold(H.unknown,H.nu),v=Q(m,e).fold(V.unknown,V.nu);return{browser:g,os:v,deviceType:(r=g,t=e,o=(n=v).isiOS()&&!0===/ipad/i.test(t),i=n.isiOS()&&!o,u=n.isAndroid()&&3===n.version.major,s=n.isAndroid()&&4===n.version.major,a=o||u||s&&!0===/mobile/i.test(t),c=n.isiOS()||n.isAndroid(),f=c&&!a,d=r.isSafari()&&n.isiOS()&&!1===/safari/i.test(t),{isiPad:b(o),isiPhone:b(i),isTablet:b(a),isPhone:b(f),isTouch:b(c),isAndroid:n.isAndroid,isiOS:n.isiOS,isWebView:b(d)})}},ue=(u=!(o=function(){var e=navigator.userAgent;return ie(e)}),function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return u||(u=!0,i=o.apply(null,e)),i}),se=D,ae=function(e,n){var r=e.dom();if(r.nodeType!==se)return!1;if(r.matches!==undefined)return r.matches(n);if(r.msMatchesSelector!==undefined)return r.msMatchesSelector(n);if(r.webkitMatchesSelector!==undefined)return r.webkitMatchesSelector(n);if(r.mozMatchesSelector!==undefined)return r.mozMatchesSelector(n);throw new Error("Browser lacks native selectors")};function ce(e,n,r,t,o){return e(r,t)?x.some(r):I(o)&&o(r)?x.none():n(r,t,o)}ue().browser.isIE();var fe,de=function(e,n,r){for(var t=e.dom(),o=I(r)?r:b(!1);t.parentNode;){t=t.parentNode;var i=C.fromDom(t);if(n(i))return x.some(i);if(o(i))break}return x.none()},le=function(e,n,r){return de(e,function(e){return ae(e,n)},r)},me={getToolbarItemsOr:(fe=R,function(e,n,r){var t,o,i,u,s,a=n in e.settings?e.settings[n]:r;return function(e,n){if(!n(e))throw new Error("Default value doesn't match requested type.")}(r,fe),o=r,R(t=a)?t:A(t)?"string"==typeof(u=t)?(s=/[ ,]/,u.split(s).filter(function(e){return 0<e.length})):u:M(t)?(i=o,!1===t?[]:i):o})},ge=function(e){return me.getToolbarItemsOr(e,"inlite_selection_toolbar","bold forecolor italic | form:link-form h2 h3 blockquote")},ve=function(e){return me.getToolbarItemsOr(e,"inlite_insert_toolbar","quickimage quicktable")},he=function(s){s.ui.registry.addContextToolbar("quickblock",{predicate:function(e){var n,r,t,o=C.fromDom(e),i=s.schema.getTextBlockElements(),u=function(e){return e.dom()===s.getBody()};return(n=o,r="table",t=u,ce(ae,le,n,r,t)).fold(function(){return(e=o,n=function(e){return e.dom().nodeName.toLowerCase()in i&&s.dom.isEmpty(e.dom())},r=u,ce(function(e){return n(e)},de,e,n,r)).isSome();var e,n,r},function(){return!1})},items:ve(s),position:"line",scope:"editor"})},pe=(tinymce.util.Tools.resolve("tinymce.util.Tools"),tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),function(e,n){e.execCommand("FormatBlock",!1,n)}),be=function(t){for(var e=function(e){var n,r="h"+e;t.ui.registry.addToggleButton(r,{type:"togglebutton",text:r.toUpperCase(),tooltip:"Heading "+e,onSetup:function(e){return t.selection.selectorChangedWithUnbind(r,e.setActive).unbind},onAction:(n=r,function(){pe(t,n)})})},n=1;n<6;n++)e(n)},Oe=function(n){n.ui.registry.addContextToolbar("textselection",{type:"contexttoolbar",predicate:function(e){return!n.selection.isCollapsed()},items:ge(n),position:"selection"})};s.add("inlite",function(e){p(e),he(e),be(e),Oe(e)}),function Ne(){}}();